var xS=Object.defineProperty;var oy=n=>{throw TypeError(n)};var bS=(n,e,t)=>e in n?xS(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var X=(n,e,t)=>bS(n,typeof e!="symbol"?e+"":e,t),Kp=(n,e,t)=>e.has(n)||oy("Cannot "+t);var l=(n,e,t)=>(Kp(n,e,"read from private field"),t?t.call(n):e.get(n)),b=(n,e,t)=>e.has(n)?oy("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),g=(n,e,t,s)=>(Kp(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t),A=(n,e,t)=>(Kp(n,e,"access private method"),t);var Dt=(n,e,t,s)=>({set _(i){g(n,e,i,t)},get _(){return l(n,e,s)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();function AS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Vw={exports:{}},Ap={},Ww={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var td=Symbol.for("react.element"),SS=Symbol.for("react.portal"),ES=Symbol.for("react.fragment"),_S=Symbol.for("react.strict_mode"),kS=Symbol.for("react.profiler"),CS=Symbol.for("react.provider"),NS=Symbol.for("react.context"),TS=Symbol.for("react.forward_ref"),PS=Symbol.for("react.suspense"),RS=Symbol.for("react.memo"),LS=Symbol.for("react.lazy"),ly=Symbol.iterator;function MS(n){return n===null||typeof n!="object"?null:(n=ly&&n[ly]||n["@@iterator"],typeof n=="function"?n:null)}var Gw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xw=Object.assign,Yw={};function pc(n,e,t){this.props=n,this.context=e,this.refs=Yw,this.updater=t||Gw}pc.prototype.isReactComponent={};pc.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};pc.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function qw(){}qw.prototype=pc.prototype;function V0(n,e,t){this.props=n,this.context=e,this.refs=Yw,this.updater=t||Gw}var W0=V0.prototype=new qw;W0.constructor=V0;Xw(W0,pc.prototype);W0.isPureReactComponent=!0;var cy=Array.isArray,Kw=Object.prototype.hasOwnProperty,G0={current:null},Qw={key:!0,ref:!0,__self:!0,__source:!0};function Jw(n,e,t){var s,i={},r=null,a=null;if(e!=null)for(s in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(r=""+e.key),e)Kw.call(e,s)&&!Qw.hasOwnProperty(s)&&(i[s]=e[s]);var o=arguments.length-2;if(o===1)i.children=t;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];i.children=c}if(n&&n.defaultProps)for(s in o=n.defaultProps,o)i[s]===void 0&&(i[s]=o[s]);return{$$typeof:td,type:n,key:r,ref:a,props:i,_owner:G0.current}}function IS(n,e){return{$$typeof:td,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function X0(n){return typeof n=="object"&&n!==null&&n.$$typeof===td}function jS(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var uy=/\/+/g;function Qp(n,e){return typeof n=="object"&&n!==null&&n.key!=null?jS(""+n.key):e.toString(36)}function Md(n,e,t,s,i){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(r){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case td:case SS:a=!0}}if(a)return a=n,i=i(a),n=s===""?"."+Qp(a,0):s,cy(i)?(t="",n!=null&&(t=n.replace(uy,"$&/")+"/"),Md(i,e,t,"",function(u){return u})):i!=null&&(X0(i)&&(i=IS(i,t+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(uy,"$&/")+"/")+n)),e.push(i)),1;if(a=0,s=s===""?".":s+":",cy(n))for(var o=0;o<n.length;o++){r=n[o];var c=s+Qp(r,o);a+=Md(r,e,t,c,i)}else if(c=MS(n),typeof c=="function")for(n=c.call(n),o=0;!(r=n.next()).done;)r=r.value,c=s+Qp(r,o++),a+=Md(r,e,t,c,i);else if(r==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function hd(n,e,t){if(n==null)return n;var s=[],i=0;return Md(n,s,"","",function(r){return e.call(t,r,i++)}),s}function DS(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Yt={current:null},Id={transition:null},FS={ReactCurrentDispatcher:Yt,ReactCurrentBatchConfig:Id,ReactCurrentOwner:G0};function Zw(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:hd,forEach:function(n,e,t){hd(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return hd(n,function(){e++}),e},toArray:function(n){return hd(n,function(e){return e})||[]},only:function(n){if(!X0(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};le.Component=pc;le.Fragment=ES;le.Profiler=kS;le.PureComponent=V0;le.StrictMode=_S;le.Suspense=PS;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FS;le.act=Zw;le.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var s=Xw({},n.props),i=n.key,r=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,a=G0.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var o=n.type.defaultProps;for(c in e)Kw.call(e,c)&&!Qw.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=t;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];s.children=o}return{$$typeof:td,type:n.type,key:i,ref:r,props:s,_owner:a}};le.createContext=function(n){return n={$$typeof:NS,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:CS,_context:n},n.Consumer=n};le.createElement=Jw;le.createFactory=function(n){var e=Jw.bind(null,n);return e.type=n,e};le.createRef=function(){return{current:null}};le.forwardRef=function(n){return{$$typeof:TS,render:n}};le.isValidElement=X0;le.lazy=function(n){return{$$typeof:LS,_payload:{_status:-1,_result:n},_init:DS}};le.memo=function(n,e){return{$$typeof:RS,type:n,compare:e===void 0?null:e}};le.startTransition=function(n){var e=Id.transition;Id.transition={};try{n()}finally{Id.transition=e}};le.unstable_act=Zw;le.useCallback=function(n,e){return Yt.current.useCallback(n,e)};le.useContext=function(n){return Yt.current.useContext(n)};le.useDebugValue=function(){};le.useDeferredValue=function(n){return Yt.current.useDeferredValue(n)};le.useEffect=function(n,e){return Yt.current.useEffect(n,e)};le.useId=function(){return Yt.current.useId()};le.useImperativeHandle=function(n,e,t){return Yt.current.useImperativeHandle(n,e,t)};le.useInsertionEffect=function(n,e){return Yt.current.useInsertionEffect(n,e)};le.useLayoutEffect=function(n,e){return Yt.current.useLayoutEffect(n,e)};le.useMemo=function(n,e){return Yt.current.useMemo(n,e)};le.useReducer=function(n,e,t){return Yt.current.useReducer(n,e,t)};le.useRef=function(n){return Yt.current.useRef(n)};le.useState=function(n){return Yt.current.useState(n)};le.useSyncExternalStore=function(n,e,t){return Yt.current.useSyncExternalStore(n,e,t)};le.useTransition=function(){return Yt.current.useTransition()};le.version="18.3.1";Ww.exports=le;var N=Ww.exports;const OS=AS(N);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zS=N,BS=Symbol.for("react.element"),HS=Symbol.for("react.fragment"),US=Object.prototype.hasOwnProperty,$S=zS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,VS={key:!0,ref:!0,__self:!0,__source:!0};function ex(n,e,t){var s,i={},r=null,a=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(a=e.ref);for(s in e)US.call(e,s)&&!VS.hasOwnProperty(s)&&(i[s]=e[s]);if(n&&n.defaultProps)for(s in e=n.defaultProps,e)i[s]===void 0&&(i[s]=e[s]);return{$$typeof:BS,type:n,key:r,ref:a,props:i,_owner:$S.current}}Ap.Fragment=HS;Ap.jsx=ex;Ap.jsxs=ex;Vw.exports=Ap;var f=Vw.exports,jm={},tx={exports:{}},Rn={},nx={exports:{}},sx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(L,$){var G=L.length;L.push($);e:for(;0<G;){var Q=G-1>>>1,oe=L[Q];if(0<i(oe,$))L[Q]=$,L[G]=oe,G=Q;else break e}}function t(L){return L.length===0?null:L[0]}function s(L){if(L.length===0)return null;var $=L[0],G=L.pop();if(G!==$){L[0]=G;e:for(var Q=0,oe=L.length,be=oe>>>1;Q<be;){var dt=2*(Q+1)-1,jt=L[dt],q=dt+1,te=L[q];if(0>i(jt,G))q<oe&&0>i(te,jt)?(L[Q]=te,L[q]=G,Q=q):(L[Q]=jt,L[dt]=G,Q=dt);else if(q<oe&&0>i(te,G))L[Q]=te,L[q]=G,Q=q;else break e}}return $}function i(L,$){var G=L.sortIndex-$.sortIndex;return G!==0?G:L.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var c=[],u=[],h=1,d=null,p=3,m=!1,v=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(L){for(var $=t(u);$!==null;){if($.callback===null)s(u);else if($.startTime<=L)s(u),$.sortIndex=$.expirationTime,e(c,$);else break;$=t(u)}}function _(L){if(w=!1,S(L),!v)if(t(c)!==null)v=!0,O(k);else{var $=t(u);$!==null&&R(_,$.startTime-L)}}function k(L,$){v=!1,w&&(w=!1,y(P),P=-1),m=!0;var G=p;try{for(S($),d=t(c);d!==null&&(!(d.expirationTime>$)||L&&!M());){var Q=d.callback;if(typeof Q=="function"){d.callback=null,p=d.priorityLevel;var oe=Q(d.expirationTime<=$);$=n.unstable_now(),typeof oe=="function"?d.callback=oe:d===t(c)&&s(c),S($)}else s(c);d=t(c)}if(d!==null)var be=!0;else{var dt=t(u);dt!==null&&R(_,dt.startTime-$),be=!1}return be}finally{d=null,p=G,m=!1}}var T=!1,C=null,P=-1,j=5,D=-1;function M(){return!(n.unstable_now()-D<j)}function J(){if(C!==null){var L=n.unstable_now();D=L;var $=!0;try{$=C(!0,L)}finally{$?ue():(T=!1,C=null)}}else T=!1}var ue;if(typeof x=="function")ue=function(){x(J)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,Oe=ee.port2;ee.port1.onmessage=J,ue=function(){Oe.postMessage(null)}}else ue=function(){E(J,0)};function O(L){C=L,T||(T=!0,ue())}function R(L,$){P=E(function(){L(n.unstable_now())},$)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,O(k))},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(L){switch(p){case 1:case 2:case 3:var $=3;break;default:$=p}var G=p;p=$;try{return L()}finally{p=G}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(L,$){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var G=p;p=L;try{return $()}finally{p=G}},n.unstable_scheduleCallback=function(L,$,G){var Q=n.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?Q+G:Q):G=Q,L){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=G+oe,L={id:h++,callback:$,priorityLevel:L,startTime:G,expirationTime:oe,sortIndex:-1},G>Q?(L.sortIndex=G,e(u,L),t(c)===null&&L===t(u)&&(w?(y(P),P=-1):w=!0,R(_,G-Q))):(L.sortIndex=oe,e(c,L),v||m||(v=!0,O(k))),L},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(L){var $=p;return function(){var G=p;p=$;try{return L.apply(this,arguments)}finally{p=G}}}})(sx);nx.exports=sx;var WS=nx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GS=N,Tn=WS;function I(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ix=new Set,cu={};function yo(n,e){oc(n,e),oc(n+"Capture",e)}function oc(n,e){for(cu[n]=e,n=0;n<e.length;n++)ix.add(e[n])}var Ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dm=Object.prototype.hasOwnProperty,XS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hy={},dy={};function YS(n){return Dm.call(dy,n)?!0:Dm.call(hy,n)?!1:XS.test(n)?dy[n]=!0:(hy[n]=!0,!1)}function qS(n,e,t,s){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function KS(n,e,t,s){if(e===null||typeof e>"u"||qS(n,e,t,s))return!0;if(s)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qt(n,e,t,s,i,r,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=r,this.removeEmptyString=a}var bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){bt[n]=new qt(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];bt[e]=new qt(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){bt[n]=new qt(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){bt[n]=new qt(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){bt[n]=new qt(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){bt[n]=new qt(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){bt[n]=new qt(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){bt[n]=new qt(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){bt[n]=new qt(n,5,!1,n.toLowerCase(),null,!1,!1)});var Y0=/[\-:]([a-z])/g;function q0(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Y0,q0);bt[e]=new qt(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Y0,q0);bt[e]=new qt(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Y0,q0);bt[e]=new qt(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){bt[n]=new qt(n,1,!1,n.toLowerCase(),null,!1,!1)});bt.xlinkHref=new qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){bt[n]=new qt(n,1,!1,n.toLowerCase(),null,!0,!0)});function K0(n,e,t,s){var i=bt.hasOwnProperty(e)?bt[e]:null;(i!==null?i.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(KS(e,t,i,s)&&(t=null),s||i===null?YS(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,s=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,s?n.setAttributeNS(s,e,t):n.setAttribute(e,t))))}var Hi=GS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dd=Symbol.for("react.element"),Lo=Symbol.for("react.portal"),Mo=Symbol.for("react.fragment"),Q0=Symbol.for("react.strict_mode"),Fm=Symbol.for("react.profiler"),rx=Symbol.for("react.provider"),ax=Symbol.for("react.context"),J0=Symbol.for("react.forward_ref"),Om=Symbol.for("react.suspense"),zm=Symbol.for("react.suspense_list"),Z0=Symbol.for("react.memo"),Wi=Symbol.for("react.lazy"),ox=Symbol.for("react.offscreen"),fy=Symbol.iterator;function wc(n){return n===null||typeof n!="object"?null:(n=fy&&n[fy]||n["@@iterator"],typeof n=="function"?n:null)}var Fe=Object.assign,Jp;function Lc(n){if(Jp===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Jp=e&&e[1]||""}return`
`+Jp+n}var Zp=!1;function em(n,e){if(!n||Zp)return"";Zp=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var s=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){s=u}n.call(e.prototype)}else{try{throw Error()}catch(u){s=u}n()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),r=s.stack.split(`
`),a=i.length-1,o=r.length-1;1<=a&&0<=o&&i[a]!==r[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==r[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==r[o]){var c=`
`+i[a].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=a&&0<=o);break}}}finally{Zp=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Lc(n):""}function QS(n){switch(n.tag){case 5:return Lc(n.type);case 16:return Lc("Lazy");case 13:return Lc("Suspense");case 19:return Lc("SuspenseList");case 0:case 2:case 15:return n=em(n.type,!1),n;case 11:return n=em(n.type.render,!1),n;case 1:return n=em(n.type,!0),n;default:return""}}function Bm(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Mo:return"Fragment";case Lo:return"Portal";case Fm:return"Profiler";case Q0:return"StrictMode";case Om:return"Suspense";case zm:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case ax:return(n.displayName||"Context")+".Consumer";case rx:return(n._context.displayName||"Context")+".Provider";case J0:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Z0:return e=n.displayName||null,e!==null?e:Bm(n.type)||"Memo";case Wi:e=n._payload,n=n._init;try{return Bm(n(e))}catch{}}return null}function JS(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bm(e);case 8:return e===Q0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fr(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function lx(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ZS(n){var e=lx(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),s=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,r=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){s=""+a,r.call(this,a)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return s},setValue:function(a){s=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function fd(n){n._valueTracker||(n._valueTracker=ZS(n))}function cx(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),s="";return n&&(s=lx(n)?n.checked?"true":"false":n.value),n=s,n!==t?(e.setValue(n),!0):!1}function Ef(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Hm(n,e){var t=e.checked;return Fe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function py(n,e){var t=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;t=Fr(e.value!=null?e.value:t),n._wrapperState={initialChecked:s,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ux(n,e){e=e.checked,e!=null&&K0(n,"checked",e,!1)}function Um(n,e){ux(n,e);var t=Fr(e.value),s=e.type;if(t!=null)s==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(s==="submit"||s==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?$m(n,e.type,t):e.hasOwnProperty("defaultValue")&&$m(n,e.type,Fr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function my(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function $m(n,e,t){(e!=="number"||Ef(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Mc=Array.isArray;function Go(n,e,t,s){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&s&&(n[t].defaultSelected=!0)}else{for(t=""+Fr(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,s&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function Vm(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(I(91));return Fe({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function gy(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(I(92));if(Mc(t)){if(1<t.length)throw Error(I(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Fr(t)}}function hx(n,e){var t=Fr(e.value),s=Fr(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),s!=null&&(n.defaultValue=""+s)}function vy(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function dx(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wm(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?dx(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var pd,fx=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,s,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,s,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(pd=pd||document.createElement("div"),pd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=pd.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function uu(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Jc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eE=["Webkit","ms","Moz","O"];Object.keys(Jc).forEach(function(n){eE.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Jc[e]=Jc[n]})});function px(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Jc.hasOwnProperty(n)&&Jc[n]?(""+e).trim():e+"px"}function mx(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var s=t.indexOf("--")===0,i=px(t,e[t],s);t==="float"&&(t="cssFloat"),s?n.setProperty(t,i):n[t]=i}}var tE=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gm(n,e){if(e){if(tE[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(I(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(I(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(I(61))}if(e.style!=null&&typeof e.style!="object")throw Error(I(62))}}function Xm(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ym=null;function ev(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var qm=null,Xo=null,Yo=null;function yy(n){if(n=id(n)){if(typeof qm!="function")throw Error(I(280));var e=n.stateNode;e&&(e=Cp(e),qm(n.stateNode,n.type,e))}}function gx(n){Xo?Yo?Yo.push(n):Yo=[n]:Xo=n}function vx(){if(Xo){var n=Xo,e=Yo;if(Yo=Xo=null,yy(n),e)for(n=0;n<e.length;n++)yy(e[n])}}function yx(n,e){return n(e)}function wx(){}var tm=!1;function xx(n,e,t){if(tm)return n(e,t);tm=!0;try{return yx(n,e,t)}finally{tm=!1,(Xo!==null||Yo!==null)&&(wx(),vx())}}function hu(n,e){var t=n.stateNode;if(t===null)return null;var s=Cp(t);if(s===null)return null;t=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(n=n.type,s=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!s;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(I(231,e,typeof t));return t}var Km=!1;if(Ii)try{var xc={};Object.defineProperty(xc,"passive",{get:function(){Km=!0}}),window.addEventListener("test",xc,xc),window.removeEventListener("test",xc,xc)}catch{Km=!1}function nE(n,e,t,s,i,r,a,o,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var Zc=!1,_f=null,kf=!1,Qm=null,sE={onError:function(n){Zc=!0,_f=n}};function iE(n,e,t,s,i,r,a,o,c){Zc=!1,_f=null,nE.apply(sE,arguments)}function rE(n,e,t,s,i,r,a,o,c){if(iE.apply(this,arguments),Zc){if(Zc){var u=_f;Zc=!1,_f=null}else throw Error(I(198));kf||(kf=!0,Qm=u)}}function wo(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function bx(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function wy(n){if(wo(n)!==n)throw Error(I(188))}function aE(n){var e=n.alternate;if(!e){if(e=wo(n),e===null)throw Error(I(188));return e!==n?null:n}for(var t=n,s=e;;){var i=t.return;if(i===null)break;var r=i.alternate;if(r===null){if(s=i.return,s!==null){t=s;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===t)return wy(i),n;if(r===s)return wy(i),e;r=r.sibling}throw Error(I(188))}if(t.return!==s.return)t=i,s=r;else{for(var a=!1,o=i.child;o;){if(o===t){a=!0,t=i,s=r;break}if(o===s){a=!0,s=i,t=r;break}o=o.sibling}if(!a){for(o=r.child;o;){if(o===t){a=!0,t=r,s=i;break}if(o===s){a=!0,s=r,t=i;break}o=o.sibling}if(!a)throw Error(I(189))}}if(t.alternate!==s)throw Error(I(190))}if(t.tag!==3)throw Error(I(188));return t.stateNode.current===t?n:e}function Ax(n){return n=aE(n),n!==null?Sx(n):null}function Sx(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=Sx(n);if(e!==null)return e;n=n.sibling}return null}var Ex=Tn.unstable_scheduleCallback,xy=Tn.unstable_cancelCallback,oE=Tn.unstable_shouldYield,lE=Tn.unstable_requestPaint,$e=Tn.unstable_now,cE=Tn.unstable_getCurrentPriorityLevel,tv=Tn.unstable_ImmediatePriority,_x=Tn.unstable_UserBlockingPriority,Cf=Tn.unstable_NormalPriority,uE=Tn.unstable_LowPriority,kx=Tn.unstable_IdlePriority,Sp=null,Ws=null;function hE(n){if(Ws&&typeof Ws.onCommitFiberRoot=="function")try{Ws.onCommitFiberRoot(Sp,n,void 0,(n.current.flags&128)===128)}catch{}}var vs=Math.clz32?Math.clz32:pE,dE=Math.log,fE=Math.LN2;function pE(n){return n>>>=0,n===0?32:31-(dE(n)/fE|0)|0}var md=64,gd=4194304;function Ic(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Nf(n,e){var t=n.pendingLanes;if(t===0)return 0;var s=0,i=n.suspendedLanes,r=n.pingedLanes,a=t&268435455;if(a!==0){var o=a&~i;o!==0?s=Ic(o):(r&=a,r!==0&&(s=Ic(r)))}else a=t&~i,a!==0?s=Ic(a):r!==0&&(s=Ic(r));if(s===0)return 0;if(e!==0&&e!==s&&!(e&i)&&(i=s&-s,r=e&-e,i>=r||i===16&&(r&4194240)!==0))return e;if(s&4&&(s|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=s;0<e;)t=31-vs(e),i=1<<t,s|=n[t],e&=~i;return s}function mE(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gE(n,e){for(var t=n.suspendedLanes,s=n.pingedLanes,i=n.expirationTimes,r=n.pendingLanes;0<r;){var a=31-vs(r),o=1<<a,c=i[a];c===-1?(!(o&t)||o&s)&&(i[a]=mE(o,e)):c<=e&&(n.expiredLanes|=o),r&=~o}}function Jm(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Cx(){var n=md;return md<<=1,!(md&4194240)&&(md=64),n}function nm(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function nd(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-vs(e),n[e]=t}function vE(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var s=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-vs(t),r=1<<i;e[i]=0,s[i]=-1,n[i]=-1,t&=~r}}function nv(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var s=31-vs(t),i=1<<s;i&e|n[s]&e&&(n[s]|=e),t&=~i}}var ve=0;function Nx(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Tx,sv,Px,Rx,Lx,Zm=!1,vd=[],Nr=null,Tr=null,Pr=null,du=new Map,fu=new Map,Xi=[],yE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function by(n,e){switch(n){case"focusin":case"focusout":Nr=null;break;case"dragenter":case"dragleave":Tr=null;break;case"mouseover":case"mouseout":Pr=null;break;case"pointerover":case"pointerout":du.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":fu.delete(e.pointerId)}}function bc(n,e,t,s,i,r){return n===null||n.nativeEvent!==r?(n={blockedOn:e,domEventName:t,eventSystemFlags:s,nativeEvent:r,targetContainers:[i]},e!==null&&(e=id(e),e!==null&&sv(e)),n):(n.eventSystemFlags|=s,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function wE(n,e,t,s,i){switch(e){case"focusin":return Nr=bc(Nr,n,e,t,s,i),!0;case"dragenter":return Tr=bc(Tr,n,e,t,s,i),!0;case"mouseover":return Pr=bc(Pr,n,e,t,s,i),!0;case"pointerover":var r=i.pointerId;return du.set(r,bc(du.get(r)||null,n,e,t,s,i)),!0;case"gotpointercapture":return r=i.pointerId,fu.set(r,bc(fu.get(r)||null,n,e,t,s,i)),!0}return!1}function Mx(n){var e=Zr(n.target);if(e!==null){var t=wo(e);if(t!==null){if(e=t.tag,e===13){if(e=bx(t),e!==null){n.blockedOn=e,Lx(n.priority,function(){Px(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function jd(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=eg(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var s=new t.constructor(t.type,t);Ym=s,t.target.dispatchEvent(s),Ym=null}else return e=id(t),e!==null&&sv(e),n.blockedOn=t,!1;e.shift()}return!0}function Ay(n,e,t){jd(n)&&t.delete(e)}function xE(){Zm=!1,Nr!==null&&jd(Nr)&&(Nr=null),Tr!==null&&jd(Tr)&&(Tr=null),Pr!==null&&jd(Pr)&&(Pr=null),du.forEach(Ay),fu.forEach(Ay)}function Ac(n,e){n.blockedOn===e&&(n.blockedOn=null,Zm||(Zm=!0,Tn.unstable_scheduleCallback(Tn.unstable_NormalPriority,xE)))}function pu(n){function e(i){return Ac(i,n)}if(0<vd.length){Ac(vd[0],n);for(var t=1;t<vd.length;t++){var s=vd[t];s.blockedOn===n&&(s.blockedOn=null)}}for(Nr!==null&&Ac(Nr,n),Tr!==null&&Ac(Tr,n),Pr!==null&&Ac(Pr,n),du.forEach(e),fu.forEach(e),t=0;t<Xi.length;t++)s=Xi[t],s.blockedOn===n&&(s.blockedOn=null);for(;0<Xi.length&&(t=Xi[0],t.blockedOn===null);)Mx(t),t.blockedOn===null&&Xi.shift()}var qo=Hi.ReactCurrentBatchConfig,Tf=!0;function bE(n,e,t,s){var i=ve,r=qo.transition;qo.transition=null;try{ve=1,iv(n,e,t,s)}finally{ve=i,qo.transition=r}}function AE(n,e,t,s){var i=ve,r=qo.transition;qo.transition=null;try{ve=4,iv(n,e,t,s)}finally{ve=i,qo.transition=r}}function iv(n,e,t,s){if(Tf){var i=eg(n,e,t,s);if(i===null)dm(n,e,s,Pf,t),by(n,s);else if(wE(i,n,e,t,s))s.stopPropagation();else if(by(n,s),e&4&&-1<yE.indexOf(n)){for(;i!==null;){var r=id(i);if(r!==null&&Tx(r),r=eg(n,e,t,s),r===null&&dm(n,e,s,Pf,t),r===i)break;i=r}i!==null&&s.stopPropagation()}else dm(n,e,s,null,t)}}var Pf=null;function eg(n,e,t,s){if(Pf=null,n=ev(s),n=Zr(n),n!==null)if(e=wo(n),e===null)n=null;else if(t=e.tag,t===13){if(n=bx(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Pf=n,null}function Ix(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cE()){case tv:return 1;case _x:return 4;case Cf:case uE:return 16;case kx:return 536870912;default:return 16}default:return 16}}var kr=null,rv=null,Dd=null;function jx(){if(Dd)return Dd;var n,e=rv,t=e.length,s,i="value"in kr?kr.value:kr.textContent,r=i.length;for(n=0;n<t&&e[n]===i[n];n++);var a=t-n;for(s=1;s<=a&&e[t-s]===i[r-s];s++);return Dd=i.slice(n,1<s?1-s:void 0)}function Fd(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function yd(){return!0}function Sy(){return!1}function Ln(n){function e(t,s,i,r,a){this._reactName=t,this._targetInst=i,this.type=s,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?yd:Sy,this.isPropagationStopped=Sy,this}return Fe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=yd)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=yd)},persist:function(){},isPersistent:yd}),e}var mc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},av=Ln(mc),sd=Fe({},mc,{view:0,detail:0}),SE=Ln(sd),sm,im,Sc,Ep=Fe({},sd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ov,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Sc&&(Sc&&n.type==="mousemove"?(sm=n.screenX-Sc.screenX,im=n.screenY-Sc.screenY):im=sm=0,Sc=n),sm)},movementY:function(n){return"movementY"in n?n.movementY:im}}),Ey=Ln(Ep),EE=Fe({},Ep,{dataTransfer:0}),_E=Ln(EE),kE=Fe({},sd,{relatedTarget:0}),rm=Ln(kE),CE=Fe({},mc,{animationName:0,elapsedTime:0,pseudoElement:0}),NE=Ln(CE),TE=Fe({},mc,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),PE=Ln(TE),RE=Fe({},mc,{data:0}),_y=Ln(RE),LE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ME={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},IE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jE(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=IE[n])?!!e[n]:!1}function ov(){return jE}var DE=Fe({},sd,{key:function(n){if(n.key){var e=LE[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Fd(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ME[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ov,charCode:function(n){return n.type==="keypress"?Fd(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Fd(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),FE=Ln(DE),OE=Fe({},Ep,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ky=Ln(OE),zE=Fe({},sd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ov}),BE=Ln(zE),HE=Fe({},mc,{propertyName:0,elapsedTime:0,pseudoElement:0}),UE=Ln(HE),$E=Fe({},Ep,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),VE=Ln($E),WE=[9,13,27,32],lv=Ii&&"CompositionEvent"in window,eu=null;Ii&&"documentMode"in document&&(eu=document.documentMode);var GE=Ii&&"TextEvent"in window&&!eu,Dx=Ii&&(!lv||eu&&8<eu&&11>=eu),Cy=" ",Ny=!1;function Fx(n,e){switch(n){case"keyup":return WE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ox(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Io=!1;function XE(n,e){switch(n){case"compositionend":return Ox(e);case"keypress":return e.which!==32?null:(Ny=!0,Cy);case"textInput":return n=e.data,n===Cy&&Ny?null:n;default:return null}}function YE(n,e){if(Io)return n==="compositionend"||!lv&&Fx(n,e)?(n=jx(),Dd=rv=kr=null,Io=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Dx&&e.locale!=="ko"?null:e.data;default:return null}}var qE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ty(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!qE[n.type]:e==="textarea"}function zx(n,e,t,s){gx(s),e=Rf(e,"onChange"),0<e.length&&(t=new av("onChange","change",null,t,s),n.push({event:t,listeners:e}))}var tu=null,mu=null;function KE(n){Kx(n,0)}function _p(n){var e=Fo(n);if(cx(e))return n}function QE(n,e){if(n==="change")return e}var Bx=!1;if(Ii){var am;if(Ii){var om="oninput"in document;if(!om){var Py=document.createElement("div");Py.setAttribute("oninput","return;"),om=typeof Py.oninput=="function"}am=om}else am=!1;Bx=am&&(!document.documentMode||9<document.documentMode)}function Ry(){tu&&(tu.detachEvent("onpropertychange",Hx),mu=tu=null)}function Hx(n){if(n.propertyName==="value"&&_p(mu)){var e=[];zx(e,mu,n,ev(n)),xx(KE,e)}}function JE(n,e,t){n==="focusin"?(Ry(),tu=e,mu=t,tu.attachEvent("onpropertychange",Hx)):n==="focusout"&&Ry()}function ZE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return _p(mu)}function e_(n,e){if(n==="click")return _p(e)}function t_(n,e){if(n==="input"||n==="change")return _p(e)}function n_(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var ws=typeof Object.is=="function"?Object.is:n_;function gu(n,e){if(ws(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),s=Object.keys(e);if(t.length!==s.length)return!1;for(s=0;s<t.length;s++){var i=t[s];if(!Dm.call(e,i)||!ws(n[i],e[i]))return!1}return!0}function Ly(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function My(n,e){var t=Ly(n);n=0;for(var s;t;){if(t.nodeType===3){if(s=n+t.textContent.length,n<=e&&s>=e)return{node:t,offset:e-n};n=s}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Ly(t)}}function Ux(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?Ux(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function $x(){for(var n=window,e=Ef();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Ef(n.document)}return e}function cv(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function s_(n){var e=$x(),t=n.focusedElem,s=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&Ux(t.ownerDocument.documentElement,t)){if(s!==null&&cv(t)){if(e=s.start,n=s.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,r=Math.min(s.start,i);s=s.end===void 0?r:Math.min(s.end,i),!n.extend&&r>s&&(i=s,s=r,r=i),i=My(t,r);var a=My(t,s);i&&a&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),r>s?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var i_=Ii&&"documentMode"in document&&11>=document.documentMode,jo=null,tg=null,nu=null,ng=!1;function Iy(n,e,t){var s=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;ng||jo==null||jo!==Ef(s)||(s=jo,"selectionStart"in s&&cv(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),nu&&gu(nu,s)||(nu=s,s=Rf(tg,"onSelect"),0<s.length&&(e=new av("onSelect","select",null,e,t),n.push({event:e,listeners:s}),e.target=jo)))}function wd(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Do={animationend:wd("Animation","AnimationEnd"),animationiteration:wd("Animation","AnimationIteration"),animationstart:wd("Animation","AnimationStart"),transitionend:wd("Transition","TransitionEnd")},lm={},Vx={};Ii&&(Vx=document.createElement("div").style,"AnimationEvent"in window||(delete Do.animationend.animation,delete Do.animationiteration.animation,delete Do.animationstart.animation),"TransitionEvent"in window||delete Do.transitionend.transition);function kp(n){if(lm[n])return lm[n];if(!Do[n])return n;var e=Do[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in Vx)return lm[n]=e[t];return n}var Wx=kp("animationend"),Gx=kp("animationiteration"),Xx=kp("animationstart"),Yx=kp("transitionend"),qx=new Map,jy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ur(n,e){qx.set(n,e),yo(e,[n])}for(var cm=0;cm<jy.length;cm++){var um=jy[cm],r_=um.toLowerCase(),a_=um[0].toUpperCase()+um.slice(1);Ur(r_,"on"+a_)}Ur(Wx,"onAnimationEnd");Ur(Gx,"onAnimationIteration");Ur(Xx,"onAnimationStart");Ur("dblclick","onDoubleClick");Ur("focusin","onFocus");Ur("focusout","onBlur");Ur(Yx,"onTransitionEnd");oc("onMouseEnter",["mouseout","mouseover"]);oc("onMouseLeave",["mouseout","mouseover"]);oc("onPointerEnter",["pointerout","pointerover"]);oc("onPointerLeave",["pointerout","pointerover"]);yo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yo("onBeforeInput",["compositionend","keypress","textInput","paste"]);yo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),o_=new Set("cancel close invalid load scroll toggle".split(" ").concat(jc));function Dy(n,e,t){var s=n.type||"unknown-event";n.currentTarget=t,rE(s,e,void 0,n),n.currentTarget=null}function Kx(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var s=n[t],i=s.event;s=s.listeners;e:{var r=void 0;if(e)for(var a=s.length-1;0<=a;a--){var o=s[a],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==r&&i.isPropagationStopped())break e;Dy(i,o,u),r=c}else for(a=0;a<s.length;a++){if(o=s[a],c=o.instance,u=o.currentTarget,o=o.listener,c!==r&&i.isPropagationStopped())break e;Dy(i,o,u),r=c}}}if(kf)throw n=Qm,kf=!1,Qm=null,n}function Ee(n,e){var t=e[og];t===void 0&&(t=e[og]=new Set);var s=n+"__bubble";t.has(s)||(Qx(e,n,2,!1),t.add(s))}function hm(n,e,t){var s=0;e&&(s|=4),Qx(t,n,s,e)}var xd="_reactListening"+Math.random().toString(36).slice(2);function vu(n){if(!n[xd]){n[xd]=!0,ix.forEach(function(t){t!=="selectionchange"&&(o_.has(t)||hm(t,!1,n),hm(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[xd]||(e[xd]=!0,hm("selectionchange",!1,e))}}function Qx(n,e,t,s){switch(Ix(e)){case 1:var i=bE;break;case 4:i=AE;break;default:i=iv}t=i.bind(null,e,t,n),i=void 0,!Km||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),s?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function dm(n,e,t,s,i){var r=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var a=s.tag;if(a===3||a===4){var o=s.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=s.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Zr(o),a===null)return;if(c=a.tag,c===5||c===6){s=r=a;continue e}o=o.parentNode}}s=s.return}xx(function(){var u=r,h=ev(t),d=[];e:{var p=qx.get(n);if(p!==void 0){var m=av,v=n;switch(n){case"keypress":if(Fd(t)===0)break e;case"keydown":case"keyup":m=FE;break;case"focusin":v="focus",m=rm;break;case"focusout":v="blur",m=rm;break;case"beforeblur":case"afterblur":m=rm;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Ey;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=_E;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=BE;break;case Wx:case Gx:case Xx:m=NE;break;case Yx:m=UE;break;case"scroll":m=SE;break;case"wheel":m=VE;break;case"copy":case"cut":case"paste":m=PE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=ky}var w=(e&4)!==0,E=!w&&n==="scroll",y=w?p!==null?p+"Capture":null:p;w=[];for(var x=u,S;x!==null;){S=x;var _=S.stateNode;if(S.tag===5&&_!==null&&(S=_,y!==null&&(_=hu(x,y),_!=null&&w.push(yu(x,_,S)))),E)break;x=x.return}0<w.length&&(p=new m(p,v,null,t,h),d.push({event:p,listeners:w}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==Ym&&(v=t.relatedTarget||t.fromElement)&&(Zr(v)||v[ji]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=t.relatedTarget||t.toElement,m=u,v=v?Zr(v):null,v!==null&&(E=wo(v),v!==E||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=u),m!==v)){if(w=Ey,_="onMouseLeave",y="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(w=ky,_="onPointerLeave",y="onPointerEnter",x="pointer"),E=m==null?p:Fo(m),S=v==null?p:Fo(v),p=new w(_,x+"leave",m,t,h),p.target=E,p.relatedTarget=S,_=null,Zr(h)===u&&(w=new w(y,x+"enter",v,t,h),w.target=S,w.relatedTarget=E,_=w),E=_,m&&v)t:{for(w=m,y=v,x=0,S=w;S;S=So(S))x++;for(S=0,_=y;_;_=So(_))S++;for(;0<x-S;)w=So(w),x--;for(;0<S-x;)y=So(y),S--;for(;x--;){if(w===y||y!==null&&w===y.alternate)break t;w=So(w),y=So(y)}w=null}else w=null;m!==null&&Fy(d,p,m,w,!1),v!==null&&E!==null&&Fy(d,E,v,w,!0)}}e:{if(p=u?Fo(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var k=QE;else if(Ty(p))if(Bx)k=t_;else{k=ZE;var T=JE}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(k=e_);if(k&&(k=k(n,u))){zx(d,k,t,h);break e}T&&T(n,p,u),n==="focusout"&&(T=p._wrapperState)&&T.controlled&&p.type==="number"&&$m(p,"number",p.value)}switch(T=u?Fo(u):window,n){case"focusin":(Ty(T)||T.contentEditable==="true")&&(jo=T,tg=u,nu=null);break;case"focusout":nu=tg=jo=null;break;case"mousedown":ng=!0;break;case"contextmenu":case"mouseup":case"dragend":ng=!1,Iy(d,t,h);break;case"selectionchange":if(i_)break;case"keydown":case"keyup":Iy(d,t,h)}var C;if(lv)e:{switch(n){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Io?Fx(n,t)&&(P="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(P="onCompositionStart");P&&(Dx&&t.locale!=="ko"&&(Io||P!=="onCompositionStart"?P==="onCompositionEnd"&&Io&&(C=jx()):(kr=h,rv="value"in kr?kr.value:kr.textContent,Io=!0)),T=Rf(u,P),0<T.length&&(P=new _y(P,n,null,t,h),d.push({event:P,listeners:T}),C?P.data=C:(C=Ox(t),C!==null&&(P.data=C)))),(C=GE?XE(n,t):YE(n,t))&&(u=Rf(u,"onBeforeInput"),0<u.length&&(h=new _y("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:u}),h.data=C))}Kx(d,e)})}function yu(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Rf(n,e){for(var t=e+"Capture",s=[];n!==null;){var i=n,r=i.stateNode;i.tag===5&&r!==null&&(i=r,r=hu(n,t),r!=null&&s.unshift(yu(n,r,i)),r=hu(n,e),r!=null&&s.push(yu(n,r,i))),n=n.return}return s}function So(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Fy(n,e,t,s,i){for(var r=e._reactName,a=[];t!==null&&t!==s;){var o=t,c=o.alternate,u=o.stateNode;if(c!==null&&c===s)break;o.tag===5&&u!==null&&(o=u,i?(c=hu(t,r),c!=null&&a.unshift(yu(t,c,o))):i||(c=hu(t,r),c!=null&&a.push(yu(t,c,o)))),t=t.return}a.length!==0&&n.push({event:e,listeners:a})}var l_=/\r\n?/g,c_=/\u0000|\uFFFD/g;function Oy(n){return(typeof n=="string"?n:""+n).replace(l_,`
`).replace(c_,"")}function bd(n,e,t){if(e=Oy(e),Oy(n)!==e&&t)throw Error(I(425))}function Lf(){}var sg=null,ig=null;function rg(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ag=typeof setTimeout=="function"?setTimeout:void 0,u_=typeof clearTimeout=="function"?clearTimeout:void 0,zy=typeof Promise=="function"?Promise:void 0,h_=typeof queueMicrotask=="function"?queueMicrotask:typeof zy<"u"?function(n){return zy.resolve(null).then(n).catch(d_)}:ag;function d_(n){setTimeout(function(){throw n})}function fm(n,e){var t=e,s=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(s===0){n.removeChild(i),pu(e);return}s--}else t!=="$"&&t!=="$?"&&t!=="$!"||s++;t=i}while(t);pu(e)}function Rr(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function By(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var gc=Math.random().toString(36).slice(2),Vs="__reactFiber$"+gc,wu="__reactProps$"+gc,ji="__reactContainer$"+gc,og="__reactEvents$"+gc,f_="__reactListeners$"+gc,p_="__reactHandles$"+gc;function Zr(n){var e=n[Vs];if(e)return e;for(var t=n.parentNode;t;){if(e=t[ji]||t[Vs]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=By(n);n!==null;){if(t=n[Vs])return t;n=By(n)}return e}n=t,t=n.parentNode}return null}function id(n){return n=n[Vs]||n[ji],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Fo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(I(33))}function Cp(n){return n[wu]||null}var lg=[],Oo=-1;function $r(n){return{current:n}}function ke(n){0>Oo||(n.current=lg[Oo],lg[Oo]=null,Oo--)}function Se(n,e){Oo++,lg[Oo]=n.current,n.current=e}var Or={},It=$r(Or),an=$r(!1),lo=Or;function lc(n,e){var t=n.type.contextTypes;if(!t)return Or;var s=n.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var i={},r;for(r in t)i[r]=e[r];return s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function on(n){return n=n.childContextTypes,n!=null}function Mf(){ke(an),ke(It)}function Hy(n,e,t){if(It.current!==Or)throw Error(I(168));Se(It,e),Se(an,t)}function Jx(n,e,t){var s=n.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return t;s=s.getChildContext();for(var i in s)if(!(i in e))throw Error(I(108,JS(n)||"Unknown",i));return Fe({},t,s)}function If(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Or,lo=It.current,Se(It,n),Se(an,an.current),!0}function Uy(n,e,t){var s=n.stateNode;if(!s)throw Error(I(169));t?(n=Jx(n,e,lo),s.__reactInternalMemoizedMergedChildContext=n,ke(an),ke(It),Se(It,n)):ke(an),Se(an,t)}var ti=null,Np=!1,pm=!1;function Zx(n){ti===null?ti=[n]:ti.push(n)}function m_(n){Np=!0,Zx(n)}function Vr(){if(!pm&&ti!==null){pm=!0;var n=0,e=ve;try{var t=ti;for(ve=1;n<t.length;n++){var s=t[n];do s=s(!0);while(s!==null)}ti=null,Np=!1}catch(i){throw ti!==null&&(ti=ti.slice(n+1)),Ex(tv,Vr),i}finally{ve=e,pm=!1}}return null}var zo=[],Bo=0,jf=null,Df=0,Un=[],$n=0,co=null,Ni=1,Ti="";function Gr(n,e){zo[Bo++]=Df,zo[Bo++]=jf,jf=n,Df=e}function eb(n,e,t){Un[$n++]=Ni,Un[$n++]=Ti,Un[$n++]=co,co=n;var s=Ni;n=Ti;var i=32-vs(s)-1;s&=~(1<<i),t+=1;var r=32-vs(e)+i;if(30<r){var a=i-i%5;r=(s&(1<<a)-1).toString(32),s>>=a,i-=a,Ni=1<<32-vs(e)+i|t<<i|s,Ti=r+n}else Ni=1<<r|t<<i|s,Ti=n}function uv(n){n.return!==null&&(Gr(n,1),eb(n,1,0))}function hv(n){for(;n===jf;)jf=zo[--Bo],zo[Bo]=null,Df=zo[--Bo],zo[Bo]=null;for(;n===co;)co=Un[--$n],Un[$n]=null,Ti=Un[--$n],Un[$n]=null,Ni=Un[--$n],Un[$n]=null}var Cn=null,kn=null,Pe=!1,ms=null;function tb(n,e){var t=Gn(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function $y(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Cn=n,kn=Rr(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Cn=n,kn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=co!==null?{id:Ni,overflow:Ti}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Gn(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Cn=n,kn=null,!0):!1;default:return!1}}function cg(n){return(n.mode&1)!==0&&(n.flags&128)===0}function ug(n){if(Pe){var e=kn;if(e){var t=e;if(!$y(n,e)){if(cg(n))throw Error(I(418));e=Rr(t.nextSibling);var s=Cn;e&&$y(n,e)?tb(s,t):(n.flags=n.flags&-4097|2,Pe=!1,Cn=n)}}else{if(cg(n))throw Error(I(418));n.flags=n.flags&-4097|2,Pe=!1,Cn=n}}}function Vy(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Cn=n}function Ad(n){if(n!==Cn)return!1;if(!Pe)return Vy(n),Pe=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!rg(n.type,n.memoizedProps)),e&&(e=kn)){if(cg(n))throw nb(),Error(I(418));for(;e;)tb(n,e),e=Rr(e.nextSibling)}if(Vy(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(I(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){kn=Rr(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}kn=null}}else kn=Cn?Rr(n.stateNode.nextSibling):null;return!0}function nb(){for(var n=kn;n;)n=Rr(n.nextSibling)}function cc(){kn=Cn=null,Pe=!1}function dv(n){ms===null?ms=[n]:ms.push(n)}var g_=Hi.ReactCurrentBatchConfig;function Ec(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(I(309));var s=t.stateNode}if(!s)throw Error(I(147,n));var i=s,r=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(a){var o=i.refs;a===null?delete o[r]:o[r]=a},e._stringRef=r,e)}if(typeof n!="string")throw Error(I(284));if(!t._owner)throw Error(I(290,n))}return n}function Sd(n,e){throw n=Object.prototype.toString.call(e),Error(I(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function Wy(n){var e=n._init;return e(n._payload)}function sb(n){function e(y,x){if(n){var S=y.deletions;S===null?(y.deletions=[x],y.flags|=16):S.push(x)}}function t(y,x){if(!n)return null;for(;x!==null;)e(y,x),x=x.sibling;return null}function s(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function i(y,x){return y=jr(y,x),y.index=0,y.sibling=null,y}function r(y,x,S){return y.index=S,n?(S=y.alternate,S!==null?(S=S.index,S<x?(y.flags|=2,x):S):(y.flags|=2,x)):(y.flags|=1048576,x)}function a(y){return n&&y.alternate===null&&(y.flags|=2),y}function o(y,x,S,_){return x===null||x.tag!==6?(x=bm(S,y.mode,_),x.return=y,x):(x=i(x,S),x.return=y,x)}function c(y,x,S,_){var k=S.type;return k===Mo?h(y,x,S.props.children,_,S.key):x!==null&&(x.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Wi&&Wy(k)===x.type)?(_=i(x,S.props),_.ref=Ec(y,x,S),_.return=y,_):(_=Vd(S.type,S.key,S.props,null,y.mode,_),_.ref=Ec(y,x,S),_.return=y,_)}function u(y,x,S,_){return x===null||x.tag!==4||x.stateNode.containerInfo!==S.containerInfo||x.stateNode.implementation!==S.implementation?(x=Am(S,y.mode,_),x.return=y,x):(x=i(x,S.children||[]),x.return=y,x)}function h(y,x,S,_,k){return x===null||x.tag!==7?(x=oo(S,y.mode,_,k),x.return=y,x):(x=i(x,S),x.return=y,x)}function d(y,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return x=bm(""+x,y.mode,S),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case dd:return S=Vd(x.type,x.key,x.props,null,y.mode,S),S.ref=Ec(y,null,x),S.return=y,S;case Lo:return x=Am(x,y.mode,S),x.return=y,x;case Wi:var _=x._init;return d(y,_(x._payload),S)}if(Mc(x)||wc(x))return x=oo(x,y.mode,S,null),x.return=y,x;Sd(y,x)}return null}function p(y,x,S,_){var k=x!==null?x.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return k!==null?null:o(y,x,""+S,_);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case dd:return S.key===k?c(y,x,S,_):null;case Lo:return S.key===k?u(y,x,S,_):null;case Wi:return k=S._init,p(y,x,k(S._payload),_)}if(Mc(S)||wc(S))return k!==null?null:h(y,x,S,_,null);Sd(y,S)}return null}function m(y,x,S,_,k){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(S)||null,o(x,y,""+_,k);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case dd:return y=y.get(_.key===null?S:_.key)||null,c(x,y,_,k);case Lo:return y=y.get(_.key===null?S:_.key)||null,u(x,y,_,k);case Wi:var T=_._init;return m(y,x,S,T(_._payload),k)}if(Mc(_)||wc(_))return y=y.get(S)||null,h(x,y,_,k,null);Sd(x,_)}return null}function v(y,x,S,_){for(var k=null,T=null,C=x,P=x=0,j=null;C!==null&&P<S.length;P++){C.index>P?(j=C,C=null):j=C.sibling;var D=p(y,C,S[P],_);if(D===null){C===null&&(C=j);break}n&&C&&D.alternate===null&&e(y,C),x=r(D,x,P),T===null?k=D:T.sibling=D,T=D,C=j}if(P===S.length)return t(y,C),Pe&&Gr(y,P),k;if(C===null){for(;P<S.length;P++)C=d(y,S[P],_),C!==null&&(x=r(C,x,P),T===null?k=C:T.sibling=C,T=C);return Pe&&Gr(y,P),k}for(C=s(y,C);P<S.length;P++)j=m(C,y,P,S[P],_),j!==null&&(n&&j.alternate!==null&&C.delete(j.key===null?P:j.key),x=r(j,x,P),T===null?k=j:T.sibling=j,T=j);return n&&C.forEach(function(M){return e(y,M)}),Pe&&Gr(y,P),k}function w(y,x,S,_){var k=wc(S);if(typeof k!="function")throw Error(I(150));if(S=k.call(S),S==null)throw Error(I(151));for(var T=k=null,C=x,P=x=0,j=null,D=S.next();C!==null&&!D.done;P++,D=S.next()){C.index>P?(j=C,C=null):j=C.sibling;var M=p(y,C,D.value,_);if(M===null){C===null&&(C=j);break}n&&C&&M.alternate===null&&e(y,C),x=r(M,x,P),T===null?k=M:T.sibling=M,T=M,C=j}if(D.done)return t(y,C),Pe&&Gr(y,P),k;if(C===null){for(;!D.done;P++,D=S.next())D=d(y,D.value,_),D!==null&&(x=r(D,x,P),T===null?k=D:T.sibling=D,T=D);return Pe&&Gr(y,P),k}for(C=s(y,C);!D.done;P++,D=S.next())D=m(C,y,P,D.value,_),D!==null&&(n&&D.alternate!==null&&C.delete(D.key===null?P:D.key),x=r(D,x,P),T===null?k=D:T.sibling=D,T=D);return n&&C.forEach(function(J){return e(y,J)}),Pe&&Gr(y,P),k}function E(y,x,S,_){if(typeof S=="object"&&S!==null&&S.type===Mo&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case dd:e:{for(var k=S.key,T=x;T!==null;){if(T.key===k){if(k=S.type,k===Mo){if(T.tag===7){t(y,T.sibling),x=i(T,S.props.children),x.return=y,y=x;break e}}else if(T.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Wi&&Wy(k)===T.type){t(y,T.sibling),x=i(T,S.props),x.ref=Ec(y,T,S),x.return=y,y=x;break e}t(y,T);break}else e(y,T);T=T.sibling}S.type===Mo?(x=oo(S.props.children,y.mode,_,S.key),x.return=y,y=x):(_=Vd(S.type,S.key,S.props,null,y.mode,_),_.ref=Ec(y,x,S),_.return=y,y=_)}return a(y);case Lo:e:{for(T=S.key;x!==null;){if(x.key===T)if(x.tag===4&&x.stateNode.containerInfo===S.containerInfo&&x.stateNode.implementation===S.implementation){t(y,x.sibling),x=i(x,S.children||[]),x.return=y,y=x;break e}else{t(y,x);break}else e(y,x);x=x.sibling}x=Am(S,y.mode,_),x.return=y,y=x}return a(y);case Wi:return T=S._init,E(y,x,T(S._payload),_)}if(Mc(S))return v(y,x,S,_);if(wc(S))return w(y,x,S,_);Sd(y,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,x!==null&&x.tag===6?(t(y,x.sibling),x=i(x,S),x.return=y,y=x):(t(y,x),x=bm(S,y.mode,_),x.return=y,y=x),a(y)):t(y,x)}return E}var uc=sb(!0),ib=sb(!1),Ff=$r(null),Of=null,Ho=null,fv=null;function pv(){fv=Ho=Of=null}function mv(n){var e=Ff.current;ke(Ff),n._currentValue=e}function hg(n,e,t){for(;n!==null;){var s=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),n===t)break;n=n.return}}function Ko(n,e){Of=n,fv=Ho=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(rn=!0),n.firstContext=null)}function qn(n){var e=n._currentValue;if(fv!==n)if(n={context:n,memoizedValue:e,next:null},Ho===null){if(Of===null)throw Error(I(308));Ho=n,Of.dependencies={lanes:0,firstContext:n}}else Ho=Ho.next=n;return e}var ea=null;function gv(n){ea===null?ea=[n]:ea.push(n)}function rb(n,e,t,s){var i=e.interleaved;return i===null?(t.next=t,gv(e)):(t.next=i.next,i.next=t),e.interleaved=t,Di(n,s)}function Di(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Gi=!1;function vv(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ab(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Pi(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Lr(n,e,t){var s=n.updateQueue;if(s===null)return null;if(s=s.shared,he&2){var i=s.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e,Di(n,t)}return i=s.interleaved,i===null?(e.next=e,gv(s)):(e.next=i.next,i.next=e),s.interleaved=e,Di(n,t)}function Od(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,nv(n,t)}}function Gy(n,e){var t=n.updateQueue,s=n.alternate;if(s!==null&&(s=s.updateQueue,t===s)){var i=null,r=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};r===null?i=r=a:r=r.next=a,t=t.next}while(t!==null);r===null?i=r=e:r=r.next=e}else i=r=e;t={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:s.shared,effects:s.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function zf(n,e,t,s){var i=n.updateQueue;Gi=!1;var r=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,u=c.next;c.next=null,a===null?r=u:a.next=u,a=c;var h=n.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=c))}if(r!==null){var d=i.baseState;a=0,h=u=c=null,o=r;do{var p=o.lane,m=o.eventTime;if((s&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=n,w=o;switch(p=e,m=t,w.tag){case 1:if(v=w.payload,typeof v=="function"){d=v.call(m,d,p);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,p=typeof v=="function"?v.call(m,d,p):v,p==null)break e;d=Fe({},d,p);break e;case 2:Gi=!0}}o.callback!==null&&o.lane!==0&&(n.flags|=64,p=i.effects,p===null?i.effects=[o]:p.push(o))}else m={eventTime:m,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(u=h=m,c=d):h=h.next=m,a|=p;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;p=o,o=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else r===null&&(i.shared.lanes=0);ho|=a,n.lanes=a,n.memoizedState=d}}function Xy(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var s=n[e],i=s.callback;if(i!==null){if(s.callback=null,s=t,typeof i!="function")throw Error(I(191,i));i.call(s)}}}var rd={},Gs=$r(rd),xu=$r(rd),bu=$r(rd);function ta(n){if(n===rd)throw Error(I(174));return n}function yv(n,e){switch(Se(bu,e),Se(xu,n),Se(Gs,rd),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Wm(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Wm(e,n)}ke(Gs),Se(Gs,e)}function hc(){ke(Gs),ke(xu),ke(bu)}function ob(n){ta(bu.current);var e=ta(Gs.current),t=Wm(e,n.type);e!==t&&(Se(xu,n),Se(Gs,t))}function wv(n){xu.current===n&&(ke(Gs),ke(xu))}var Ie=$r(0);function Bf(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var mm=[];function xv(){for(var n=0;n<mm.length;n++)mm[n]._workInProgressVersionPrimary=null;mm.length=0}var zd=Hi.ReactCurrentDispatcher,gm=Hi.ReactCurrentBatchConfig,uo=0,De=null,tt=null,ut=null,Hf=!1,su=!1,Au=0,v_=0;function At(){throw Error(I(321))}function bv(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!ws(n[t],e[t]))return!1;return!0}function Av(n,e,t,s,i,r){if(uo=r,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zd.current=n===null||n.memoizedState===null?b_:A_,n=t(s,i),su){r=0;do{if(su=!1,Au=0,25<=r)throw Error(I(301));r+=1,ut=tt=null,e.updateQueue=null,zd.current=S_,n=t(s,i)}while(su)}if(zd.current=Uf,e=tt!==null&&tt.next!==null,uo=0,ut=tt=De=null,Hf=!1,e)throw Error(I(300));return n}function Sv(){var n=Au!==0;return Au=0,n}function ks(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ut===null?De.memoizedState=ut=n:ut=ut.next=n,ut}function Kn(){if(tt===null){var n=De.alternate;n=n!==null?n.memoizedState:null}else n=tt.next;var e=ut===null?De.memoizedState:ut.next;if(e!==null)ut=e,tt=n;else{if(n===null)throw Error(I(310));tt=n,n={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},ut===null?De.memoizedState=ut=n:ut=ut.next=n}return ut}function Su(n,e){return typeof e=="function"?e(n):e}function vm(n){var e=Kn(),t=e.queue;if(t===null)throw Error(I(311));t.lastRenderedReducer=n;var s=tt,i=s.baseQueue,r=t.pending;if(r!==null){if(i!==null){var a=i.next;i.next=r.next,r.next=a}s.baseQueue=i=r,t.pending=null}if(i!==null){r=i.next,s=s.baseState;var o=a=null,c=null,u=r;do{var h=u.lane;if((uo&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:n(s,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=d,a=s):c=c.next=d,De.lanes|=h,ho|=h}u=u.next}while(u!==null&&u!==r);c===null?a=s:c.next=o,ws(s,e.memoizedState)||(rn=!0),e.memoizedState=s,e.baseState=a,e.baseQueue=c,t.lastRenderedState=s}if(n=t.interleaved,n!==null){i=n;do r=i.lane,De.lanes|=r,ho|=r,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function ym(n){var e=Kn(),t=e.queue;if(t===null)throw Error(I(311));t.lastRenderedReducer=n;var s=t.dispatch,i=t.pending,r=e.memoizedState;if(i!==null){t.pending=null;var a=i=i.next;do r=n(r,a.action),a=a.next;while(a!==i);ws(r,e.memoizedState)||(rn=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),t.lastRenderedState=r}return[r,s]}function lb(){}function cb(n,e){var t=De,s=Kn(),i=e(),r=!ws(s.memoizedState,i);if(r&&(s.memoizedState=i,rn=!0),s=s.queue,Ev(db.bind(null,t,s,n),[n]),s.getSnapshot!==e||r||ut!==null&&ut.memoizedState.tag&1){if(t.flags|=2048,Eu(9,hb.bind(null,t,s,i,e),void 0,null),ht===null)throw Error(I(349));uo&30||ub(t,e,i)}return i}function ub(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function hb(n,e,t,s){e.value=t,e.getSnapshot=s,fb(e)&&pb(n)}function db(n,e,t){return t(function(){fb(e)&&pb(n)})}function fb(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!ws(n,t)}catch{return!0}}function pb(n){var e=Di(n,1);e!==null&&ys(e,n,1,-1)}function Yy(n){var e=ks();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Su,lastRenderedState:n},e.queue=n,n=n.dispatch=x_.bind(null,De,n),[e.memoizedState,n]}function Eu(n,e,t,s){return n={tag:n,create:e,destroy:t,deps:s,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(s=t.next,t.next=n,n.next=s,e.lastEffect=n)),n}function mb(){return Kn().memoizedState}function Bd(n,e,t,s){var i=ks();De.flags|=n,i.memoizedState=Eu(1|e,t,void 0,s===void 0?null:s)}function Tp(n,e,t,s){var i=Kn();s=s===void 0?null:s;var r=void 0;if(tt!==null){var a=tt.memoizedState;if(r=a.destroy,s!==null&&bv(s,a.deps)){i.memoizedState=Eu(e,t,r,s);return}}De.flags|=n,i.memoizedState=Eu(1|e,t,r,s)}function qy(n,e){return Bd(8390656,8,n,e)}function Ev(n,e){return Tp(2048,8,n,e)}function gb(n,e){return Tp(4,2,n,e)}function vb(n,e){return Tp(4,4,n,e)}function yb(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function wb(n,e,t){return t=t!=null?t.concat([n]):null,Tp(4,4,yb.bind(null,e,n),t)}function _v(){}function xb(n,e){var t=Kn();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&bv(e,s[1])?s[0]:(t.memoizedState=[n,e],n)}function bb(n,e){var t=Kn();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&bv(e,s[1])?s[0]:(n=n(),t.memoizedState=[n,e],n)}function Ab(n,e,t){return uo&21?(ws(t,e)||(t=Cx(),De.lanes|=t,ho|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,rn=!0),n.memoizedState=t)}function y_(n,e){var t=ve;ve=t!==0&&4>t?t:4,n(!0);var s=gm.transition;gm.transition={};try{n(!1),e()}finally{ve=t,gm.transition=s}}function Sb(){return Kn().memoizedState}function w_(n,e,t){var s=Ir(n);if(t={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null},Eb(n))_b(e,t);else if(t=rb(n,e,t,s),t!==null){var i=Vt();ys(t,n,s,i),kb(t,e,s)}}function x_(n,e,t){var s=Ir(n),i={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null};if(Eb(n))_b(e,i);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var a=e.lastRenderedState,o=r(a,t);if(i.hasEagerState=!0,i.eagerState=o,ws(o,a)){var c=e.interleaved;c===null?(i.next=i,gv(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}t=rb(n,e,i,s),t!==null&&(i=Vt(),ys(t,n,s,i),kb(t,e,s))}}function Eb(n){var e=n.alternate;return n===De||e!==null&&e===De}function _b(n,e){su=Hf=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function kb(n,e,t){if(t&4194240){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,nv(n,t)}}var Uf={readContext:qn,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useInsertionEffect:At,useLayoutEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useMutableSource:At,useSyncExternalStore:At,useId:At,unstable_isNewReconciler:!1},b_={readContext:qn,useCallback:function(n,e){return ks().memoizedState=[n,e===void 0?null:e],n},useContext:qn,useEffect:qy,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Bd(4194308,4,yb.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Bd(4194308,4,n,e)},useInsertionEffect:function(n,e){return Bd(4,2,n,e)},useMemo:function(n,e){var t=ks();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var s=ks();return e=t!==void 0?t(e):e,s.memoizedState=s.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},s.queue=n,n=n.dispatch=w_.bind(null,De,n),[s.memoizedState,n]},useRef:function(n){var e=ks();return n={current:n},e.memoizedState=n},useState:Yy,useDebugValue:_v,useDeferredValue:function(n){return ks().memoizedState=n},useTransition:function(){var n=Yy(!1),e=n[0];return n=y_.bind(null,n[1]),ks().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var s=De,i=ks();if(Pe){if(t===void 0)throw Error(I(407));t=t()}else{if(t=e(),ht===null)throw Error(I(349));uo&30||ub(s,e,t)}i.memoizedState=t;var r={value:t,getSnapshot:e};return i.queue=r,qy(db.bind(null,s,r,n),[n]),s.flags|=2048,Eu(9,hb.bind(null,s,r,t,e),void 0,null),t},useId:function(){var n=ks(),e=ht.identifierPrefix;if(Pe){var t=Ti,s=Ni;t=(s&~(1<<32-vs(s)-1)).toString(32)+t,e=":"+e+"R"+t,t=Au++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=v_++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},A_={readContext:qn,useCallback:xb,useContext:qn,useEffect:Ev,useImperativeHandle:wb,useInsertionEffect:gb,useLayoutEffect:vb,useMemo:bb,useReducer:vm,useRef:mb,useState:function(){return vm(Su)},useDebugValue:_v,useDeferredValue:function(n){var e=Kn();return Ab(e,tt.memoizedState,n)},useTransition:function(){var n=vm(Su)[0],e=Kn().memoizedState;return[n,e]},useMutableSource:lb,useSyncExternalStore:cb,useId:Sb,unstable_isNewReconciler:!1},S_={readContext:qn,useCallback:xb,useContext:qn,useEffect:Ev,useImperativeHandle:wb,useInsertionEffect:gb,useLayoutEffect:vb,useMemo:bb,useReducer:ym,useRef:mb,useState:function(){return ym(Su)},useDebugValue:_v,useDeferredValue:function(n){var e=Kn();return tt===null?e.memoizedState=n:Ab(e,tt.memoizedState,n)},useTransition:function(){var n=ym(Su)[0],e=Kn().memoizedState;return[n,e]},useMutableSource:lb,useSyncExternalStore:cb,useId:Sb,unstable_isNewReconciler:!1};function es(n,e){if(n&&n.defaultProps){e=Fe({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function dg(n,e,t,s){e=n.memoizedState,t=t(s,e),t=t==null?e:Fe({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Pp={isMounted:function(n){return(n=n._reactInternals)?wo(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var s=Vt(),i=Ir(n),r=Pi(s,i);r.payload=e,t!=null&&(r.callback=t),e=Lr(n,r,i),e!==null&&(ys(e,n,i,s),Od(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var s=Vt(),i=Ir(n),r=Pi(s,i);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=Lr(n,r,i),e!==null&&(ys(e,n,i,s),Od(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Vt(),s=Ir(n),i=Pi(t,s);i.tag=2,e!=null&&(i.callback=e),e=Lr(n,i,s),e!==null&&(ys(e,n,s,t),Od(e,n,s))}};function Ky(n,e,t,s,i,r,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(s,r,a):e.prototype&&e.prototype.isPureReactComponent?!gu(t,s)||!gu(i,r):!0}function Cb(n,e,t){var s=!1,i=Or,r=e.contextType;return typeof r=="object"&&r!==null?r=qn(r):(i=on(e)?lo:It.current,s=e.contextTypes,r=(s=s!=null)?lc(n,i):Or),e=new e(t,r),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Pp,n.stateNode=e,e._reactInternals=n,s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=r),e}function Qy(n,e,t,s){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,s),e.state!==n&&Pp.enqueueReplaceState(e,e.state,null)}function fg(n,e,t,s){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},vv(n);var r=e.contextType;typeof r=="object"&&r!==null?i.context=qn(r):(r=on(e)?lo:It.current,i.context=lc(n,r)),i.state=n.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(dg(n,e,r,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Pp.enqueueReplaceState(i,i.state,null),zf(n,t,i,s),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function dc(n,e){try{var t="",s=e;do t+=QS(s),s=s.return;while(s);var i=t}catch(r){i=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:e,stack:i,digest:null}}function wm(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function pg(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var E_=typeof WeakMap=="function"?WeakMap:Map;function Nb(n,e,t){t=Pi(-1,t),t.tag=3,t.payload={element:null};var s=e.value;return t.callback=function(){Vf||(Vf=!0,Eg=s),pg(n,e)},t}function Tb(n,e,t){t=Pi(-1,t),t.tag=3;var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var i=e.value;t.payload=function(){return s(i)},t.callback=function(){pg(n,e)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){pg(n,e),typeof s!="function"&&(Mr===null?Mr=new Set([this]):Mr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function Jy(n,e,t){var s=n.pingCache;if(s===null){s=n.pingCache=new E_;var i=new Set;s.set(e,i)}else i=s.get(e),i===void 0&&(i=new Set,s.set(e,i));i.has(t)||(i.add(t),n=O_.bind(null,n,e,t),e.then(n,n))}function Zy(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function ew(n,e,t,s,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Pi(-1,1),e.tag=2,Lr(t,e,1))),t.lanes|=1),n)}var __=Hi.ReactCurrentOwner,rn=!1;function $t(n,e,t,s){e.child=n===null?ib(e,null,t,s):uc(e,n.child,t,s)}function tw(n,e,t,s,i){t=t.render;var r=e.ref;return Ko(e,i),s=Av(n,e,t,s,r,i),t=Sv(),n!==null&&!rn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Fi(n,e,i)):(Pe&&t&&uv(e),e.flags|=1,$t(n,e,s,i),e.child)}function nw(n,e,t,s,i){if(n===null){var r=t.type;return typeof r=="function"&&!Mv(r)&&r.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=r,Pb(n,e,r,s,i)):(n=Vd(t.type,null,s,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(r=n.child,!(n.lanes&i)){var a=r.memoizedProps;if(t=t.compare,t=t!==null?t:gu,t(a,s)&&n.ref===e.ref)return Fi(n,e,i)}return e.flags|=1,n=jr(r,s),n.ref=e.ref,n.return=e,e.child=n}function Pb(n,e,t,s,i){if(n!==null){var r=n.memoizedProps;if(gu(r,s)&&n.ref===e.ref)if(rn=!1,e.pendingProps=s=r,(n.lanes&i)!==0)n.flags&131072&&(rn=!0);else return e.lanes=n.lanes,Fi(n,e,i)}return mg(n,e,t,s,i)}function Rb(n,e,t){var s=e.pendingProps,i=s.children,r=n!==null?n.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se($o,Sn),Sn|=t;else{if(!(t&1073741824))return n=r!==null?r.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Se($o,Sn),Sn|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=r!==null?r.baseLanes:t,Se($o,Sn),Sn|=s}else r!==null?(s=r.baseLanes|t,e.memoizedState=null):s=t,Se($o,Sn),Sn|=s;return $t(n,e,i,t),e.child}function Lb(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function mg(n,e,t,s,i){var r=on(t)?lo:It.current;return r=lc(e,r),Ko(e,i),t=Av(n,e,t,s,r,i),s=Sv(),n!==null&&!rn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Fi(n,e,i)):(Pe&&s&&uv(e),e.flags|=1,$t(n,e,t,i),e.child)}function sw(n,e,t,s,i){if(on(t)){var r=!0;If(e)}else r=!1;if(Ko(e,i),e.stateNode===null)Hd(n,e),Cb(e,t,s),fg(e,t,s,i),s=!0;else if(n===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var c=a.context,u=t.contextType;typeof u=="object"&&u!==null?u=qn(u):(u=on(t)?lo:It.current,u=lc(e,u));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==s||c!==u)&&Qy(e,a,s,u),Gi=!1;var p=e.memoizedState;a.state=p,zf(e,s,a,i),c=e.memoizedState,o!==s||p!==c||an.current||Gi?(typeof h=="function"&&(dg(e,t,h,s),c=e.memoizedState),(o=Gi||Ky(e,t,o,s,p,c,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),a.props=s,a.state=c,a.context=u,s=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{a=e.stateNode,ab(n,e),o=e.memoizedProps,u=e.type===e.elementType?o:es(e.type,o),a.props=u,d=e.pendingProps,p=a.context,c=t.contextType,typeof c=="object"&&c!==null?c=qn(c):(c=on(t)?lo:It.current,c=lc(e,c));var m=t.getDerivedStateFromProps;(h=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||p!==c)&&Qy(e,a,s,c),Gi=!1,p=e.memoizedState,a.state=p,zf(e,s,a,i);var v=e.memoizedState;o!==d||p!==v||an.current||Gi?(typeof m=="function"&&(dg(e,t,m,s),v=e.memoizedState),(u=Gi||Ky(e,t,u,s,p,v,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(s,v,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(s,v,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=v),a.props=s,a.state=v,a.context=c,s=u):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),s=!1)}return gg(n,e,t,s,r,i)}function gg(n,e,t,s,i,r){Lb(n,e);var a=(e.flags&128)!==0;if(!s&&!a)return i&&Uy(e,t,!1),Fi(n,e,r);s=e.stateNode,__.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,n!==null&&a?(e.child=uc(e,n.child,null,r),e.child=uc(e,null,o,r)):$t(n,e,o,r),e.memoizedState=s.state,i&&Uy(e,t,!0),e.child}function Mb(n){var e=n.stateNode;e.pendingContext?Hy(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Hy(n,e.context,!1),yv(n,e.containerInfo)}function iw(n,e,t,s,i){return cc(),dv(i),e.flags|=256,$t(n,e,t,s),e.child}var vg={dehydrated:null,treeContext:null,retryLane:0};function yg(n){return{baseLanes:n,cachePool:null,transitions:null}}function Ib(n,e,t){var s=e.pendingProps,i=Ie.current,r=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=n!==null&&n.memoizedState===null?!1:(i&2)!==0),o?(r=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Se(Ie,i&1),n===null)return ug(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=s.children,n=s.fallback,r?(s=e.mode,r=e.child,a={mode:"hidden",children:a},!(s&1)&&r!==null?(r.childLanes=0,r.pendingProps=a):r=Mp(a,s,0,null),n=oo(n,s,t,null),r.return=e,n.return=e,r.sibling=n,e.child=r,e.child.memoizedState=yg(t),e.memoizedState=vg,n):kv(e,a));if(i=n.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return k_(n,e,a,s,o,i,t);if(r){r=s.fallback,a=e.mode,i=n.child,o=i.sibling;var c={mode:"hidden",children:s.children};return!(a&1)&&e.child!==i?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=jr(i,c),s.subtreeFlags=i.subtreeFlags&14680064),o!==null?r=jr(o,r):(r=oo(r,a,t,null),r.flags|=2),r.return=e,s.return=e,s.sibling=r,e.child=s,s=r,r=e.child,a=n.child.memoizedState,a=a===null?yg(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},r.memoizedState=a,r.childLanes=n.childLanes&~t,e.memoizedState=vg,s}return r=n.child,n=r.sibling,s=jr(r,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=t),s.return=e,s.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=s,e.memoizedState=null,s}function kv(n,e){return e=Mp({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Ed(n,e,t,s){return s!==null&&dv(s),uc(e,n.child,null,t),n=kv(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function k_(n,e,t,s,i,r,a){if(t)return e.flags&256?(e.flags&=-257,s=wm(Error(I(422))),Ed(n,e,a,s)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(r=s.fallback,i=e.mode,s=Mp({mode:"visible",children:s.children},i,0,null),r=oo(r,i,a,null),r.flags|=2,s.return=e,r.return=e,s.sibling=r,e.child=s,e.mode&1&&uc(e,n.child,null,a),e.child.memoizedState=yg(a),e.memoizedState=vg,r);if(!(e.mode&1))return Ed(n,e,a,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var o=s.dgst;return s=o,r=Error(I(419)),s=wm(r,s,void 0),Ed(n,e,a,s)}if(o=(a&n.childLanes)!==0,rn||o){if(s=ht,s!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|a)?0:i,i!==0&&i!==r.retryLane&&(r.retryLane=i,Di(n,i),ys(s,n,i,-1))}return Lv(),s=wm(Error(I(421))),Ed(n,e,a,s)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=z_.bind(null,n),i._reactRetry=e,null):(n=r.treeContext,kn=Rr(i.nextSibling),Cn=e,Pe=!0,ms=null,n!==null&&(Un[$n++]=Ni,Un[$n++]=Ti,Un[$n++]=co,Ni=n.id,Ti=n.overflow,co=e),e=kv(e,s.children),e.flags|=4096,e)}function rw(n,e,t){n.lanes|=e;var s=n.alternate;s!==null&&(s.lanes|=e),hg(n.return,e,t)}function xm(n,e,t,s,i){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:t,tailMode:i}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=s,r.tail=t,r.tailMode=i)}function jb(n,e,t){var s=e.pendingProps,i=s.revealOrder,r=s.tail;if($t(n,e,s.children,t),s=Ie.current,s&2)s=s&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&rw(n,t,e);else if(n.tag===19)rw(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}s&=1}if(Se(Ie,s),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&Bf(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),xm(e,!1,i,t,r);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&Bf(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}xm(e,!0,t,null,r);break;case"together":xm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Hd(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Fi(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),ho|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(I(153));if(e.child!==null){for(n=e.child,t=jr(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=jr(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function C_(n,e,t){switch(e.tag){case 3:Mb(e),cc();break;case 5:ob(e);break;case 1:on(e.type)&&If(e);break;case 4:yv(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,i=e.memoizedProps.value;Se(Ff,s._currentValue),s._currentValue=i;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(Se(Ie,Ie.current&1),e.flags|=128,null):t&e.child.childLanes?Ib(n,e,t):(Se(Ie,Ie.current&1),n=Fi(n,e,t),n!==null?n.sibling:null);Se(Ie,Ie.current&1);break;case 19:if(s=(t&e.childLanes)!==0,n.flags&128){if(s)return jb(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Se(Ie,Ie.current),s)break;return null;case 22:case 23:return e.lanes=0,Rb(n,e,t)}return Fi(n,e,t)}var Db,wg,Fb,Ob;Db=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};wg=function(){};Fb=function(n,e,t,s){var i=n.memoizedProps;if(i!==s){n=e.stateNode,ta(Gs.current);var r=null;switch(t){case"input":i=Hm(n,i),s=Hm(n,s),r=[];break;case"select":i=Fe({},i,{value:void 0}),s=Fe({},s,{value:void 0}),r=[];break;case"textarea":i=Vm(n,i),s=Vm(n,s),r=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(n.onclick=Lf)}Gm(t,s);var a;t=null;for(u in i)if(!s.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(cu.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in s){var c=s[u];if(o=i!=null?i[u]:void 0,s.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(t||(t={}),t[a]=c[a])}else t||(r||(r=[]),r.push(u,t)),t=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(r=r||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(r=r||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(cu.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ee("scroll",n),r||o===c||(r=[])):(r=r||[]).push(u,c))}t&&(r=r||[]).push("style",t);var u=r;(e.updateQueue=u)&&(e.flags|=4)}};Ob=function(n,e,t,s){t!==s&&(e.flags|=4)};function _c(n,e){if(!Pe)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:s.sibling=null}}function St(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,s=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=s,n.childLanes=t,e}function N_(n,e,t){var s=e.pendingProps;switch(hv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(e),null;case 1:return on(e.type)&&Mf(),St(e),null;case 3:return s=e.stateNode,hc(),ke(an),ke(It),xv(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(n===null||n.child===null)&&(Ad(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ms!==null&&(Cg(ms),ms=null))),wg(n,e),St(e),null;case 5:wv(e);var i=ta(bu.current);if(t=e.type,n!==null&&e.stateNode!=null)Fb(n,e,t,s,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(I(166));return St(e),null}if(n=ta(Gs.current),Ad(e)){s=e.stateNode,t=e.type;var r=e.memoizedProps;switch(s[Vs]=e,s[wu]=r,n=(e.mode&1)!==0,t){case"dialog":Ee("cancel",s),Ee("close",s);break;case"iframe":case"object":case"embed":Ee("load",s);break;case"video":case"audio":for(i=0;i<jc.length;i++)Ee(jc[i],s);break;case"source":Ee("error",s);break;case"img":case"image":case"link":Ee("error",s),Ee("load",s);break;case"details":Ee("toggle",s);break;case"input":py(s,r),Ee("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!r.multiple},Ee("invalid",s);break;case"textarea":gy(s,r),Ee("invalid",s)}Gm(t,r),i=null;for(var a in r)if(r.hasOwnProperty(a)){var o=r[a];a==="children"?typeof o=="string"?s.textContent!==o&&(r.suppressHydrationWarning!==!0&&bd(s.textContent,o,n),i=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(r.suppressHydrationWarning!==!0&&bd(s.textContent,o,n),i=["children",""+o]):cu.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Ee("scroll",s)}switch(t){case"input":fd(s),my(s,r,!0);break;case"textarea":fd(s),vy(s);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(s.onclick=Lf)}s=i,e.updateQueue=s,s!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=dx(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof s.is=="string"?n=a.createElement(t,{is:s.is}):(n=a.createElement(t),t==="select"&&(a=n,s.multiple?a.multiple=!0:s.size&&(a.size=s.size))):n=a.createElementNS(n,t),n[Vs]=e,n[wu]=s,Db(n,e,!1,!1),e.stateNode=n;e:{switch(a=Xm(t,s),t){case"dialog":Ee("cancel",n),Ee("close",n),i=s;break;case"iframe":case"object":case"embed":Ee("load",n),i=s;break;case"video":case"audio":for(i=0;i<jc.length;i++)Ee(jc[i],n);i=s;break;case"source":Ee("error",n),i=s;break;case"img":case"image":case"link":Ee("error",n),Ee("load",n),i=s;break;case"details":Ee("toggle",n),i=s;break;case"input":py(n,s),i=Hm(n,s),Ee("invalid",n);break;case"option":i=s;break;case"select":n._wrapperState={wasMultiple:!!s.multiple},i=Fe({},s,{value:void 0}),Ee("invalid",n);break;case"textarea":gy(n,s),i=Vm(n,s),Ee("invalid",n);break;default:i=s}Gm(t,i),o=i;for(r in o)if(o.hasOwnProperty(r)){var c=o[r];r==="style"?mx(n,c):r==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&fx(n,c)):r==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&uu(n,c):typeof c=="number"&&uu(n,""+c):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(cu.hasOwnProperty(r)?c!=null&&r==="onScroll"&&Ee("scroll",n):c!=null&&K0(n,r,c,a))}switch(t){case"input":fd(n),my(n,s,!1);break;case"textarea":fd(n),vy(n);break;case"option":s.value!=null&&n.setAttribute("value",""+Fr(s.value));break;case"select":n.multiple=!!s.multiple,r=s.value,r!=null?Go(n,!!s.multiple,r,!1):s.defaultValue!=null&&Go(n,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Lf)}switch(t){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return St(e),null;case 6:if(n&&e.stateNode!=null)Ob(n,e,n.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(I(166));if(t=ta(bu.current),ta(Gs.current),Ad(e)){if(s=e.stateNode,t=e.memoizedProps,s[Vs]=e,(r=s.nodeValue!==t)&&(n=Cn,n!==null))switch(n.tag){case 3:bd(s.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&bd(s.nodeValue,t,(n.mode&1)!==0)}r&&(e.flags|=4)}else s=(t.nodeType===9?t:t.ownerDocument).createTextNode(s),s[Vs]=e,e.stateNode=s}return St(e),null;case 13:if(ke(Ie),s=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Pe&&kn!==null&&e.mode&1&&!(e.flags&128))nb(),cc(),e.flags|=98560,r=!1;else if(r=Ad(e),s!==null&&s.dehydrated!==null){if(n===null){if(!r)throw Error(I(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(I(317));r[Vs]=e}else cc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;St(e),r=!1}else ms!==null&&(Cg(ms),ms=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(s=s!==null,s!==(n!==null&&n.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(n===null||Ie.current&1?nt===0&&(nt=3):Lv())),e.updateQueue!==null&&(e.flags|=4),St(e),null);case 4:return hc(),wg(n,e),n===null&&vu(e.stateNode.containerInfo),St(e),null;case 10:return mv(e.type._context),St(e),null;case 17:return on(e.type)&&Mf(),St(e),null;case 19:if(ke(Ie),r=e.memoizedState,r===null)return St(e),null;if(s=(e.flags&128)!==0,a=r.rendering,a===null)if(s)_c(r,!1);else{if(nt!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=Bf(n),a!==null){for(e.flags|=128,_c(r,!1),s=a.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=t,t=e.child;t!==null;)r=t,n=s,r.flags&=14680066,a=r.alternate,a===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=a.childLanes,r.lanes=a.lanes,r.child=a.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=a.memoizedProps,r.memoizedState=a.memoizedState,r.updateQueue=a.updateQueue,r.type=a.type,n=a.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Se(Ie,Ie.current&1|2),e.child}n=n.sibling}r.tail!==null&&$e()>fc&&(e.flags|=128,s=!0,_c(r,!1),e.lanes=4194304)}else{if(!s)if(n=Bf(a),n!==null){if(e.flags|=128,s=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),_c(r,!0),r.tail===null&&r.tailMode==="hidden"&&!a.alternate&&!Pe)return St(e),null}else 2*$e()-r.renderingStartTime>fc&&t!==1073741824&&(e.flags|=128,s=!0,_c(r,!1),e.lanes=4194304);r.isBackwards?(a.sibling=e.child,e.child=a):(t=r.last,t!==null?t.sibling=a:e.child=a,r.last=a)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=$e(),e.sibling=null,t=Ie.current,Se(Ie,s?t&1|2:t&1),e):(St(e),null);case 22:case 23:return Rv(),s=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?Sn&1073741824&&(St(e),e.subtreeFlags&6&&(e.flags|=8192)):St(e),null;case 24:return null;case 25:return null}throw Error(I(156,e.tag))}function T_(n,e){switch(hv(e),e.tag){case 1:return on(e.type)&&Mf(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return hc(),ke(an),ke(It),xv(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return wv(e),null;case 13:if(ke(Ie),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(I(340));cc()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return ke(Ie),null;case 4:return hc(),null;case 10:return mv(e.type._context),null;case 22:case 23:return Rv(),null;case 24:return null;default:return null}}var _d=!1,Lt=!1,P_=typeof WeakSet=="function"?WeakSet:Set,H=null;function Uo(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(s){Be(n,e,s)}else t.current=null}function xg(n,e,t){try{t()}catch(s){Be(n,e,s)}}var aw=!1;function R_(n,e){if(sg=Tf,n=$x(),cv(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var s=t.getSelection&&t.getSelection();if(s&&s.rangeCount!==0){t=s.anchorNode;var i=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{t.nodeType,r.nodeType}catch{t=null;break e}var a=0,o=-1,c=-1,u=0,h=0,d=n,p=null;t:for(;;){for(var m;d!==t||i!==0&&d.nodeType!==3||(o=a+i),d!==r||s!==0&&d.nodeType!==3||(c=a+s),d.nodeType===3&&(a+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===n)break t;if(p===t&&++u===i&&(o=a),p===r&&++h===s&&(c=a),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}t=o===-1||c===-1?null:{start:o,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(ig={focusedElem:n,selectionRange:t},Tf=!1,H=e;H!==null;)if(e=H,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,H=n;else for(;H!==null;){e=H;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,E=v.memoizedState,y=e.stateNode,x=y.getSnapshotBeforeUpdate(e.elementType===e.type?w:es(e.type,w),E);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(I(163))}}catch(_){Be(e,e.return,_)}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}return v=aw,aw=!1,v}function iu(n,e,t){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&n)===n){var r=i.destroy;i.destroy=void 0,r!==void 0&&xg(e,t,r)}i=i.next}while(i!==s)}}function Rp(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var s=t.create;t.destroy=s()}t=t.next}while(t!==e)}}function bg(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function zb(n){var e=n.alternate;e!==null&&(n.alternate=null,zb(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Vs],delete e[wu],delete e[og],delete e[f_],delete e[p_])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Bb(n){return n.tag===5||n.tag===3||n.tag===4}function ow(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Bb(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ag(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Lf));else if(s!==4&&(n=n.child,n!==null))for(Ag(n,e,t),n=n.sibling;n!==null;)Ag(n,e,t),n=n.sibling}function Sg(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(s!==4&&(n=n.child,n!==null))for(Sg(n,e,t),n=n.sibling;n!==null;)Sg(n,e,t),n=n.sibling}var yt=null,ps=!1;function Ui(n,e,t){for(t=t.child;t!==null;)Hb(n,e,t),t=t.sibling}function Hb(n,e,t){if(Ws&&typeof Ws.onCommitFiberUnmount=="function")try{Ws.onCommitFiberUnmount(Sp,t)}catch{}switch(t.tag){case 5:Lt||Uo(t,e);case 6:var s=yt,i=ps;yt=null,Ui(n,e,t),yt=s,ps=i,yt!==null&&(ps?(n=yt,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):yt.removeChild(t.stateNode));break;case 18:yt!==null&&(ps?(n=yt,t=t.stateNode,n.nodeType===8?fm(n.parentNode,t):n.nodeType===1&&fm(n,t),pu(n)):fm(yt,t.stateNode));break;case 4:s=yt,i=ps,yt=t.stateNode.containerInfo,ps=!0,Ui(n,e,t),yt=s,ps=i;break;case 0:case 11:case 14:case 15:if(!Lt&&(s=t.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var r=i,a=r.destroy;r=r.tag,a!==void 0&&(r&2||r&4)&&xg(t,e,a),i=i.next}while(i!==s)}Ui(n,e,t);break;case 1:if(!Lt&&(Uo(t,e),s=t.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=t.memoizedProps,s.state=t.memoizedState,s.componentWillUnmount()}catch(o){Be(t,e,o)}Ui(n,e,t);break;case 21:Ui(n,e,t);break;case 22:t.mode&1?(Lt=(s=Lt)||t.memoizedState!==null,Ui(n,e,t),Lt=s):Ui(n,e,t);break;default:Ui(n,e,t)}}function lw(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new P_),e.forEach(function(s){var i=B_.bind(null,n,s);t.has(s)||(t.add(s),s.then(i,i))})}}function Jn(n,e){var t=e.deletions;if(t!==null)for(var s=0;s<t.length;s++){var i=t[s];try{var r=n,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:yt=o.stateNode,ps=!1;break e;case 3:yt=o.stateNode.containerInfo,ps=!0;break e;case 4:yt=o.stateNode.containerInfo,ps=!0;break e}o=o.return}if(yt===null)throw Error(I(160));Hb(r,a,i),yt=null,ps=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){Be(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ub(e,n),e=e.sibling}function Ub(n,e){var t=n.alternate,s=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Jn(e,n),As(n),s&4){try{iu(3,n,n.return),Rp(3,n)}catch(w){Be(n,n.return,w)}try{iu(5,n,n.return)}catch(w){Be(n,n.return,w)}}break;case 1:Jn(e,n),As(n),s&512&&t!==null&&Uo(t,t.return);break;case 5:if(Jn(e,n),As(n),s&512&&t!==null&&Uo(t,t.return),n.flags&32){var i=n.stateNode;try{uu(i,"")}catch(w){Be(n,n.return,w)}}if(s&4&&(i=n.stateNode,i!=null)){var r=n.memoizedProps,a=t!==null?t.memoizedProps:r,o=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{o==="input"&&r.type==="radio"&&r.name!=null&&ux(i,r),Xm(o,a);var u=Xm(o,r);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];h==="style"?mx(i,d):h==="dangerouslySetInnerHTML"?fx(i,d):h==="children"?uu(i,d):K0(i,h,d,u)}switch(o){case"input":Um(i,r);break;case"textarea":hx(i,r);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!r.multiple;var m=r.value;m!=null?Go(i,!!r.multiple,m,!1):p!==!!r.multiple&&(r.defaultValue!=null?Go(i,!!r.multiple,r.defaultValue,!0):Go(i,!!r.multiple,r.multiple?[]:"",!1))}i[wu]=r}catch(w){Be(n,n.return,w)}}break;case 6:if(Jn(e,n),As(n),s&4){if(n.stateNode===null)throw Error(I(162));i=n.stateNode,r=n.memoizedProps;try{i.nodeValue=r}catch(w){Be(n,n.return,w)}}break;case 3:if(Jn(e,n),As(n),s&4&&t!==null&&t.memoizedState.isDehydrated)try{pu(e.containerInfo)}catch(w){Be(n,n.return,w)}break;case 4:Jn(e,n),As(n);break;case 13:Jn(e,n),As(n),i=n.child,i.flags&8192&&(r=i.memoizedState!==null,i.stateNode.isHidden=r,!r||i.alternate!==null&&i.alternate.memoizedState!==null||(Tv=$e())),s&4&&lw(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(Lt=(u=Lt)||h,Jn(e,n),Lt=u):Jn(e,n),As(n),s&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(H=n,h=n.child;h!==null;){for(d=H=h;H!==null;){switch(p=H,m=p.child,p.tag){case 0:case 11:case 14:case 15:iu(4,p,p.return);break;case 1:Uo(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){s=p,t=p.return;try{e=s,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(w){Be(s,t,w)}}break;case 5:Uo(p,p.return);break;case 22:if(p.memoizedState!==null){uw(d);continue}}m!==null?(m.return=p,H=m):uw(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,u?(r=i.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(o=d.stateNode,c=d.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=px("display",a))}catch(w){Be(n,n.return,w)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(w){Be(n,n.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Jn(e,n),As(n),s&4&&lw(n);break;case 21:break;default:Jn(e,n),As(n)}}function As(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(Bb(t)){var s=t;break e}t=t.return}throw Error(I(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(uu(i,""),s.flags&=-33);var r=ow(n);Sg(n,r,i);break;case 3:case 4:var a=s.stateNode.containerInfo,o=ow(n);Ag(n,o,a);break;default:throw Error(I(161))}}catch(c){Be(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function L_(n,e,t){H=n,$b(n)}function $b(n,e,t){for(var s=(n.mode&1)!==0;H!==null;){var i=H,r=i.child;if(i.tag===22&&s){var a=i.memoizedState!==null||_d;if(!a){var o=i.alternate,c=o!==null&&o.memoizedState!==null||Lt;o=_d;var u=Lt;if(_d=a,(Lt=c)&&!u)for(H=i;H!==null;)a=H,c=a.child,a.tag===22&&a.memoizedState!==null?hw(i):c!==null?(c.return=a,H=c):hw(i);for(;r!==null;)H=r,$b(r),r=r.sibling;H=i,_d=o,Lt=u}cw(n)}else i.subtreeFlags&8772&&r!==null?(r.return=i,H=r):cw(n)}}function cw(n){for(;H!==null;){var e=H;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Lt||Rp(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Lt)if(t===null)s.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:es(e.type,t.memoizedProps);s.componentDidUpdate(i,t.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&Xy(e,r,s);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Xy(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&pu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(I(163))}Lt||e.flags&512&&bg(e)}catch(p){Be(e,e.return,p)}}if(e===n){H=null;break}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}}function uw(n){for(;H!==null;){var e=H;if(e===n){H=null;break}var t=e.sibling;if(t!==null){t.return=e.return,H=t;break}H=e.return}}function hw(n){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Rp(4,e)}catch(c){Be(e,t,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var i=e.return;try{s.componentDidMount()}catch(c){Be(e,i,c)}}var r=e.return;try{bg(e)}catch(c){Be(e,r,c)}break;case 5:var a=e.return;try{bg(e)}catch(c){Be(e,a,c)}}}catch(c){Be(e,e.return,c)}if(e===n){H=null;break}var o=e.sibling;if(o!==null){o.return=e.return,H=o;break}H=e.return}}var M_=Math.ceil,$f=Hi.ReactCurrentDispatcher,Cv=Hi.ReactCurrentOwner,Xn=Hi.ReactCurrentBatchConfig,he=0,ht=null,Xe=null,xt=0,Sn=0,$o=$r(0),nt=0,_u=null,ho=0,Lp=0,Nv=0,ru=null,sn=null,Tv=0,fc=1/0,Js=null,Vf=!1,Eg=null,Mr=null,kd=!1,Cr=null,Wf=0,au=0,_g=null,Ud=-1,$d=0;function Vt(){return he&6?$e():Ud!==-1?Ud:Ud=$e()}function Ir(n){return n.mode&1?he&2&&xt!==0?xt&-xt:g_.transition!==null?($d===0&&($d=Cx()),$d):(n=ve,n!==0||(n=window.event,n=n===void 0?16:Ix(n.type)),n):1}function ys(n,e,t,s){if(50<au)throw au=0,_g=null,Error(I(185));nd(n,t,s),(!(he&2)||n!==ht)&&(n===ht&&(!(he&2)&&(Lp|=t),nt===4&&Yi(n,xt)),ln(n,s),t===1&&he===0&&!(e.mode&1)&&(fc=$e()+500,Np&&Vr()))}function ln(n,e){var t=n.callbackNode;gE(n,e);var s=Nf(n,n===ht?xt:0);if(s===0)t!==null&&xy(t),n.callbackNode=null,n.callbackPriority=0;else if(e=s&-s,n.callbackPriority!==e){if(t!=null&&xy(t),e===1)n.tag===0?m_(dw.bind(null,n)):Zx(dw.bind(null,n)),h_(function(){!(he&6)&&Vr()}),t=null;else{switch(Nx(s)){case 1:t=tv;break;case 4:t=_x;break;case 16:t=Cf;break;case 536870912:t=kx;break;default:t=Cf}t=Qb(t,Vb.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function Vb(n,e){if(Ud=-1,$d=0,he&6)throw Error(I(327));var t=n.callbackNode;if(Qo()&&n.callbackNode!==t)return null;var s=Nf(n,n===ht?xt:0);if(s===0)return null;if(s&30||s&n.expiredLanes||e)e=Gf(n,s);else{e=s;var i=he;he|=2;var r=Gb();(ht!==n||xt!==e)&&(Js=null,fc=$e()+500,ao(n,e));do try{D_();break}catch(o){Wb(n,o)}while(!0);pv(),$f.current=r,he=i,Xe!==null?e=0:(ht=null,xt=0,e=nt)}if(e!==0){if(e===2&&(i=Jm(n),i!==0&&(s=i,e=kg(n,i))),e===1)throw t=_u,ao(n,0),Yi(n,s),ln(n,$e()),t;if(e===6)Yi(n,s);else{if(i=n.current.alternate,!(s&30)&&!I_(i)&&(e=Gf(n,s),e===2&&(r=Jm(n),r!==0&&(s=r,e=kg(n,r))),e===1))throw t=_u,ao(n,0),Yi(n,s),ln(n,$e()),t;switch(n.finishedWork=i,n.finishedLanes=s,e){case 0:case 1:throw Error(I(345));case 2:Xr(n,sn,Js);break;case 3:if(Yi(n,s),(s&130023424)===s&&(e=Tv+500-$e(),10<e)){if(Nf(n,0)!==0)break;if(i=n.suspendedLanes,(i&s)!==s){Vt(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=ag(Xr.bind(null,n,sn,Js),e);break}Xr(n,sn,Js);break;case 4:if(Yi(n,s),(s&4194240)===s)break;for(e=n.eventTimes,i=-1;0<s;){var a=31-vs(s);r=1<<a,a=e[a],a>i&&(i=a),s&=~r}if(s=i,s=$e()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*M_(s/1960))-s,10<s){n.timeoutHandle=ag(Xr.bind(null,n,sn,Js),s);break}Xr(n,sn,Js);break;case 5:Xr(n,sn,Js);break;default:throw Error(I(329))}}}return ln(n,$e()),n.callbackNode===t?Vb.bind(null,n):null}function kg(n,e){var t=ru;return n.current.memoizedState.isDehydrated&&(ao(n,e).flags|=256),n=Gf(n,e),n!==2&&(e=sn,sn=t,e!==null&&Cg(e)),n}function Cg(n){sn===null?sn=n:sn.push.apply(sn,n)}function I_(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var s=0;s<t.length;s++){var i=t[s],r=i.getSnapshot;i=i.value;try{if(!ws(r(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yi(n,e){for(e&=~Nv,e&=~Lp,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-vs(e),s=1<<t;n[t]=-1,e&=~s}}function dw(n){if(he&6)throw Error(I(327));Qo();var e=Nf(n,0);if(!(e&1))return ln(n,$e()),null;var t=Gf(n,e);if(n.tag!==0&&t===2){var s=Jm(n);s!==0&&(e=s,t=kg(n,s))}if(t===1)throw t=_u,ao(n,0),Yi(n,e),ln(n,$e()),t;if(t===6)throw Error(I(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Xr(n,sn,Js),ln(n,$e()),null}function Pv(n,e){var t=he;he|=1;try{return n(e)}finally{he=t,he===0&&(fc=$e()+500,Np&&Vr())}}function fo(n){Cr!==null&&Cr.tag===0&&!(he&6)&&Qo();var e=he;he|=1;var t=Xn.transition,s=ve;try{if(Xn.transition=null,ve=1,n)return n()}finally{ve=s,Xn.transition=t,he=e,!(he&6)&&Vr()}}function Rv(){Sn=$o.current,ke($o)}function ao(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,u_(t)),Xe!==null)for(t=Xe.return;t!==null;){var s=t;switch(hv(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Mf();break;case 3:hc(),ke(an),ke(It),xv();break;case 5:wv(s);break;case 4:hc();break;case 13:ke(Ie);break;case 19:ke(Ie);break;case 10:mv(s.type._context);break;case 22:case 23:Rv()}t=t.return}if(ht=n,Xe=n=jr(n.current,null),xt=Sn=e,nt=0,_u=null,Nv=Lp=ho=0,sn=ru=null,ea!==null){for(e=0;e<ea.length;e++)if(t=ea[e],s=t.interleaved,s!==null){t.interleaved=null;var i=s.next,r=t.pending;if(r!==null){var a=r.next;r.next=i,s.next=a}t.pending=s}ea=null}return n}function Wb(n,e){do{var t=Xe;try{if(pv(),zd.current=Uf,Hf){for(var s=De.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}Hf=!1}if(uo=0,ut=tt=De=null,su=!1,Au=0,Cv.current=null,t===null||t.return===null){nt=1,_u=e,Xe=null;break}e:{var r=n,a=t.return,o=t,c=e;if(e=xt,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=o,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=Zy(a);if(m!==null){m.flags&=-257,ew(m,a,o,r,e),m.mode&1&&Jy(r,u,e),e=m,c=u;var v=e.updateQueue;if(v===null){var w=new Set;w.add(c),e.updateQueue=w}else v.add(c);break e}else{if(!(e&1)){Jy(r,u,e),Lv();break e}c=Error(I(426))}}else if(Pe&&o.mode&1){var E=Zy(a);if(E!==null){!(E.flags&65536)&&(E.flags|=256),ew(E,a,o,r,e),dv(dc(c,o));break e}}r=c=dc(c,o),nt!==4&&(nt=2),ru===null?ru=[r]:ru.push(r),r=a;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var y=Nb(r,c,e);Gy(r,y);break e;case 1:o=c;var x=r.type,S=r.stateNode;if(!(r.flags&128)&&(typeof x.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Mr===null||!Mr.has(S)))){r.flags|=65536,e&=-e,r.lanes|=e;var _=Tb(r,o,e);Gy(r,_);break e}}r=r.return}while(r!==null)}Yb(t)}catch(k){e=k,Xe===t&&t!==null&&(Xe=t=t.return);continue}break}while(!0)}function Gb(){var n=$f.current;return $f.current=Uf,n===null?Uf:n}function Lv(){(nt===0||nt===3||nt===2)&&(nt=4),ht===null||!(ho&268435455)&&!(Lp&268435455)||Yi(ht,xt)}function Gf(n,e){var t=he;he|=2;var s=Gb();(ht!==n||xt!==e)&&(Js=null,ao(n,e));do try{j_();break}catch(i){Wb(n,i)}while(!0);if(pv(),he=t,$f.current=s,Xe!==null)throw Error(I(261));return ht=null,xt=0,nt}function j_(){for(;Xe!==null;)Xb(Xe)}function D_(){for(;Xe!==null&&!oE();)Xb(Xe)}function Xb(n){var e=Kb(n.alternate,n,Sn);n.memoizedProps=n.pendingProps,e===null?Yb(n):Xe=e,Cv.current=null}function Yb(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=T_(t,e),t!==null){t.flags&=32767,Xe=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{nt=6,Xe=null;return}}else if(t=N_(t,e,Sn),t!==null){Xe=t;return}if(e=e.sibling,e!==null){Xe=e;return}Xe=e=n}while(e!==null);nt===0&&(nt=5)}function Xr(n,e,t){var s=ve,i=Xn.transition;try{Xn.transition=null,ve=1,F_(n,e,t,s)}finally{Xn.transition=i,ve=s}return null}function F_(n,e,t,s){do Qo();while(Cr!==null);if(he&6)throw Error(I(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(I(177));n.callbackNode=null,n.callbackPriority=0;var r=t.lanes|t.childLanes;if(vE(n,r),n===ht&&(Xe=ht=null,xt=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||kd||(kd=!0,Qb(Cf,function(){return Qo(),null})),r=(t.flags&15990)!==0,t.subtreeFlags&15990||r){r=Xn.transition,Xn.transition=null;var a=ve;ve=1;var o=he;he|=4,Cv.current=null,R_(n,t),Ub(t,n),s_(ig),Tf=!!sg,ig=sg=null,n.current=t,L_(t),lE(),he=o,ve=a,Xn.transition=r}else n.current=t;if(kd&&(kd=!1,Cr=n,Wf=i),r=n.pendingLanes,r===0&&(Mr=null),hE(t.stateNode),ln(n,$e()),e!==null)for(s=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],s(i.value,{componentStack:i.stack,digest:i.digest});if(Vf)throw Vf=!1,n=Eg,Eg=null,n;return Wf&1&&n.tag!==0&&Qo(),r=n.pendingLanes,r&1?n===_g?au++:(au=0,_g=n):au=0,Vr(),null}function Qo(){if(Cr!==null){var n=Nx(Wf),e=Xn.transition,t=ve;try{if(Xn.transition=null,ve=16>n?16:n,Cr===null)var s=!1;else{if(n=Cr,Cr=null,Wf=0,he&6)throw Error(I(331));var i=he;for(he|=4,H=n.current;H!==null;){var r=H,a=r.child;if(H.flags&16){var o=r.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(H=u;H!==null;){var h=H;switch(h.tag){case 0:case 11:case 15:iu(8,h,r)}var d=h.child;if(d!==null)d.return=h,H=d;else for(;H!==null;){h=H;var p=h.sibling,m=h.return;if(zb(h),h===u){H=null;break}if(p!==null){p.return=m,H=p;break}H=m}}}var v=r.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var E=w.sibling;w.sibling=null,w=E}while(w!==null)}}H=r}}if(r.subtreeFlags&2064&&a!==null)a.return=r,H=a;else e:for(;H!==null;){if(r=H,r.flags&2048)switch(r.tag){case 0:case 11:case 15:iu(9,r,r.return)}var y=r.sibling;if(y!==null){y.return=r.return,H=y;break e}H=r.return}}var x=n.current;for(H=x;H!==null;){a=H;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,H=S;else e:for(a=x;H!==null;){if(o=H,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Rp(9,o)}}catch(k){Be(o,o.return,k)}if(o===a){H=null;break e}var _=o.sibling;if(_!==null){_.return=o.return,H=_;break e}H=o.return}}if(he=i,Vr(),Ws&&typeof Ws.onPostCommitFiberRoot=="function")try{Ws.onPostCommitFiberRoot(Sp,n)}catch{}s=!0}return s}finally{ve=t,Xn.transition=e}}return!1}function fw(n,e,t){e=dc(t,e),e=Nb(n,e,1),n=Lr(n,e,1),e=Vt(),n!==null&&(nd(n,1,e),ln(n,e))}function Be(n,e,t){if(n.tag===3)fw(n,n,t);else for(;e!==null;){if(e.tag===3){fw(e,n,t);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Mr===null||!Mr.has(s))){n=dc(t,n),n=Tb(e,n,1),e=Lr(e,n,1),n=Vt(),e!==null&&(nd(e,1,n),ln(e,n));break}}e=e.return}}function O_(n,e,t){var s=n.pingCache;s!==null&&s.delete(e),e=Vt(),n.pingedLanes|=n.suspendedLanes&t,ht===n&&(xt&t)===t&&(nt===4||nt===3&&(xt&130023424)===xt&&500>$e()-Tv?ao(n,0):Nv|=t),ln(n,e)}function qb(n,e){e===0&&(n.mode&1?(e=gd,gd<<=1,!(gd&130023424)&&(gd=4194304)):e=1);var t=Vt();n=Di(n,e),n!==null&&(nd(n,e,t),ln(n,t))}function z_(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),qb(n,t)}function B_(n,e){var t=0;switch(n.tag){case 13:var s=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:s=n.stateNode;break;default:throw Error(I(314))}s!==null&&s.delete(e),qb(n,t)}var Kb;Kb=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||an.current)rn=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return rn=!1,C_(n,e,t);rn=!!(n.flags&131072)}else rn=!1,Pe&&e.flags&1048576&&eb(e,Df,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Hd(n,e),n=e.pendingProps;var i=lc(e,It.current);Ko(e,t),i=Av(null,e,s,n,i,t);var r=Sv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,on(s)?(r=!0,If(e)):r=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,vv(e),i.updater=Pp,e.stateNode=i,i._reactInternals=e,fg(e,s,n,t),e=gg(null,e,s,!0,r,t)):(e.tag=0,Pe&&r&&uv(e),$t(null,e,i,t),e=e.child),e;case 16:s=e.elementType;e:{switch(Hd(n,e),n=e.pendingProps,i=s._init,s=i(s._payload),e.type=s,i=e.tag=U_(s),n=es(s,n),i){case 0:e=mg(null,e,s,n,t);break e;case 1:e=sw(null,e,s,n,t);break e;case 11:e=tw(null,e,s,n,t);break e;case 14:e=nw(null,e,s,es(s.type,n),t);break e}throw Error(I(306,s,""))}return e;case 0:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:es(s,i),mg(n,e,s,i,t);case 1:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:es(s,i),sw(n,e,s,i,t);case 3:e:{if(Mb(e),n===null)throw Error(I(387));s=e.pendingProps,r=e.memoizedState,i=r.element,ab(n,e),zf(e,s,null,t);var a=e.memoizedState;if(s=a.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){i=dc(Error(I(423)),e),e=iw(n,e,s,t,i);break e}else if(s!==i){i=dc(Error(I(424)),e),e=iw(n,e,s,t,i);break e}else for(kn=Rr(e.stateNode.containerInfo.firstChild),Cn=e,Pe=!0,ms=null,t=ib(e,null,s,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(cc(),s===i){e=Fi(n,e,t);break e}$t(n,e,s,t)}e=e.child}return e;case 5:return ob(e),n===null&&ug(e),s=e.type,i=e.pendingProps,r=n!==null?n.memoizedProps:null,a=i.children,rg(s,i)?a=null:r!==null&&rg(s,r)&&(e.flags|=32),Lb(n,e),$t(n,e,a,t),e.child;case 6:return n===null&&ug(e),null;case 13:return Ib(n,e,t);case 4:return yv(e,e.stateNode.containerInfo),s=e.pendingProps,n===null?e.child=uc(e,null,s,t):$t(n,e,s,t),e.child;case 11:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:es(s,i),tw(n,e,s,i,t);case 7:return $t(n,e,e.pendingProps,t),e.child;case 8:return $t(n,e,e.pendingProps.children,t),e.child;case 12:return $t(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(s=e.type._context,i=e.pendingProps,r=e.memoizedProps,a=i.value,Se(Ff,s._currentValue),s._currentValue=a,r!==null)if(ws(r.value,a)){if(r.children===i.children&&!an.current){e=Fi(n,e,t);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var o=r.dependencies;if(o!==null){a=r.child;for(var c=o.firstContext;c!==null;){if(c.context===s){if(r.tag===1){c=Pi(-1,t&-t),c.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}r.lanes|=t,c=r.alternate,c!==null&&(c.lanes|=t),hg(r.return,t,e),o.lanes|=t;break}c=c.next}}else if(r.tag===10)a=r.type===e.type?null:r.child;else if(r.tag===18){if(a=r.return,a===null)throw Error(I(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),hg(a,t,e),a=r.sibling}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===e){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}$t(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps.children,Ko(e,t),i=qn(i),s=s(i),e.flags|=1,$t(n,e,s,t),e.child;case 14:return s=e.type,i=es(s,e.pendingProps),i=es(s.type,i),nw(n,e,s,i,t);case 15:return Pb(n,e,e.type,e.pendingProps,t);case 17:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:es(s,i),Hd(n,e),e.tag=1,on(s)?(n=!0,If(e)):n=!1,Ko(e,t),Cb(e,s,i),fg(e,s,i,t),gg(null,e,s,!0,n,t);case 19:return jb(n,e,t);case 22:return Rb(n,e,t)}throw Error(I(156,e.tag))};function Qb(n,e){return Ex(n,e)}function H_(n,e,t,s){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(n,e,t,s){return new H_(n,e,t,s)}function Mv(n){return n=n.prototype,!(!n||!n.isReactComponent)}function U_(n){if(typeof n=="function")return Mv(n)?1:0;if(n!=null){if(n=n.$$typeof,n===J0)return 11;if(n===Z0)return 14}return 2}function jr(n,e){var t=n.alternate;return t===null?(t=Gn(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Vd(n,e,t,s,i,r){var a=2;if(s=n,typeof n=="function")Mv(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case Mo:return oo(t.children,i,r,e);case Q0:a=8,i|=8;break;case Fm:return n=Gn(12,t,e,i|2),n.elementType=Fm,n.lanes=r,n;case Om:return n=Gn(13,t,e,i),n.elementType=Om,n.lanes=r,n;case zm:return n=Gn(19,t,e,i),n.elementType=zm,n.lanes=r,n;case ox:return Mp(t,i,r,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case rx:a=10;break e;case ax:a=9;break e;case J0:a=11;break e;case Z0:a=14;break e;case Wi:a=16,s=null;break e}throw Error(I(130,n==null?n:typeof n,""))}return e=Gn(a,t,e,i),e.elementType=n,e.type=s,e.lanes=r,e}function oo(n,e,t,s){return n=Gn(7,n,s,e),n.lanes=t,n}function Mp(n,e,t,s){return n=Gn(22,n,s,e),n.elementType=ox,n.lanes=t,n.stateNode={isHidden:!1},n}function bm(n,e,t){return n=Gn(6,n,null,e),n.lanes=t,n}function Am(n,e,t){return e=Gn(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function $_(n,e,t,s,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nm(0),this.expirationTimes=nm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nm(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Iv(n,e,t,s,i,r,a,o,c){return n=new $_(n,e,t,o,c),e===1?(e=1,r===!0&&(e|=8)):e=0,r=Gn(3,null,null,e),n.current=r,r.stateNode=n,r.memoizedState={element:s,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},vv(r),n}function V_(n,e,t){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Lo,key:s==null?null:""+s,children:n,containerInfo:e,implementation:t}}function Jb(n){if(!n)return Or;n=n._reactInternals;e:{if(wo(n)!==n||n.tag!==1)throw Error(I(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(on(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(I(171))}if(n.tag===1){var t=n.type;if(on(t))return Jx(n,t,e)}return e}function Zb(n,e,t,s,i,r,a,o,c){return n=Iv(t,s,!0,n,i,r,a,o,c),n.context=Jb(null),t=n.current,s=Vt(),i=Ir(t),r=Pi(s,i),r.callback=e??null,Lr(t,r,i),n.current.lanes=i,nd(n,i,s),ln(n,s),n}function Ip(n,e,t,s){var i=e.current,r=Vt(),a=Ir(i);return t=Jb(t),e.context===null?e.context=t:e.pendingContext=t,e=Pi(r,a),e.payload={element:n},s=s===void 0?null:s,s!==null&&(e.callback=s),n=Lr(i,e,a),n!==null&&(ys(n,i,a,r),Od(n,i,a)),a}function Xf(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function pw(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function jv(n,e){pw(n,e),(n=n.alternate)&&pw(n,e)}function W_(){return null}var e1=typeof reportError=="function"?reportError:function(n){console.error(n)};function Dv(n){this._internalRoot=n}jp.prototype.render=Dv.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(I(409));Ip(n,e,null,null)};jp.prototype.unmount=Dv.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;fo(function(){Ip(null,n,null,null)}),e[ji]=null}};function jp(n){this._internalRoot=n}jp.prototype.unstable_scheduleHydration=function(n){if(n){var e=Rx();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Xi.length&&e!==0&&e<Xi[t].priority;t++);Xi.splice(t,0,n),t===0&&Mx(n)}};function Fv(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Dp(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function mw(){}function G_(n,e,t,s,i){if(i){if(typeof s=="function"){var r=s;s=function(){var u=Xf(a);r.call(u)}}var a=Zb(e,s,n,0,null,!1,!1,"",mw);return n._reactRootContainer=a,n[ji]=a.current,vu(n.nodeType===8?n.parentNode:n),fo(),a}for(;i=n.lastChild;)n.removeChild(i);if(typeof s=="function"){var o=s;s=function(){var u=Xf(c);o.call(u)}}var c=Iv(n,0,!1,null,null,!1,!1,"",mw);return n._reactRootContainer=c,n[ji]=c.current,vu(n.nodeType===8?n.parentNode:n),fo(function(){Ip(e,c,t,s)}),c}function Fp(n,e,t,s,i){var r=t._reactRootContainer;if(r){var a=r;if(typeof i=="function"){var o=i;i=function(){var c=Xf(a);o.call(c)}}Ip(e,a,n,i)}else a=G_(t,e,n,i,s);return Xf(a)}Tx=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Ic(e.pendingLanes);t!==0&&(nv(e,t|1),ln(e,$e()),!(he&6)&&(fc=$e()+500,Vr()))}break;case 13:fo(function(){var s=Di(n,1);if(s!==null){var i=Vt();ys(s,n,1,i)}}),jv(n,1)}};sv=function(n){if(n.tag===13){var e=Di(n,134217728);if(e!==null){var t=Vt();ys(e,n,134217728,t)}jv(n,134217728)}};Px=function(n){if(n.tag===13){var e=Ir(n),t=Di(n,e);if(t!==null){var s=Vt();ys(t,n,e,s)}jv(n,e)}};Rx=function(){return ve};Lx=function(n,e){var t=ve;try{return ve=n,e()}finally{ve=t}};qm=function(n,e,t){switch(e){case"input":if(Um(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var s=t[e];if(s!==n&&s.form===n.form){var i=Cp(s);if(!i)throw Error(I(90));cx(s),Um(s,i)}}}break;case"textarea":hx(n,t);break;case"select":e=t.value,e!=null&&Go(n,!!t.multiple,e,!1)}};yx=Pv;wx=fo;var X_={usingClientEntryPoint:!1,Events:[id,Fo,Cp,gx,vx,Pv]},kc={findFiberByHostInstance:Zr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Y_={bundleType:kc.bundleType,version:kc.version,rendererPackageName:kc.rendererPackageName,rendererConfig:kc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hi.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Ax(n),n===null?null:n.stateNode},findFiberByHostInstance:kc.findFiberByHostInstance||W_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cd.isDisabled&&Cd.supportsFiber)try{Sp=Cd.inject(Y_),Ws=Cd}catch{}}Rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X_;Rn.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fv(e))throw Error(I(200));return V_(n,e,null,t)};Rn.createRoot=function(n,e){if(!Fv(n))throw Error(I(299));var t=!1,s="",i=e1;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Iv(n,1,!1,null,null,t,!1,s,i),n[ji]=e.current,vu(n.nodeType===8?n.parentNode:n),new Dv(e)};Rn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(I(188)):(n=Object.keys(n).join(","),Error(I(268,n)));return n=Ax(e),n=n===null?null:n.stateNode,n};Rn.flushSync=function(n){return fo(n)};Rn.hydrate=function(n,e,t){if(!Dp(e))throw Error(I(200));return Fp(null,n,e,!0,t)};Rn.hydrateRoot=function(n,e,t){if(!Fv(n))throw Error(I(405));var s=t!=null&&t.hydratedSources||null,i=!1,r="",a=e1;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=Zb(e,null,n,1,t??null,i,!1,r,a),n[ji]=e.current,vu(n),s)for(n=0;n<s.length;n++)t=s[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new jp(e)};Rn.render=function(n,e,t){if(!Dp(e))throw Error(I(200));return Fp(null,n,e,!1,t)};Rn.unmountComponentAtNode=function(n){if(!Dp(n))throw Error(I(40));return n._reactRootContainer?(fo(function(){Fp(null,null,n,!1,function(){n._reactRootContainer=null,n[ji]=null})}),!0):!1};Rn.unstable_batchedUpdates=Pv;Rn.unstable_renderSubtreeIntoContainer=function(n,e,t,s){if(!Dp(t))throw Error(I(200));if(n==null||n._reactInternals===void 0)throw Error(I(38));return Fp(n,e,t,!1,s)};Rn.version="18.3.1-next-f1338f8080-20240426";function t1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t1)}catch(n){console.error(n)}}t1(),tx.exports=Rn;var q_=tx.exports,gw=q_;jm.createRoot=gw.createRoot,jm.hydrateRoot=gw.hydrateRoot;/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var vw="popstate";function K_(n={}){function e(i,r){let{pathname:a="/",search:o="",hash:c=""}=xo(i.location.hash.substring(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Ng("",{pathname:a,search:o,hash:c},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){let a=i.document.querySelector("base"),o="";if(a&&a.getAttribute("href")){let c=i.location.href,u=c.indexOf("#");o=u===-1?c:c.slice(0,u)}return o+"#"+(typeof r=="string"?r:ku(r))}function s(i,r){Pn(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(r)})`)}return J_(e,t,s,n)}function Re(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Pn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Q_(){return Math.random().toString(36).substring(2,10)}function yw(n,e){return{usr:n.state,key:n.key,idx:e}}function Ng(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?xo(e):e,state:t,key:e&&e.key||s||Q_()}}function ku({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function xo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function J_(n,e,t,s={}){let{window:i=document.defaultView,v5Compat:r=!1}=s,a=i.history,o="POP",c=null,u=h();u==null&&(u=0,a.replaceState({...a.state,idx:u},""));function h(){return(a.state||{idx:null}).idx}function d(){o="POP";let E=h(),y=E==null?null:E-u;u=E,c&&c({action:o,location:w.location,delta:y})}function p(E,y){o="PUSH";let x=Ng(w.location,E,y);t&&t(x,E),u=h()+1;let S=yw(x,u),_=w.createHref(x);try{a.pushState(S,"",_)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(_)}r&&c&&c({action:o,location:w.location,delta:1})}function m(E,y){o="REPLACE";let x=Ng(w.location,E,y);t&&t(x,E),u=h();let S=yw(x,u),_=w.createHref(x);a.replaceState(S,"",_),r&&c&&c({action:o,location:w.location,delta:0})}function v(E){return Z_(E)}let w={get action(){return o},get location(){return n(i,a)},listen(E){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(vw,d),c=E,()=>{i.removeEventListener(vw,d),c=null}},createHref(E){return e(i,E)},createURL:v,encodeLocation(E){let y=v(E);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:p,replace:m,go(E){return a.go(E)}};return w}function Z_(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Re(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:ku(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function n1(n,e,t="/"){return ek(n,e,t,!1)}function ek(n,e,t,s){let i=typeof e=="string"?xo(e):e,r=Oi(i.pathname||"/",t);if(r==null)return null;let a=s1(n);tk(a);let o=null;for(let c=0;o==null&&c<a.length;++c){let u=dk(r);o=uk(a[c],u,s)}return o}function s1(n,e=[],t=[],s="",i=!1){let r=(a,o,c=i,u)=>{let h={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(s)&&c)return;Re(h.relativePath.startsWith(s),`Absolute route path "${h.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(s.length)}let d=Ri([s,h.relativePath]),p=t.concat(h);a.children&&a.children.length>0&&(Re(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),s1(a.children,e,p,d,c)),!(a.path==null&&!a.index)&&e.push({path:d,score:lk(d,a.index),routesMeta:p})};return n.forEach((a,o)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))r(a,o);else for(let u of i1(a.path))r(a,o,!0,u)}),e}function i1(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,i=t.endsWith("?"),r=t.replace(/\?$/,"");if(s.length===0)return i?[r,""]:[r];let a=i1(s.join("/")),o=[];return o.push(...a.map(c=>c===""?r:[r,c].join("/"))),i&&o.push(...a),o.map(c=>n.startsWith("/")&&c===""?"/":c)}function tk(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:ck(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var nk=/^:[\w-]+$/,sk=3,ik=2,rk=1,ak=10,ok=-2,ww=n=>n==="*";function lk(n,e){let t=n.split("/"),s=t.length;return t.some(ww)&&(s+=ok),e&&(s+=ik),t.filter(i=>!ww(i)).reduce((i,r)=>i+(nk.test(r)?sk:r===""?rk:ak),s)}function ck(n,e){return n.length===e.length&&n.slice(0,-1).every((s,i)=>s===e[i])?n[n.length-1]-e[e.length-1]:0}function uk(n,e,t=!1){let{routesMeta:s}=n,i={},r="/",a=[];for(let o=0;o<s.length;++o){let c=s[o],u=o===s.length-1,h=r==="/"?e:e.slice(r.length)||"/",d=Yf({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),p=c.route;if(!d&&u&&t&&!s[s.length-1].route.index&&(d=Yf({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!d)return null;Object.assign(i,d.params),a.push({params:i,pathname:Ri([r,d.pathname]),pathnameBase:gk(Ri([r,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(r=Ri([r,d.pathnameBase]))}return a}function Yf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=hk(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let r=i[0],a=r.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:s.reduce((u,{paramName:h,isOptional:d},p)=>{if(h==="*"){let v=o[p]||"";a=r.slice(0,r.length-v.length).replace(/(.)\/+$/,"$1")}const m=o[p];return d&&!m?u[h]=void 0:u[h]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:r,pathnameBase:a,pattern:n}}function hk(n,e=!1,t=!0){Pn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,c)=>(s.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(s.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function dk(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Pn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Oi(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}var r1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fk=n=>r1.test(n);function pk(n,e="/"){let{pathname:t,search:s="",hash:i=""}=typeof n=="string"?xo(n):n,r;if(t)if(fk(t))r=t;else{if(t.includes("//")){let a=t;t=t.replace(/\/\/+/g,"/"),Pn(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${t}`)}t.startsWith("/")?r=xw(t.substring(1),"/"):r=xw(t,e)}else r=e;return{pathname:r,search:vk(s),hash:yk(i)}}function xw(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Sm(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function mk(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Ov(n){let e=mk(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function zv(n,e,t,s=!1){let i;typeof n=="string"?i=xo(n):(i={...n},Re(!i.pathname||!i.pathname.includes("?"),Sm("?","pathname","search",i)),Re(!i.pathname||!i.pathname.includes("#"),Sm("#","pathname","hash",i)),Re(!i.search||!i.search.includes("#"),Sm("#","search","hash",i)));let r=n===""||i.pathname==="",a=r?"/":i.pathname,o;if(a==null)o=t;else{let d=e.length-1;if(!s&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),d-=1;i.pathname=p.join("/")}o=d>=0?e[d]:"/"}let c=pk(i,o),u=a&&a!=="/"&&a.endsWith("/"),h=(r||a===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}var Ri=n=>n.join("/").replace(/\/\/+/g,"/"),gk=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),vk=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,yk=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,wk=class{constructor(n,e,t,s=!1){this.status=n,this.statusText=e||"",this.internal=s,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function xk(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function bk(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var a1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function o1(n,e){let t=n;if(typeof t!="string"||!r1.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let s=t,i=!1;if(a1)try{let r=new URL(window.location.href),a=t.startsWith("//")?new URL(r.protocol+t):new URL(t),o=Oi(a.pathname,e);a.origin===r.origin&&o!=null?t=o+a.search+a.hash:i=!0}catch{Pn(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:i,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var l1=["POST","PUT","PATCH","DELETE"];new Set(l1);var Ak=["GET",...l1];new Set(Ak);var vc=N.createContext(null);vc.displayName="DataRouter";var Op=N.createContext(null);Op.displayName="DataRouterState";var Sk=N.createContext(!1),c1=N.createContext({isTransitioning:!1});c1.displayName="ViewTransition";var Ek=N.createContext(new Map);Ek.displayName="Fetchers";var _k=N.createContext(null);_k.displayName="Await";var Mn=N.createContext(null);Mn.displayName="Navigation";var ad=N.createContext(null);ad.displayName="Location";var Ys=N.createContext({outlet:null,matches:[],isDataRoute:!1});Ys.displayName="Route";var Bv=N.createContext(null);Bv.displayName="RouteError";var u1="REACT_ROUTER_ERROR",kk="REDIRECT",Ck="ROUTE_ERROR_RESPONSE";function Nk(n){if(n.startsWith(`${u1}:${kk}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function Tk(n){if(n.startsWith(`${u1}:${Ck}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new wk(e.status,e.statusText,e.data)}catch{}}function Pk(n,{relative:e}={}){Re(yc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=N.useContext(Mn),{hash:i,pathname:r,search:a}=od(n,{relative:e}),o=r;return t!=="/"&&(o=r==="/"?t:Ri([t,r])),s.createHref({pathname:o,search:a,hash:i})}function yc(){return N.useContext(ad)!=null}function Qn(){return Re(yc(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(ad).location}var h1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function d1(n){N.useContext(Mn).static||N.useLayoutEffect(n)}function bo(){let{isDataRoute:n}=N.useContext(Ys);return n?$k():Rk()}function Rk(){Re(yc(),"useNavigate() may be used only in the context of a <Router> component.");let n=N.useContext(vc),{basename:e,navigator:t}=N.useContext(Mn),{matches:s}=N.useContext(Ys),{pathname:i}=Qn(),r=JSON.stringify(Ov(s)),a=N.useRef(!1);return d1(()=>{a.current=!0}),N.useCallback((c,u={})=>{if(Pn(a.current,h1),!a.current)return;if(typeof c=="number"){t.go(c);return}let h=zv(c,JSON.parse(r),i,u.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Ri([e,h.pathname])),(u.replace?t.replace:t.push)(h,u.state,u)},[e,t,r,i,n])}N.createContext(null);function od(n,{relative:e}={}){let{matches:t}=N.useContext(Ys),{pathname:s}=Qn(),i=JSON.stringify(Ov(t));return N.useMemo(()=>zv(n,JSON.parse(i),s,e==="path"),[n,i,s,e])}function Lk(n,e){return f1(n,e)}function f1(n,e,t,s,i){var x;Re(yc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=N.useContext(Mn),{matches:a}=N.useContext(Ys),o=a[a.length-1],c=o?o.params:{},u=o?o.pathname:"/",h=o?o.pathnameBase:"/",d=o&&o.route;{let S=d&&d.path||"";m1(u,!d||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let p=Qn(),m;if(e){let S=typeof e=="string"?xo(e):e;Re(h==="/"||((x=S.pathname)==null?void 0:x.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${S.pathname}" was given in the \`location\` prop.`),m=S}else m=p;let v=m.pathname||"/",w=v;if(h!=="/"){let S=h.replace(/^\//,"").split("/");w="/"+v.replace(/^\//,"").split("/").slice(S.length).join("/")}let E=n1(n,{pathname:w});Pn(d||E!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Pn(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=Fk(E&&E.map(S=>Object.assign({},S,{params:Object.assign({},c,S.params),pathname:Ri([h,r.encodeLocation?r.encodeLocation(S.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?h:Ri([h,r.encodeLocation?r.encodeLocation(S.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathnameBase])})),a,t,s,i);return e&&y?N.createElement(ad.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},y):y}function Mk(){let n=Uk(),e=xk(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:s},r={padding:"2px 4px",backgroundColor:s},a=null;return console.error("Error handled by React Router default ErrorBoundary:",n),a=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:r},"ErrorBoundary")," or"," ",N.createElement("code",{style:r},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),t?N.createElement("pre",{style:i},t):null,a)}var Ik=N.createElement(Mk,null),p1=class extends N.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=Tk(n.digest);t&&(n=t)}let e=n!==void 0?N.createElement(Ys.Provider,{value:this.props.routeContext},N.createElement(Bv.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?N.createElement(jk,{error:n},e):e}};p1.contextType=Sk;var Em=new WeakMap;function jk({children:n,error:e}){let{basename:t}=N.useContext(Mn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=Nk(e.digest);if(s){let i=Em.get(e);if(i)throw i;let r=o1(s.location,t);if(a1&&!Em.get(e))if(r.isExternal||s.reloadDocument)window.location.href=r.absoluteURL||r.to;else{const a=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(r.to,{replace:s.replace}));throw Em.set(e,a),a}return N.createElement("meta",{httpEquiv:"refresh",content:`0;url=${r.absoluteURL||r.to}`})}}return n}function Dk({routeContext:n,match:e,children:t}){let s=N.useContext(vc);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(Ys.Provider,{value:n},t)}function Fk(n,e=[],t=null,s=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let r=n,a=t==null?void 0:t.errors;if(a!=null){let h=r.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);Re(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),r=r.slice(0,Math.min(r.length,h+1))}let o=!1,c=-1;if(t)for(let h=0;h<r.length;h++){let d=r[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:p,errors:m}=t,v=d.route.loader&&!p.hasOwnProperty(d.route.id)&&(!m||m[d.route.id]===void 0);if(d.route.lazy||v){o=!0,c>=0?r=r.slice(0,c+1):r=[r[0]];break}}}let u=t&&s?(h,d)=>{var p,m;s(h,{location:t.location,params:((m=(p=t.matches)==null?void 0:p[0])==null?void 0:m.params)??{},unstable_pattern:bk(t.matches),errorInfo:d})}:void 0;return r.reduceRight((h,d,p)=>{let m,v=!1,w=null,E=null;t&&(m=a&&d.route.id?a[d.route.id]:void 0,w=d.route.errorElement||Ik,o&&(c<0&&p===0?(m1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,E=null):c===p&&(v=!0,E=d.route.hydrateFallbackElement||null)));let y=e.concat(r.slice(0,p+1)),x=()=>{let S;return m?S=w:v?S=E:d.route.Component?S=N.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=h,N.createElement(Dk,{match:d,routeContext:{outlet:h,matches:y,isDataRoute:t!=null},children:S})};return t&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?N.createElement(p1,{location:t.location,revalidation:t.revalidation,component:w,error:m,children:x(),routeContext:{outlet:null,matches:y,isDataRoute:!0},onError:u}):x()},null)}function Hv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ok(n){let e=N.useContext(vc);return Re(e,Hv(n)),e}function zk(n){let e=N.useContext(Op);return Re(e,Hv(n)),e}function Bk(n){let e=N.useContext(Ys);return Re(e,Hv(n)),e}function Uv(n){let e=Bk(n),t=e.matches[e.matches.length-1];return Re(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function Hk(){return Uv("useRouteId")}function Uk(){var s;let n=N.useContext(Bv),e=zk("useRouteError"),t=Uv("useRouteError");return n!==void 0?n:(s=e.errors)==null?void 0:s[t]}function $k(){let{router:n}=Ok("useNavigate"),e=Uv("useNavigate"),t=N.useRef(!1);return d1(()=>{t.current=!0}),N.useCallback(async(i,r={})=>{Pn(t.current,h1),t.current&&(typeof i=="number"?await n.navigate(i):await n.navigate(i,{fromRouteId:e,...r}))},[n,e])}var bw={};function m1(n,e,t){!e&&!bw[n]&&(bw[n]=!0,Pn(!1,t))}N.memo(Vk);function Vk({routes:n,future:e,state:t,onError:s}){return f1(n,void 0,t,s,e)}function zp({to:n,replace:e,state:t,relative:s}){Re(yc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=N.useContext(Mn);Pn(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:r}=N.useContext(Ys),{pathname:a}=Qn(),o=bo(),c=zv(n,Ov(r),a,s==="path"),u=JSON.stringify(c);return N.useEffect(()=>{o(JSON.parse(u),{replace:e,state:t,relative:s})},[o,u,s,e,t]),null}function Ft(n){Re(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Wk({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:i,static:r=!1,unstable_useTransitions:a}){Re(!yc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),c=N.useMemo(()=>({basename:o,navigator:i,static:r,unstable_useTransitions:a,future:{}}),[o,i,r,a]);typeof t=="string"&&(t=xo(t));let{pathname:u="/",search:h="",hash:d="",state:p=null,key:m="default"}=t,v=N.useMemo(()=>{let w=Oi(u,o);return w==null?null:{location:{pathname:w,search:h,hash:d,state:p,key:m},navigationType:s}},[o,u,h,d,p,m,s]);return Pn(v!=null,`<Router basename="${o}"> is not able to match the URL "${u}${h}${d}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:N.createElement(Mn.Provider,{value:c},N.createElement(ad.Provider,{children:e,value:v}))}function Gk({children:n,location:e}){return Lk(Tg(n),e)}function Tg(n,e=[]){let t=[];return N.Children.forEach(n,(s,i)=>{if(!N.isValidElement(s))return;let r=[...e,i];if(s.type===N.Fragment){t.push.apply(t,Tg(s.props.children,r));return}Re(s.type===Ft,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Re(!s.props.index||!s.props.children,"An index route cannot have child routes.");let a={id:s.props.id||r.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(a.children=Tg(s.props.children,r)),t.push(a)}),t}var Wd="get",Gd="application/x-www-form-urlencoded";function Bp(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function Xk(n){return Bp(n)&&n.tagName.toLowerCase()==="button"}function Yk(n){return Bp(n)&&n.tagName.toLowerCase()==="form"}function qk(n){return Bp(n)&&n.tagName.toLowerCase()==="input"}function Kk(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Qk(n,e){return n.button===0&&(!e||e==="_self")&&!Kk(n)}var Nd=null;function Jk(){if(Nd===null)try{new FormData(document.createElement("form"),0),Nd=!1}catch{Nd=!0}return Nd}var Zk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function _m(n){return n!=null&&!Zk.has(n)?(Pn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Gd}"`),null):n}function eC(n,e){let t,s,i,r,a;if(Yk(n)){let o=n.getAttribute("action");s=o?Oi(o,e):null,t=n.getAttribute("method")||Wd,i=_m(n.getAttribute("enctype"))||Gd,r=new FormData(n)}else if(Xk(n)||qk(n)&&(n.type==="submit"||n.type==="image")){let o=n.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=n.getAttribute("formaction")||o.getAttribute("action");if(s=c?Oi(c,e):null,t=n.getAttribute("formmethod")||o.getAttribute("method")||Wd,i=_m(n.getAttribute("formenctype"))||_m(o.getAttribute("enctype"))||Gd,r=new FormData(o,n),!Jk()){let{name:u,type:h,value:d}=n;if(h==="image"){let p=u?`${u}.`:"";r.append(`${p}x`,"0"),r.append(`${p}y`,"0")}else u&&r.append(u,d)}}else{if(Bp(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Wd,s=null,i=Gd,a=n}return r&&i==="text/plain"&&(a=r,r=void 0),{action:s,method:t.toLowerCase(),encType:i,formData:r,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function $v(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function tC(n,e,t,s){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${s}`:i.pathname=`${i.pathname}.${s}`:i.pathname==="/"?i.pathname=`_root.${s}`:e&&Oi(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${s}`,i}async function nC(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function sC(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function iC(n,e,t){let s=await Promise.all(n.map(async i=>{let r=e.routes[i.route.id];if(r){let a=await nC(r,t);return a.links?a.links():[]}return[]}));return lC(s.flat(1).filter(sC).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Aw(n,e,t,s,i,r){let a=(c,u)=>t[u]?c.route.id!==t[u].route.id:!0,o=(c,u)=>{var h;return t[u].pathname!==c.pathname||((h=t[u].route.path)==null?void 0:h.endsWith("*"))&&t[u].params["*"]!==c.params["*"]};return r==="assets"?e.filter((c,u)=>a(c,u)||o(c,u)):r==="data"?e.filter((c,u)=>{var d;let h=s.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(a(c,u)||o(c,u))return!0;if(c.route.shouldRevalidate){let p=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=t[0])==null?void 0:d.params)||{},nextUrl:new URL(n,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function rC(n,e,{includeHydrateFallback:t}={}){return aC(n.map(s=>{let i=e.routes[s.route.id];if(!i)return[];let r=[i.module];return i.clientActionModule&&(r=r.concat(i.clientActionModule)),i.clientLoaderModule&&(r=r.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(r=r.concat(i.hydrateFallbackModule)),i.imports&&(r=r.concat(i.imports)),r}).flat(1))}function aC(n){return[...new Set(n)]}function oC(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function lC(n,e){let t=new Set;return new Set(e),n.reduce((s,i)=>{let r=JSON.stringify(oC(i));return t.has(r)||(t.add(r),s.push({key:r,link:i})),s},[])}function g1(){let n=N.useContext(vc);return $v(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function cC(){let n=N.useContext(Op);return $v(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Vv=N.createContext(void 0);Vv.displayName="FrameworkContext";function v1(){let n=N.useContext(Vv);return $v(n,"You must render this element inside a <HydratedRouter> element"),n}function uC(n,e){let t=N.useContext(Vv),[s,i]=N.useState(!1),[r,a]=N.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:u,onMouseLeave:h,onTouchStart:d}=e,p=N.useRef(null);N.useEffect(()=>{if(n==="render"&&a(!0),n==="viewport"){let w=y=>{y.forEach(x=>{a(x.isIntersecting)})},E=new IntersectionObserver(w,{threshold:.5});return p.current&&E.observe(p.current),()=>{E.disconnect()}}},[n]),N.useEffect(()=>{if(s){let w=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(w)}}},[s]);let m=()=>{i(!0)},v=()=>{i(!1),a(!1)};return t?n!=="intent"?[r,p,{}]:[r,p,{onFocus:Cc(o,m),onBlur:Cc(c,v),onMouseEnter:Cc(u,m),onMouseLeave:Cc(h,v),onTouchStart:Cc(d,m)}]:[!1,p,{}]}function Cc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function hC({page:n,...e}){let{router:t}=g1(),s=N.useMemo(()=>n1(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?N.createElement(fC,{page:n,matches:s,...e}):null}function dC(n){let{manifest:e,routeModules:t}=v1(),[s,i]=N.useState([]);return N.useEffect(()=>{let r=!1;return iC(n,e,t).then(a=>{r||i(a)}),()=>{r=!0}},[n,e,t]),s}function fC({page:n,matches:e,...t}){let s=Qn(),{future:i,manifest:r,routeModules:a}=v1(),{basename:o}=g1(),{loaderData:c,matches:u}=cC(),h=N.useMemo(()=>Aw(n,e,u,r,s,"data"),[n,e,u,r,s]),d=N.useMemo(()=>Aw(n,e,u,r,s,"assets"),[n,e,u,r,s]),p=N.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let w=new Set,E=!1;if(e.forEach(x=>{var _;let S=r.routes[x.route.id];!S||!S.hasLoader||(!h.some(k=>k.route.id===x.route.id)&&x.route.id in c&&((_=a[x.route.id])!=null&&_.shouldRevalidate)||S.hasClientLoader?E=!0:w.add(x.route.id))}),w.size===0)return[];let y=tC(n,o,i.unstable_trailingSlashAwareDataRequests,"data");return E&&w.size>0&&y.searchParams.set("_routes",e.filter(x=>w.has(x.route.id)).map(x=>x.route.id).join(",")),[y.pathname+y.search]},[o,i.unstable_trailingSlashAwareDataRequests,c,s,r,h,e,n,a]),m=N.useMemo(()=>rC(d,r),[d,r]),v=dC(d);return N.createElement(N.Fragment,null,p.map(w=>N.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...t})),m.map(w=>N.createElement("link",{key:w,rel:"modulepreload",href:w,...t})),v.map(({key:w,link:E})=>N.createElement("link",{key:w,nonce:t.nonce,...E})))}function pC(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var mC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{mC&&(window.__reactRouterVersion="7.12.0")}catch{}function gC({basename:n,children:e,unstable_useTransitions:t,window:s}){let i=N.useRef();i.current==null&&(i.current=K_({window:s,v5Compat:!0}));let r=i.current,[a,o]=N.useState({action:r.action,location:r.location}),c=N.useCallback(u=>{t===!1?o(u):N.startTransition(()=>o(u))},[t]);return N.useLayoutEffect(()=>r.listen(c),[r,c]),N.createElement(Wk,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:r,unstable_useTransitions:t})}var y1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ge=N.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:i,reloadDocument:r,replace:a,state:o,target:c,to:u,preventScrollReset:h,viewTransition:d,unstable_defaultShouldRevalidate:p,...m},v){let{basename:w,unstable_useTransitions:E}=N.useContext(Mn),y=typeof u=="string"&&y1.test(u),x=o1(u,w);u=x.to;let S=Pk(u,{relative:i}),[_,k,T]=uC(s,m),C=xC(u,{replace:a,state:o,target:c,preventScrollReset:h,relative:i,viewTransition:d,unstable_defaultShouldRevalidate:p,unstable_useTransitions:E});function P(D){e&&e(D),D.defaultPrevented||C(D)}let j=N.createElement("a",{...m,...T,href:x.absoluteURL||S,onClick:x.isExternal||r?e:P,ref:pC(v,k),target:c,"data-discover":!y&&t==="render"?"true":void 0});return _&&!y?N.createElement(N.Fragment,null,j,N.createElement(hC,{page:S})):j});Ge.displayName="Link";var vC=N.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:i=!1,style:r,to:a,viewTransition:o,children:c,...u},h){let d=od(a,{relative:u.relative}),p=Qn(),m=N.useContext(Op),{navigator:v,basename:w}=N.useContext(Mn),E=m!=null&&_C(d)&&o===!0,y=v.encodeLocation?v.encodeLocation(d).pathname:d.pathname,x=p.pathname,S=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;t||(x=x.toLowerCase(),S=S?S.toLowerCase():null,y=y.toLowerCase()),S&&w&&(S=Oi(S,w)||S);const _=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let k=x===y||!i&&x.startsWith(y)&&x.charAt(_)==="/",T=S!=null&&(S===y||!i&&S.startsWith(y)&&S.charAt(y.length)==="/"),C={isActive:k,isPending:T,isTransitioning:E},P=k?e:void 0,j;typeof s=="function"?j=s(C):j=[s,k?"active":null,T?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let D=typeof r=="function"?r(C):r;return N.createElement(Ge,{...u,"aria-current":P,className:j,ref:h,style:D,to:a,viewTransition:o},typeof c=="function"?c(C):c)});vC.displayName="NavLink";var yC=N.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:i,state:r,method:a=Wd,action:o,onSubmit:c,relative:u,preventScrollReset:h,viewTransition:d,unstable_defaultShouldRevalidate:p,...m},v)=>{let{unstable_useTransitions:w}=N.useContext(Mn),E=SC(),y=EC(o,{relative:u}),x=a.toLowerCase()==="get"?"get":"post",S=typeof o=="string"&&y1.test(o),_=k=>{if(c&&c(k),k.defaultPrevented)return;k.preventDefault();let T=k.nativeEvent.submitter,C=(T==null?void 0:T.getAttribute("formmethod"))||a,P=()=>E(T||k.currentTarget,{fetcherKey:e,method:C,navigate:t,replace:i,state:r,relative:u,preventScrollReset:h,viewTransition:d,unstable_defaultShouldRevalidate:p});w&&t!==!1?N.startTransition(()=>P()):P()};return N.createElement("form",{ref:v,method:x,action:y,onSubmit:s?c:_,...m,"data-discover":!S&&n==="render"?"true":void 0})});yC.displayName="Form";function wC(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function w1(n){let e=N.useContext(vc);return Re(e,wC(n)),e}function xC(n,{target:e,replace:t,state:s,preventScrollReset:i,relative:r,viewTransition:a,unstable_defaultShouldRevalidate:o,unstable_useTransitions:c}={}){let u=bo(),h=Qn(),d=od(n,{relative:r});return N.useCallback(p=>{if(Qk(p,e)){p.preventDefault();let m=t!==void 0?t:ku(h)===ku(d),v=()=>u(n,{replace:m,state:s,preventScrollReset:i,relative:r,viewTransition:a,unstable_defaultShouldRevalidate:o});c?N.startTransition(()=>v()):v()}},[h,u,d,t,s,e,n,i,r,a,o,c])}var bC=0,AC=()=>`__${String(++bC)}__`;function SC(){let{router:n}=w1("useSubmit"),{basename:e}=N.useContext(Mn),t=Hk(),s=n.fetch,i=n.navigate;return N.useCallback(async(r,a={})=>{let{action:o,method:c,encType:u,formData:h,body:d}=eC(r,e);if(a.navigate===!1){let p=a.fetcherKey||AC();await s(p,t,a.action||o,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:h,body:d,formMethod:a.method||c,formEncType:a.encType||u,flushSync:a.flushSync})}else await i(a.action||o,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:h,body:d,formMethod:a.method||c,formEncType:a.encType||u,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[s,i,e,t])}function EC(n,{relative:e}={}){let{basename:t}=N.useContext(Mn),s=N.useContext(Ys);Re(s,"useFormAction must be used inside a RouteContext");let[i]=s.matches.slice(-1),r={...od(n||".",{relative:e})},a=Qn();if(n==null){r.search=a.search;let o=new URLSearchParams(r.search),c=o.getAll("index");if(c.some(h=>h==="")){o.delete("index"),c.filter(d=>d).forEach(d=>o.append("index",d));let h=o.toString();r.search=h?`?${h}`:""}}return(!n||n===".")&&i.route.index&&(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(r.pathname=r.pathname==="/"?t:Ri([t,r.pathname])),ku(r)}function _C(n,{relative:e}={}){let t=N.useContext(c1);Re(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=w1("useViewTransitionState"),i=od(n,{relative:e});if(!t.isTransitioning)return!1;let r=Oi(t.currentLocation.pathname,s)||t.currentLocation.pathname,a=Oi(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Yf(i.pathname,a)!=null||Yf(i.pathname,r)!=null}function kC(){const[n,e]=N.useState(92);return N.useEffect(()=>{const t=()=>{const r=localStorage.getItem("sentiment_score");if(r)try{const a=JSON.parse(r);typeof a=="number"&&a>=0&&a<=100&&e(a)}catch(a){console.error("Failed to parse sentiment_score from localStorage:",a)}};t();const s=()=>{t()},i=r=>{if(r.key==="sentiment_score"&&r.newValue)try{const a=JSON.parse(r.newValue);typeof a=="number"&&a>=0&&a<=100&&e(a)}catch(a){console.error("Failed to parse sentiment_score from storage event:",a)}};return window.addEventListener("sentimentScoreUpdate",s),window.addEventListener("storage",i),()=>{window.removeEventListener("sentimentScoreUpdate",s),window.removeEventListener("storage",i)}},[]),f.jsx("div",{className:"relative w-full max-w-md",children:f.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black/40 backdrop-blur-xl shadow-lg overflow-hidden",children:[f.jsxs("div",{className:"px-5 py-4 bg-black/30 border-b border-white/10 flex items-center justify-between",children:[f.jsx("span",{className:"text-sm font-bold text-white",children:"REVUE. AI"}),f.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})]}),f.jsxs("div",{className:"p-5 space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("div",{className:"rounded-xl border border-white/10 bg-black/30 p-3 hover:bg-black/40 transition-colors",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("span",{className:"text-xs font-medium text-white/80",children:"Decision"}),f.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white/60"})]}),f.jsx("p",{className:"text-xs text-white/70 leading-relaxed line-clamp-2",children:"Improve onboarding flow..."})]}),f.jsxs("div",{className:"rounded-xl border border-white/10 bg-black/30 p-3 hover:bg-black/40 transition-colors",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("span",{className:"text-xs font-medium text-white/80",children:"Feedback"}),f.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white/60"})]}),f.jsx("p",{className:"text-xs text-white/70 leading-relaxed line-clamp-2",children:"User experience concerns..."})]})]}),f.jsxs("div",{className:"rounded-xl border border-white/10 bg-black/25 p-4",children:[f.jsx("div",{className:"text-xs font-semibold tracking-widest text-white/60 mb-3 uppercase",children:"INSIGHTS DETECTED"}),f.jsx("div",{className:"relative h-12 flex items-center justify-center",children:f.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[f.jsx("div",{className:"w-full h-0.5 bg-white/10"}),f.jsx("div",{className:"absolute w-0.5 h-full bg-white/10"}),f.jsx("div",{className:"absolute w-3 h-3 bg-white rounded-full border border-white/20 shadow-lg"})]})})]}),f.jsxs("div",{className:"rounded-xl border border-white/10 bg-black/30 p-4",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsx("h4",{className:"text-xs font-semibold text-white/90",children:"Key patterns"}),f.jsx("svg",{className:"w-4 h-4 text-white/50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),f.jsxs("div",{className:"mb-3",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("span",{className:"text-xs text-white/70",children:"Product Feedback"}),f.jsx("span",{className:"text-xs font-semibold text-green-400",children:"+87%"})]}),f.jsx("div",{className:"h-1.5 bg-white/5 rounded-full overflow-hidden",children:f.jsx("div",{className:"h-full bg-gradient-to-r from-white via-white/70 to-white/40 rounded-full",style:{width:"73%"}})})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("span",{className:"text-xs text-white/70",children:"Feature Requests"}),f.jsx("span",{className:"text-xs font-semibold text-green-400",children:"+64%"})]}),f.jsx("div",{className:"h-1.5 bg-white/5 rounded-full overflow-hidden",children:f.jsx("div",{className:"h-full bg-gradient-to-r from-white via-white/70 to-white/40 rounded-full",style:{width:"64%"}})})]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("div",{className:"rounded-xl border border-white/10 bg-black/30 p-4",children:[f.jsx("div",{className:"text-xs text-white/60 mb-2",children:"Sentiment"}),f.jsxs("div",{className:"text-2xl font-bold text-green-400 mb-2",children:[n,"%"]}),f.jsx("div",{className:"h-1.5 bg-white/5 rounded-full overflow-hidden",children:f.jsx("div",{className:"h-full bg-gradient-to-r from-white via-white/70 to-white/40 rounded-full",style:{width:`${n}%`}})})]}),f.jsxs("div",{className:"rounded-xl border border-white/10 bg-black/30 p-4",children:[f.jsx("div",{className:"text-xs text-white/60 mb-2",children:"Trend"}),f.jsx("div",{className:"h-12 relative",children:f.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 50",preserveAspectRatio:"none",children:[f.jsx("defs",{children:f.jsxs("linearGradient",{id:"trendGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[f.jsx("stop",{offset:"0%",stopColor:"rgba(255, 255, 255, 0.3)"}),f.jsx("stop",{offset:"100%",stopColor:"rgba(255, 255, 255, 0.05)"})]})}),f.jsx("path",{d:"M 0 45 Q 25 40 50 30 T 100 15",fill:"url(#trendGradient)"}),f.jsx("path",{d:"M 0 45 Q 25 40 50 30 T 100 15",stroke:"rgb(255, 255, 255)",strokeWidth:"2",fill:"none",strokeLinecap:"round"})]})})]})]}),f.jsxs("div",{className:"flex justify-center gap-2 pt-2",children:[f.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white"}),f.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white/40"}),f.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white/20"})]})]})]})})}const x1=N.createContext(void 0);function CC({children:n}){const[e,t]=N.useState(null),[s,i]=N.useState(!1),[r,a]=N.useState(!0),o=bo();N.useEffect(()=>{const d=localStorage.getItem("user");localStorage.getItem("isAuthenticated")==="true"&&d&&(t(JSON.parse(d)),i(!0)),a(!1)},[]);const c=async d=>{await new Promise(m=>setTimeout(m,800));const p={id:"1",email:d,name:d.split("@")[0]};t(p),i(!0),localStorage.setItem("user",JSON.stringify(p)),localStorage.setItem("isAuthenticated","true"),o("/app")},u=async d=>{await new Promise(m=>setTimeout(m,800));const p={id:"1",email:d,name:d.split("@")[0]};t(p),i(!0),localStorage.setItem("user",JSON.stringify(p)),localStorage.setItem("isAuthenticated","true"),o("/app")},h=()=>{t(null),i(!1),localStorage.removeItem("user"),localStorage.removeItem("isAuthenticated"),o("/")};return f.jsx(x1.Provider,{value:{user:e,isAuthenticated:s,login:c,signup:u,logout:h,isLoading:r},children:n})}function Hp(){const n=N.useContext(x1);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}function Jo(){const n=Qn(),e=bo(),t=i=>{if(i.preventDefault(),n.pathname!=="/")e("/"),setTimeout(()=>{const r=document.getElementById("about");r&&r.scrollIntoView({behavior:"smooth",block:"start"})},100);else{const r=document.getElementById("about");r&&r.scrollIntoView({behavior:"smooth",block:"start"})}},s=i=>{if(i.preventDefault(),n.pathname!=="/")e("/"),setTimeout(()=>{const r=document.getElementById("pricing");r&&r.scrollIntoView({behavior:"smooth",block:"start"})},100);else{const r=document.getElementById("pricing");r&&r.scrollIntoView({behavior:"smooth",block:"start"})}};return f.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-black/40 backdrop-blur-xl border-b border-white/10",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-5 flex items-center justify-between",children:[f.jsx(Ge,{to:"/",className:"flex items-center gap-2 group",children:f.jsx("span",{className:"text-xl font-bold text-white tracking-tight group-hover:text-white/90 transition-colors",children:"REVUE. AI"})}),f.jsxs("nav",{className:"hidden md:flex items-center gap-8",children:[f.jsxs(Ge,{to:"/",className:"relative inline-flex items-center gap-2 text-white/70 group py-2",children:[f.jsx("span",{className:"group-hover:text-white transition-colors duration-300 text-sm font-medium",children:"Home"}),f.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-white via-white/60 to-white/30 group-hover:w-full transition-all duration-300 ease-out"}),f.jsx("span",{className:"inline-block opacity-0 group-hover:opacity-100 -translate-x-2 group-hover:translate-x-0 transition-all duration-300 ease-out text-white",children:""})]}),f.jsxs("a",{href:"#about",onClick:t,className:"relative inline-flex items-center gap-2 text-white/70 group py-2",children:[f.jsx("span",{className:"group-hover:text-white transition-colors duration-300 text-sm font-medium",children:"About"}),f.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-white via-white/60 to-white/30 group-hover:w-full transition-all duration-300 ease-out"}),f.jsx("span",{className:"inline-block opacity-0 group-hover:opacity-100 -translate-x-2 group-hover:translate-x-0 transition-all duration-300 ease-out text-white",children:""})]}),f.jsxs("a",{href:"#pricing",onClick:s,className:"relative inline-flex items-center gap-2 text-white/70 group py-2",children:[f.jsx("span",{className:"group-hover:text-white transition-colors duration-300 text-sm font-medium",children:"Pricing"}),f.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-white via-white/60 to-white/30 group-hover:w-full transition-all duration-300 ease-out"}),f.jsx("span",{className:"inline-block opacity-0 group-hover:opacity-100 -translate-x-2 group-hover:translate-x-0 transition-all duration-300 ease-out text-white",children:""})]})]}),(()=>{const{isAuthenticated:i,logout:r}=Hp();return i?f.jsx("button",{onClick:r,className:"relative px-5 py-2.5 rounded-xl bg-black/40 backdrop-blur-xl border border-white/10 text-white/90 font-semibold overflow-hidden group transition-all duration-300 inline-block hover:bg-black/50",children:f.jsx("span",{className:"inline-block group-hover:-translate-y-1 transition-transform duration-300 text-sm",children:"LOGOUT"})}):f.jsx(Ge,{to:"/login",className:"relative px-5 py-2.5 rounded-xl bg-black/40 backdrop-blur-xl border border-white/10 text-white/90 font-semibold overflow-hidden group transition-all duration-300 inline-block hover:bg-black/50",children:f.jsx("span",{className:"inline-block group-hover:-translate-y-1 transition-transform duration-300 text-sm",children:"LOGIN"})})})()]})})}function Zo(){const n=Qn(),e=bo(),[t,s]=N.useState(""),[i,r]=N.useState("idle"),a=c=>u=>{if(u.preventDefault(),n.pathname!=="/")e("/"),setTimeout(()=>{const h=document.getElementById(c);h&&h.scrollIntoView({behavior:"smooth",block:"start"})},100);else{const h=document.getElementById(c);h&&h.scrollIntoView({behavior:"smooth",block:"start"})}},o=async c=>{if(c.preventDefault(),!!t)try{await fetch("https://gnosiss.app.n8n.cloud/webhook/newsletter",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})}),r("success"),s(""),setTimeout(()=>r("idle"),3e3)}catch(u){console.error("Newsletter subscription failed:",u)}};return f.jsxs("footer",{className:"relative z-10 border-t border-white/10 bg-black/40 backdrop-blur-xl",children:[f.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-white/20 to-transparent"}),f.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-16",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-12",children:[f.jsxs("div",{className:"space-y-4",children:[f.jsx("div",{className:"flex items-center gap-2 mb-4",children:f.jsx("span",{className:"text-2xl font-bold text-white",children:"REVUE. AI"})}),f.jsx("p",{className:"text-white/70 text-sm leading-relaxed",children:"Transforming enterprise feedback into actionable foresight."}),f.jsxs("div",{className:"flex items-center gap-4 mt-6",children:[f.jsx("a",{href:"https://www.linkedin.com/in/revue-ai-50b4963a6/",target:"_blank",rel:"noopener noreferrer",className:"w-8 h-8 rounded-lg border border-white/10 bg-white/5 flex items-center justify-center hover:bg-white/10 hover:border-white/20 transition-all duration-300 group",children:f.jsx("svg",{className:"w-4 h-4 text-white/80 group-hover:text-white transition-colors",fill:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})})}),f.jsx("a",{href:"https://x.com/Revue_ai",target:"_blank",rel:"noopener noreferrer",className:"w-8 h-8 rounded-lg border border-white/10 bg-white/5 flex items-center justify-center hover:bg-white/10 hover:border-white/20 transition-all duration-300 group",children:f.jsx("svg",{className:"w-4 h-4 text-white/80 group-hover:text-white transition-colors",fill:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})}),f.jsx("a",{href:"#",className:"w-8 h-8 rounded-lg border border-white/10 bg-white/5 flex items-center justify-center hover:bg-white/10 hover:border-white/20 transition-all duration-300 group",children:f.jsx("svg",{className:"w-4 h-4 text-white/80 group-hover:text-white transition-colors",fill:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z",clipRule:"evenodd"})})})]})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-semibold text-white mb-4 uppercase tracking-wider",children:"Solution"}),f.jsxs("ul",{className:"space-y-3",children:[f.jsx("li",{children:f.jsx(Ge,{to:"/solution/feedback-analysis",className:"text-sm text-white/70 hover:text-white transition-colors duration-300 inline-block hover:-translate-y-0.5 transition-transform duration-300",children:"Feedback Analysis"})}),f.jsx("li",{children:f.jsx(Ge,{to:"/solution/executive-reporting",className:"text-sm text-white/70 hover:text-white transition-colors duration-300 inline-block hover:-translate-y-0.5 transition-transform duration-300",children:"Executive Reporting"})}),f.jsx("li",{children:f.jsx(Ge,{to:"/solution/webhook-integration",className:"text-sm text-white/70 hover:text-white transition-colors duration-300 inline-block hover:-translate-y-0.5 transition-transform duration-300",children:"Webhook Integration"})}),f.jsx("li",{children:f.jsx("a",{href:"#pricing",onClick:a("pricing"),className:"text-sm text-white/70 hover:text-white transition-colors duration-300 inline-block hover:-translate-y-0.5 transition-transform duration-300",children:"Pricing"})})]})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-semibold text-white mb-4 uppercase tracking-wider",children:"Company"}),f.jsxs("ul",{className:"space-y-3",children:[f.jsx("li",{children:f.jsx(Ge,{to:"/company/about",className:"text-sm text-white/70 hover:text-white transition-colors duration-300 inline-block hover:-translate-y-0.5 transition-transform duration-300",children:"About Us"})}),f.jsx("li",{children:f.jsx(Ge,{to:"/company/documentation",className:"text-sm text-white/70 hover:text-white transition-colors duration-300 inline-block hover:-translate-y-0.5 transition-transform duration-300",children:"Documentation"})}),f.jsx("li",{children:f.jsx(Ge,{to:"/",className:"text-sm text-white/70 hover:text-white transition-colors duration-300 inline-block hover:-translate-y-0.5 transition-transform duration-300",children:"API Reference"})}),f.jsx("li",{children:f.jsx(Ge,{to:"/company/security",className:"text-sm text-white/70 hover:text-white transition-colors duration-300 inline-block hover:-translate-y-0.5 transition-transform duration-300",children:"Security"})})]})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-semibold text-white mb-4 uppercase tracking-wider",children:"Stay Ahead"}),f.jsx("p",{className:"text-sm text-white/70 leading-relaxed mb-6",children:"Join our enterprise waitlist for the latest in AI feedback intelligence."}),f.jsxs("form",{className:"space-y-3",onSubmit:o,children:[f.jsx("div",{className:"relative",children:f.jsx("input",{type:"email",value:t,onChange:c=>s(c.target.value),placeholder:"Enter your email",required:!0,className:"w-full px-4 py-3 rounded-lg bg-black/40 border border-white/10 text-white placeholder:text-white/40 text-sm outline-none focus:border-white/30 transition-colors duration-300"})}),f.jsx("button",{type:"submit",disabled:i==="success",className:"w-full px-6 py-3 rounded-lg bg-black/40 backdrop-blur-xl border border-white/10 text-white/80 font-semibold overflow-hidden group transition-all duration-300 hover:border-white/30",children:i==="success"?f.jsx("span",{className:"text-green-400",children:"Joined!"}):f.jsx("span",{className:"inline-block group-hover:-translate-y-1 transition-transform duration-300",children:"Subscribe"})})]})]})]}),f.jsxs("div",{className:"border-t border-white/10 pt-8 space-y-6",children:[f.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 text-sm",children:[f.jsx("div",{className:"text-white/60",children:" 2026 Revue.Ai. All rights reserved."}),f.jsxs("div",{className:"flex items-center gap-6",children:[f.jsx(Ge,{to:"/legal/privacy",className:"text-white/60 hover:text-white transition-colors duration-300",children:"Privacy Policy"}),f.jsx(Ge,{to:"/legal/terms",className:"text-white/60 hover:text-white transition-colors duration-300",children:"Terms of Service"}),f.jsx(Ge,{to:"/legal/cookie",className:"text-white/60 hover:text-white transition-colors duration-300",children:"Cookie Policy"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-2 h-2 rounded-full bg-white animate-pulse"}),f.jsx("span",{className:"text-white/60",children:"All systems operational"})]})]}),f.jsx("div",{className:"text-center text-white/60 text-sm",children:"Built for NxtWave X Open AI Hackathon 2026, scaling to enterprise soon."})]})]})]})}function NC(){return f.jsx("section",{className:"relative z-10 py-24 border-t border-white/10 bg-black/20",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-6 text-center",children:[f.jsx("h2",{className:"text-3xl font-bold text-white mb-12",children:"Built by the Team"}),f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:[f.jsxs("div",{className:"p-6 rounded-xl bg-white/5 border border-white/10 backdrop-blur-sm hover:bg-white/10 transition-colors",children:[f.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-white/10 flex items-center justify-center text-white font-bold text-xl",children:"SN"}),f.jsx("div",{className:"text-white font-semibold mb-1",children:"Sameh Nadeem"}),f.jsx("div",{className:"text-white/60 text-sm",children:"AI n8n Automation & UI Design"})]}),f.jsxs("div",{className:"p-6 rounded-xl bg-white/5 border border-white/10 backdrop-blur-sm hover:bg-white/10 transition-colors",children:[f.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-white/10 flex items-center justify-center text-white font-bold text-xl",children:"SK"}),f.jsx("div",{className:"text-white font-semibold mb-1",children:"Saad Khan"}),f.jsx("div",{className:"text-white/60 text-sm",children:"Frontend"})]}),f.jsxs("div",{className:"p-6 rounded-xl bg-white/5 border border-white/10 backdrop-blur-sm hover:bg-white/10 transition-colors",children:[f.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-white/10 flex items-center justify-center text-white font-bold text-xl",children:"AL"}),f.jsx("div",{className:"text-white font-semibold mb-1",children:"Ali"}),f.jsx("div",{className:"text-white/60 text-sm",children:"AI & Prompt Engineering"})]}),f.jsxs("div",{className:"p-6 rounded-xl bg-white/5 border border-white/10 backdrop-blur-sm hover:bg-white/10 transition-colors",children:[f.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-white/10 flex items-center justify-center text-white font-bold text-xl",children:"MN"}),f.jsx("div",{className:"text-white font-semibold mb-1",children:"Mohammmad Nithash"}),f.jsx("div",{className:"text-white/60 text-sm",children:"Frontend"})]})]})]})})}function TC(){const n=bo();return f.jsxs("div",{className:"min-h-screen bg-dark-blue relative overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`
            linear-gradient(rgba(255, 255, 255, 0.1) 1px, transparent 1px),
            linear-gradient(90deg, rgba(255, 255, 255, 0.1) 1px, transparent 1px)
          `,backgroundSize:"50px 50px"}}),f.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[f.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-white/5 rounded-full blur-3xl"}),f.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-white/5 rounded-full blur-3xl"}),f.jsx("div",{className:"absolute top-1/2 left-1/2 w-96 h-96 bg-white/5 rounded-full blur-3xl"})]}),f.jsx(Jo,{}),f.jsx("main",{className:"relative z-10 max-w-7xl mx-auto px-6 pt-24 pb-12",children:f.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[f.jsxs("div",{className:"space-y-8",children:[f.jsx("h1",{className:"text-5xl md:text-6xl lg:text-7xl font-bold text-white leading-tight tracking-tight",children:"Turn Customer Voice into Business Vision."}),f.jsx("p",{className:"text-lg text-white/70 leading-relaxed max-w-xl",children:"Revue.Ai is the intelligent bridge between customer feedback and business strategy. Submit reviews, unlock hidden patterns through AI analysis, and export professional reports designed for your leadership team."}),f.jsx("div",{className:"flex flex-wrap gap-4",children:f.jsx("button",{onClick:()=>n("/app"),className:"relative px-6 py-3 rounded-lg bg-gradient-to-r from-white/20 via-white/15 to-white/10 backdrop-blur-xl border border-white/20 text-white font-semibold overflow-hidden group transition-all duration-300 hover:from-white/25 hover:via-white/20 hover:to-white/15 shadow-lg",children:f.jsx("span",{className:"inline-block group-hover:-translate-y-1 transition-transform duration-300",children:"Get started"})})})]}),f.jsx("div",{className:"flex justify-center lg:justify-end",children:f.jsx(kC,{})})]})}),f.jsxs("section",{id:"about",className:"relative z-10 py-24",children:[f.jsx("div",{className:"max-w-7xl mx-auto px-6 mb-32",children:f.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-start",children:[f.jsx("div",{children:f.jsx("h2",{className:"text-5xl md:text-6xl lg:text-7xl font-bold text-white leading-tight tracking-tight mb-6",children:"From raw feedback to strategic foresight."})}),f.jsxs("div",{className:"space-y-6 pt-8 lg:pt-16",children:[f.jsx("h3",{className:"text-3xl font-semibold text-white uppercase",children:"WHY REVUE.AI?"}),f.jsx("p",{className:"text-lg text-white/70 leading-relaxed",children:"In the enterprise world, feedback is everywhere, but insight is rare. Most businesses are drowning in data but starving for actionable truth. We built Revue.Ai to act as an intelligent filterstripping away the noise and highlighting the specific sentiments that drive growth, retention, and product innovation."})]})]})}),f.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[f.jsx("div",{className:"mb-16",children:f.jsx("h3",{className:"text-4xl md:text-5xl font-bold text-white text-center mb-4",children:"Process"})}),f.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[f.jsxs("div",{className:"rounded-xl border border-white/10 bg-black/40 backdrop-blur-xl p-8 transition-all duration-300",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("svg",{className:"w-12 h-12 text-white mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),f.jsx("h4",{className:"text-2xl font-semibold text-white mb-3",children:"Ingest"})]}),f.jsx("p",{className:"text-white/70 leading-relaxed",children:"Collect feedback from multiple sources through our secure, persistent webhook integration. Your data flows seamlessly into our system with enterprise-grade encryption and reliability."})]}),f.jsxs("div",{className:"rounded-xl border border-white/10 bg-black/40 backdrop-blur-xl p-8 transition-all duration-300",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("svg",{className:"w-12 h-12 text-white mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),f.jsx("h4",{className:"text-2xl font-semibold text-white mb-3",children:"Analyze"})]}),f.jsx("p",{className:"text-white/70 leading-relaxed",children:"Our AI engine processes thousands of data points, identifying patterns, sentiments, and actionable insights. Advanced algorithms surface hidden trends that inform strategic decisions."})]}),f.jsxs("div",{className:"rounded-xl border border-white/10 bg-black/40 backdrop-blur-xl p-8 transition-all duration-300",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("svg",{className:"w-12 h-12 text-white mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),f.jsx("h4",{className:"text-2xl font-semibold text-white mb-3",children:"Report"})]}),f.jsx("p",{className:"text-white/70 leading-relaxed",children:"Generate executive-ready reports with visualizations, key metrics, and strategic recommendations. Export in multiple formats tailored for your leadership team's needs."})]})]})]})]}),f.jsx("section",{className:"relative z-10 py-24 bg-black/20",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[f.jsxs("div",{className:"text-center mb-16",children:[f.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:"Powered by Advanced Technology"}),f.jsx("p",{className:"text-lg text-white/70 max-w-2xl mx-auto",children:"Built on cutting-edge orchestration and AI capabilitiesnot just a wrapper, but a true decision engine."})]}),f.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[f.jsxs("div",{className:"rounded-xl border border-white/10 bg-black/40 backdrop-blur-xl p-8 hover:-translate-y-2 transition-transform duration-300",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("svg",{className:"w-12 h-12 text-white mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),f.jsx("h3",{className:"text-2xl font-semibold text-white mb-3",children:"n8n Orchestration"})]}),f.jsx("p",{className:"text-white/70 leading-relaxed",children:"Enterprise-grade workflow orchestration that connects data sources and processes complex pipelines with scalable automation."})]}),f.jsxs("div",{className:"rounded-xl border border-white/10 bg-black/40 backdrop-blur-xl p-8 hover:-translate-y-2 transition-transform duration-300",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("svg",{className:"w-12 h-12 text-white mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),f.jsx("h3",{className:"text-2xl font-semibold text-white mb-3",children:"AI Decision Engine"})]}),f.jsx("p",{className:"text-white/70 leading-relaxed",children:"Not just a wrappera true decision engine. Analyzes patterns, identifies opportunities, and generates actionable recommendations with reasoning and risk assessment."})]}),f.jsxs("div",{className:"rounded-xl border border-white/10 bg-black/40 backdrop-blur-xl p-8 hover:-translate-y-2 transition-transform duration-300",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("svg",{className:"w-12 h-12 text-white mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),f.jsx("h3",{className:"text-2xl font-semibold text-white mb-3",children:"AI Chatbot"})]}),f.jsx("p",{className:"text-white/70 leading-relaxed",children:"Intelligent conversational AI that understands context and provides real-time insights about your feedback data, trends, and recommendations."})]}),f.jsxs("div",{className:"rounded-xl border border-white/10 bg-black/40 backdrop-blur-xl p-8 hover:-translate-y-2 transition-transform duration-300",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("svg",{className:"w-12 h-12 text-white mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),f.jsx("h3",{className:"text-2xl font-semibold text-white mb-3",children:"Advanced AI Capabilities"})]}),f.jsx("p",{className:"text-white/70 leading-relaxed",children:"Sentiment analysis, persona identification, trend detection, and predictive insights. Understands context and surfaces strategic intelligence."})]}),f.jsxs("div",{className:"rounded-xl border border-white/10 bg-black/40 backdrop-blur-xl p-8 hover:-translate-y-2 transition-transform duration-300",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("svg",{className:"w-12 h-12 text-white mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-6z"})}),f.jsx("h3",{className:"text-2xl font-semibold text-white mb-3",children:"Real-time Processing"})]}),f.jsx("p",{className:"text-white/70 leading-relaxed",children:"Webhook-driven architecture processes feedback instantly. Get AI-powered decisions in seconds without compromising depth of analysis."})]}),f.jsxs("div",{className:"rounded-xl border border-white/10 bg-black/40 backdrop-blur-xl p-8 hover:-translate-y-2 transition-transform duration-300",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("svg",{className:"w-12 h-12 text-white mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),f.jsx("h3",{className:"text-2xl font-semibold text-white mb-3",children:"Enterprise Integration"})]}),f.jsx("p",{className:"text-white/70 leading-relaxed",children:"Secure webhook endpoints and API-first architecture. Seamlessly integrate with your existing tools and export reports effortlessly."})]})]})]})}),f.jsx("section",{id:"pricing",className:"relative z-10 py-24",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[f.jsxs("div",{className:"text-center mb-16",children:[f.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:"Choose Your Plan"}),f.jsx("p",{className:"text-lg text-white/70",children:"Flexible pricing for teams of all sizes"})]}),f.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[f.jsxs("div",{className:"rounded-xl border border-white/10 bg-black/40 backdrop-blur-xl p-8 hover:-translate-y-2 transition-transform duration-300 shadow-lg",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("svg",{className:"w-12 h-12 text-white mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h4a1 1 0 011 1v7a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v7a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 16a1 1 0 011-1h4a1 1 0 011 1v3a1 1 0 01-1 1H5a1 1 0 01-1-1v-3zM14 16a1 1 0 011-1h4a1 1 0 011 1v3a1 1 0 01-1 1h-4a1 1 0 01-1-1v-3z"})}),f.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Starter"}),f.jsx("p",{className:"text-white/70 text-sm",children:"Small Agencies / SaaS"})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("div",{className:"text-4xl font-bold text-white mb-1",children:"4,999"}),f.jsx("div",{className:"text-sm text-white/60",children:"PER MONTH"})]}),f.jsx("button",{className:"w-full mb-6 px-6 py-3 rounded-lg bg-black/40 backdrop-blur-xl border border-white/10 text-white/80 font-semibold overflow-hidden group/btn transition-all duration-300",children:f.jsx("span",{className:"inline-block group-hover/btn:-translate-y-1 transition-transform duration-300",children:"Get Started"})}),f.jsxs("div",{className:"border-t border-white/10 pt-6",children:[f.jsx("h4",{className:"text-sm font-semibold text-white mb-4",children:"WHAT'S INCLUDED"}),f.jsxs("ul",{className:"space-y-3",children:[f.jsxs("li",{className:"flex items-start gap-3",children:[f.jsx("svg",{className:"w-5 h-5 text-white mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),f.jsx("span",{className:"text-sm text-white/70",children:"Up to 1,400 reviews"})]}),f.jsxs("li",{className:"flex items-start gap-3",children:[f.jsx("svg",{className:"w-5 h-5 text-white mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),f.jsx("span",{className:"text-sm text-white/70",children:"Standard Webhook"})]}),f.jsxs("li",{className:"flex items-start gap-3",children:[f.jsx("svg",{className:"w-5 h-5 text-white mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),f.jsx("span",{className:"text-sm text-white/70",children:"Automated Sentiment Tagging"})]})]})]})]}),f.jsxs("div",{className:"rounded-xl border border-white/10 bg-black/40 backdrop-blur-xl p-8 hover:-translate-y-2 transition-transform duration-300 shadow-lg",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("svg",{className:"w-12 h-12 text-white mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})}),f.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Business"}),f.jsx("p",{className:"text-white/70 text-sm",children:"Mid-size Enterprise"})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("div",{className:"text-4xl font-bold text-white mb-1",children:"11,999"}),f.jsx("div",{className:"text-sm text-white/60",children:"PER MONTH"})]}),f.jsx("button",{className:"w-full mb-6 px-6 py-3 rounded-lg bg-black/40 backdrop-blur-xl border border-white/10 text-white/80 font-semibold overflow-hidden group/btn transition-all duration-300",children:f.jsx("span",{className:"inline-block group-hover/btn:-translate-y-1 transition-transform duration-300",children:"Get Started"})}),f.jsxs("div",{className:"border-t border-white/10 pt-6",children:[f.jsx("h4",{className:"text-sm font-semibold text-white mb-4",children:"EVERYTHING IN STARTER, PLUS"}),f.jsxs("ul",{className:"space-y-3",children:[f.jsxs("li",{className:"flex items-start gap-3",children:[f.jsx("svg",{className:"w-5 h-5 text-white mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),f.jsx("span",{className:"text-sm text-white/70",children:"8,000 reviews"})]}),f.jsxs("li",{className:"flex items-start gap-3",children:[f.jsx("svg",{className:"w-5 h-5 text-white mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),f.jsx("span",{className:"text-sm text-white/70",children:"Priority Webhooks"})]}),f.jsxs("li",{className:"flex items-start gap-3",children:[f.jsx("svg",{className:"w-5 h-5 text-white mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),f.jsx("span",{className:"text-sm text-white/70",children:'Custom AI "Themes"'})]}),f.jsxs("li",{className:"flex items-start gap-3",children:[f.jsx("svg",{className:"w-5 h-5 text-white mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),f.jsx("span",{className:"text-sm text-white/70",children:"Professional PDF Reports"})]})]})]})]}),f.jsxs("div",{className:"rounded-xl border border-white/10 bg-black/40 backdrop-blur-xl p-8 hover:-translate-y-2 transition-transform duration-300 shadow-lg",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("svg",{className:"w-12 h-12 text-white mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),f.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Enterprise"}),f.jsx("p",{className:"text-white/70 text-sm",children:"Large Scale / Govt"})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("div",{className:"text-4xl font-bold text-white mb-1",children:"49,999"}),f.jsx("div",{className:"text-sm text-white/60",children:"PER MONTH"})]}),f.jsx("button",{className:"w-full mb-6 px-6 py-3 rounded-lg bg-black/40 backdrop-blur-xl border border-white/10 text-white/80 font-semibold overflow-hidden group/btn transition-all duration-300",children:f.jsx("span",{className:"inline-block group-hover/btn:-translate-y-1 transition-transform duration-300",children:"Contact Sales"})}),f.jsxs("div",{className:"border-t border-white/10 pt-6",children:[f.jsx("h4",{className:"text-sm font-semibold text-white mb-4",children:"EVERYTHING IN BUSINESS, PLUS"}),f.jsxs("ul",{className:"space-y-3",children:[f.jsxs("li",{className:"flex items-start gap-3",children:[f.jsx("svg",{className:"w-5 h-5 text-white mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),f.jsx("span",{className:"text-sm text-white/70",children:"Unlimited reviews"})]}),f.jsxs("li",{className:"flex items-start gap-3",children:[f.jsx("svg",{className:"w-5 h-5 text-white mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),f.jsx("span",{className:"text-sm text-white/70",children:"Dedicated AI Model"})]}),f.jsxs("li",{className:"flex items-start gap-3",children:[f.jsx("svg",{className:"w-5 h-5 text-white mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),f.jsx("span",{className:"text-sm text-white/70",children:"SSO (Single Sign-On)"})]}),f.jsxs("li",{className:"flex items-start gap-3",children:[f.jsx("svg",{className:"w-5 h-5 text-white mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),f.jsx("span",{className:"text-sm text-white/70",children:"24/7 Support"})]}),f.jsxs("li",{className:"flex items-start gap-3",children:[f.jsx("svg",{className:"w-5 h-5 text-white mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),f.jsx("span",{className:"text-sm text-white/70",children:"Custom SLA"})]})]})]})]})]})]})}),f.jsx(NC,{}),f.jsx(Zo,{})]})}var ou={};ou.d=(n,e)=>{for(var t in e)ou.o(e,t)&&!ou.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})};ou.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var K=globalThis.pdfjsLib={};ou.d(K,{AbortException:()=>zr,AnnotationEditorLayer:()=>O0,AnnotationEditorParamsType:()=>ce,AnnotationEditorType:()=>ne,AnnotationEditorUIManager:()=>mo,AnnotationLayer:()=>EN,AnnotationMode:()=>qi,ColorPicker:()=>ep,DOMSVGFactory:()=>Zv,DrawLayer:()=>H0,FeatureTest:()=>Wt,GlobalWorkerOptions:()=>Ci,ImageKind:()=>Xd,InvalidPDFException:()=>Rg,MissingPDFException:()=>Cu,OPS:()=>ts,OutputScale:()=>Mg,PDFDataRangeTransport:()=>AA,PDFDateString:()=>qv,PDFWorker:()=>tl,PasswordResponses:()=>MC,PermissionFlag:()=>LC,PixelsPerInch:()=>Br,RenderingCancelledException:()=>Xv,TextLayer:()=>Nu,TouchManager:()=>Jf,UnexpectedResponseException:()=>qf,Util:()=>W,VerbosityLevel:()=>Up,XfaLayer:()=>EA,build:()=>iN,createValidAbsoluteUrl:()=>FC,fetchData:()=>Gp,getDocument:()=>q2,getFilenameFromUrl:()=>GC,getPdfFilenameFromUrl:()=>XC,getXfaPageViewport:()=>YC,isDataScheme:()=>Xp,isPdfFile:()=>Yv,noContextMenu:()=>xs,normalizeUnicode:()=>$C,setLayerDimensions:()=>po,shadow:()=>ae,stopEvent:()=>_n,version:()=>sN});const Mt=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),b1=[1,0,0,1,0,0],Pg=[.001,0,0,.001,0,0],PC=1e7,km=1.35,An={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},qi={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},RC="pdfjs_internal_editor_",ne={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},ce={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},LC={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Et={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Xd={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Qe={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},Nc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Up={ERRORS:0,WARNINGS:1,INFOS:5},ts={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},MC={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let $p=Up.WARNINGS;function IC(n){Number.isInteger(n)&&($p=n)}function jC(){return $p}function Vp(n){$p>=Up.INFOS&&console.log(`Info: ${n}`)}function se(n){$p>=Up.WARNINGS&&console.log(`Warning: ${n}`)}function xe(n){throw new Error(n)}function Ye(n,e){n||xe(e)}function DC(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function FC(n,e=null,t=null){if(!n)return null;try{if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const i=n.match(/\./g);(i==null?void 0:i.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=UC(n)}catch{}}const s=e?new URL(n,e):new URL(n);if(DC(s))return s}catch{}return null}function ae(n,e,t,s=!1){return Object.defineProperty(n,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const Wr=function(){function e(t,s){this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e}();class Sw extends Wr{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Cm extends Wr{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Rg extends Wr{constructor(e){super(e,"InvalidPDFException")}}class Cu extends Wr{constructor(e){super(e,"MissingPDFException")}}class qf extends Wr{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class OC extends Wr{constructor(e){super(e,"FormatError")}}class zr extends Wr{constructor(e){super(e,"AbortException")}}function A1(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&xe("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const s=[];for(let i=0;i<e;i+=t){const r=Math.min(i+t,e),a=n.subarray(i,r);s.push(String.fromCharCode.apply(null,a))}return s.join("")}function Wp(n){typeof n!="string"&&xe("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=n.charCodeAt(s)&255;return t}function zC(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function Wv(n){const e=Object.create(null);for(const[t,s]of n)e[t]=s;return e}function BC(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function HC(){try{return new Function(""),!0}catch{return!1}}class Wt{static get isLittleEndian(){return ae(this,"isLittleEndian",BC())}static get isEvalSupported(){return ae(this,"isEvalSupported",HC())}static get isOffscreenCanvasSupported(){return ae(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return ae(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?ae(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):ae(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return ae(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const Nm=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var Li,Yd,Lg;class W{static makeHexColor(e,t,s){return`#${Nm[e]}${Nm[t]}${Nm[s]}`}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const s=e[0]*t[0]+e[1]*t[2]+t[4],i=e[0]*t[1]+e[1]*t[3]+t[5];return[s,i]}static applyInverseTransform(e,t){const s=t[0]*t[3]-t[1]*t[2],i=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/s,r=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/s;return[i,r]}static getAxialAlignedBoundingBox(e,t){const s=this.applyTransform(e,t),i=this.applyTransform(e.slice(2,4),t),r=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(s[0],i[0],r[0],a[0]),Math.min(s[1],i[1],r[1],a[1]),Math.max(s[0],i[0],r[0],a[0]),Math.max(s[1],i[1],r[1],a[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],s=e[0]*t[0]+e[1]*t[2],i=e[0]*t[1]+e[1]*t[3],r=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],o=(s+a)/2,c=Math.sqrt((s+a)**2-4*(s*a-r*i))/2,u=o+c||1,h=o-c||1;return[Math.sqrt(u),Math.sqrt(h)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>i)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>a?null:[s,r,i,a]}static bezierBoundingBox(e,t,s,i,r,a,o,c,u){return u?(u[0]=Math.min(u[0],e,o),u[1]=Math.min(u[1],t,c),u[2]=Math.max(u[2],e,o),u[3]=Math.max(u[3],t,c)):u=[Math.min(e,o),Math.min(t,c),Math.max(e,o),Math.max(t,c)],A(this,Li,Lg).call(this,e,s,r,o,t,i,a,c,3*(-e+3*(s-r)+o),6*(e-2*s+r),3*(s-e),u),A(this,Li,Lg).call(this,e,s,r,o,t,i,a,c,3*(-t+3*(i-a)+c),6*(t-2*i+a),3*(i-t),u),u}}Li=new WeakSet,Yd=function(e,t,s,i,r,a,o,c,u,h){if(u<=0||u>=1)return;const d=1-u,p=u*u,m=p*u,v=d*(d*(d*e+3*u*t)+3*p*s)+m*i,w=d*(d*(d*r+3*u*a)+3*p*o)+m*c;h[0]=Math.min(h[0],v),h[1]=Math.min(h[1],w),h[2]=Math.max(h[2],v),h[3]=Math.max(h[3],w)},Lg=function(e,t,s,i,r,a,o,c,u,h,d,p){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&A(this,Li,Yd).call(this,e,t,s,i,r,a,o,c,-d/h,p);return}const m=h**2-4*d*u;if(m<0)return;const v=Math.sqrt(m),w=2*u;A(this,Li,Yd).call(this,e,t,s,i,r,a,o,c,(-h+v)/w,p),A(this,Li,Yd).call(this,e,t,s,i,r,a,o,c,(-h-v)/w,p)},b(W,Li);function UC(n){return decodeURIComponent(escape(n))}let Tm=null,Ew=null;function $C(n){return Tm||(Tm=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Ew=new Map([["","t"]])),n.replaceAll(Tm,(e,t,s)=>t?t.normalize("NFKC"):Ew.get(s))}function VC(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),A1(n)}const Gv="pdfjs_internal_id_";function WC(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(A1(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});const qs="http://www.w3.org/2000/svg",Qr=class Qr{};X(Qr,"CSS",96),X(Qr,"PDF",72),X(Qr,"PDF_TO_CSS_UNITS",Qr.CSS/Qr.PDF);let Br=Qr;async function Gp(n,e="text"){if(Dc(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}s(new Error(i.statusText))}},i.send(null)})}class ld{constructor({viewBox:e,userUnit:t,scale:s,rotation:i,offsetX:r=0,offsetY:a=0,dontFlip:o=!1}){this.viewBox=e,this.userUnit=t,this.scale=s,this.rotation=i,this.offsetX=r,this.offsetY=a,s*=t;const c=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let h,d,p,m;switch(i%=360,i<0&&(i+=360),i){case 180:h=-1,d=0,p=0,m=1;break;case 90:h=0,d=1,p=1,m=0;break;case 270:h=0,d=-1,p=-1,m=0;break;case 0:h=1,d=0,p=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(p=-p,m=-m);let v,w,E,y;h===0?(v=Math.abs(u-e[1])*s+r,w=Math.abs(c-e[0])*s+a,E=(e[3]-e[1])*s,y=(e[2]-e[0])*s):(v=Math.abs(c-e[0])*s+r,w=Math.abs(u-e[1])*s+a,E=(e[2]-e[0])*s,y=(e[3]-e[1])*s),this.transform=[h*s,d*s,p*s,m*s,v-h*s*c-p*s*u,w-d*s*c-m*s*u],this.width=E,this.height=y}get rawDims(){const{userUnit:e,viewBox:t}=this,s=t.map(i=>i*e);return ae(this,"rawDims",{pageWidth:s[2]-s[0],pageHeight:s[3]-s[1],pageX:s[0],pageY:s[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new ld({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:r})}convertToViewportPoint(e,t){return W.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=W.applyTransform([e[0],e[1]],this.transform),s=W.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){return W.applyInverseTransform([e,t],this.transform)}}class Xv extends Wr{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Xp(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function Yv(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function GC(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function XC(n,e="document.pdf"){if(typeof n!="string")return e;if(Xp(n))return se('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=t.exec(n);let r=s.exec(i[1])||s.exec(i[2])||s.exec(i[3]);if(r&&(r=r[0],r.includes("%")))try{r=s.exec(decodeURIComponent(r))[0]}catch{}return r||e}class _w{constructor(){X(this,"started",Object.create(null));X(this,"times",[])}time(e){e in this.started&&se(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||se(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:i,end:r}of this.times)e.push(`${s.padEnd(t)} ${r-i}ms
`);return e.join("")}}function Dc(n,e){try{const{protocol:t}=e?new URL(n,e):new URL(n);return t==="http:"||t==="https:"}catch{return!1}}function xs(n){n.preventDefault()}function _n(n){n.preventDefault(),n.stopPropagation()}var Pu;class qv{static toDateObject(e){if(!e||typeof e!="string")return null;l(this,Pu)||g(this,Pu,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=l(this,Pu).exec(e);if(!t)return null;const s=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const u=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,u==="-"?(a+=h,o+=d):u==="+"&&(a-=h,o-=d),new Date(Date.UTC(s,i,r,a,o,c))}}Pu=new WeakMap,b(qv,Pu);function YC(n,{scale:e=1,rotation:t=0}){const{width:s,height:i}=n.attributes.style,r=[0,0,parseInt(s),parseInt(i)];return new ld({viewBox:r,userUnit:1,scale:e,rotation:t})}function Kv(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(se(`Not a valid color format: "${n}"`),[0,0,0])}function qC(n){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of n.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;n.set(t,Kv(s))}e.remove()}function Ne(n){const{a:e,b:t,c:s,d:i,e:r,f:a}=n.getTransform();return[e,t,s,i,r,a]}function Ss(n){const{a:e,b:t,c:s,d:i,e:r,f:a}=n.getTransform().invertSelf();return[e,t,s,i,r,a]}function po(n,e,t=!1,s=!0){if(e instanceof ld){const{pageWidth:i,pageHeight:r}=e.rawDims,{style:a}=n,o=Wt.isCSSRoundSupported,c=`var(--scale-factor) * ${i}px`,u=`var(--scale-factor) * ${r}px`,h=o?`round(down, ${c}, var(--scale-round-x, 1px))`:`calc(${c})`,d=o?`round(down, ${u}, var(--scale-round-y, 1px))`:`calc(${u})`;!t||e.rotation%180===0?(a.width=h,a.height=d):(a.width=d,a.height=h)}s&&n.setAttribute("data-main-rotation",e.rotation)}class Mg{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var Ki,na,ns,sa,Ru,Lu,sp,S1,Gt,E1,_1,qd,k1,jg;const Zs=class Zs{constructor(e){b(this,Gt);b(this,Ki,null);b(this,na,null);b(this,ns);b(this,sa,null);b(this,Ru,null);g(this,ns,e),l(Zs,Lu)||g(Zs,Lu,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=g(this,Ki,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=l(this,ns)._uiManager._signal;e.addEventListener("contextmenu",xs,{signal:t}),e.addEventListener("pointerdown",A(Zs,sp,S1),{signal:t});const s=g(this,sa,document.createElement("div"));s.className="buttons",e.append(s);const i=l(this,ns).toolbarPosition;if(i){const{style:r}=e,a=l(this,ns)._uiManager.direction==="ltr"?1-i[0]:i[0];r.insetInlineEnd=`${100*a}%`,r.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return A(this,Gt,k1).call(this),e}get div(){return l(this,Ki)}hide(){var e;l(this,Ki).classList.add("hidden"),(e=l(this,na))==null||e.hideDropdown()}show(){var e;l(this,Ki).classList.remove("hidden"),(e=l(this,Ru))==null||e.shown()}async addAltText(e){const t=await e.render();A(this,Gt,qd).call(this,t),l(this,sa).prepend(t,l(this,Gt,jg)),g(this,Ru,e)}addColorPicker(e){g(this,na,e);const t=e.renderButton();A(this,Gt,qd).call(this,t),l(this,sa).prepend(t,l(this,Gt,jg))}remove(){var e;l(this,Ki).remove(),(e=l(this,na))==null||e.destroy(),g(this,na,null)}};Ki=new WeakMap,na=new WeakMap,ns=new WeakMap,sa=new WeakMap,Ru=new WeakMap,Lu=new WeakMap,sp=new WeakSet,S1=function(e){e.stopPropagation()},Gt=new WeakSet,E1=function(e){l(this,ns)._focusEventsAllowed=!1,_n(e)},_1=function(e){l(this,ns)._focusEventsAllowed=!0,_n(e)},qd=function(e){const t=l(this,ns)._uiManager._signal;e.addEventListener("focusin",A(this,Gt,E1).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",A(this,Gt,_1).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",xs,{signal:t})},k1=function(){const{editorType:e,_uiManager:t}=l(this,ns),s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",l(Zs,Lu)[e]),A(this,Gt,qd).call(this,s),s.addEventListener("click",i=>{t.delete()},{signal:t._signal}),l(this,sa).append(s)},jg=function(){const e=document.createElement("div");return e.className="divider",e},b(Zs,sp),b(Zs,Lu,null);let Ig=Zs;var Mu,ia,ra,Hr,C1,N1,T1;class KC{constructor(e){b(this,Hr);b(this,Mu,null);b(this,ia,null);b(this,ra);g(this,ra,e)}show(e,t,s){const[i,r]=A(this,Hr,N1).call(this,t,s),{style:a}=l(this,ia)||g(this,ia,A(this,Hr,C1).call(this));e.append(l(this,ia)),a.insetInlineEnd=`${100*i}%`,a.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,ia).remove()}}Mu=new WeakMap,ia=new WeakMap,ra=new WeakMap,Hr=new WeakSet,C1=function(){const e=g(this,ia,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",xs,{signal:l(this,ra)._signal});const t=g(this,Mu,document.createElement("div"));return t.className="buttons",e.append(t),A(this,Hr,T1).call(this),e},N1=function(e,t){let s=0,i=0;for(const r of e){const a=r.y+r.height;if(a<s)continue;const o=r.x+(t?r.width:0);if(a>s){i=o,s=a;continue}t?o>i&&(i=o):o<i&&(i=o)}return[t?1-i:i,s]},T1=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=l(this,ra)._signal;e.addEventListener("contextmenu",xs,{signal:s}),e.addEventListener("click",()=>{l(this,ra).highlightSelection("floating_button")},{signal:s}),l(this,Mu).append(e)};function Kf(n,e,t){for(const s of t)e.addEventListener(s,n[s].bind(n))}var ip;class QC{constructor(){b(this,ip,0)}get id(){return`${RC}${Dt(this,ip)._++}`}}ip=new WeakMap;var nl,Iu,Ct,sl,Kd;const ty=class ty{constructor(){b(this,sl);b(this,nl,VC());b(this,Iu,0);b(this,Ct,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const r=i.decode().then(()=>(s.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return ae(this,"_isSVGFittingCanvas",r)}async getFromFile(e){const{lastModified:t,name:s,size:i,type:r}=e;return A(this,sl,Kd).call(this,`${t}_${s}_${i}_${r}`,e)}async getFromUrl(e){return A(this,sl,Kd).call(this,e,e)}async getFromBlob(e,t){const s=await t;return A(this,sl,Kd).call(this,e,s)}async getFromId(e){l(this,Ct)||g(this,Ct,new Map);const t=l(this,Ct).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:s}=t;return delete t.blobPromise,this.getFromBlob(t.id,s)}return this.getFromUrl(t.url)}getFromCanvas(e,t){l(this,Ct)||g(this,Ct,new Map);let s=l(this,Ct).get(e);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),s={bitmap:i.transferToImageBitmap(),id:`image_${l(this,nl)}_${Dt(this,Iu)._++}`,refCounter:1,isSvg:!1},l(this,Ct).set(e,s),l(this,Ct).set(s.id,s),s}getSvgUrl(e){const t=l(this,Ct).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var i;l(this,Ct)||g(this,Ct,new Map);const t=l(this,Ct).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:s}=t;if(!t.url&&!t.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),t.blobPromise=r.convertToBlob()}(i=s.close)==null||i.call(s),t.bitmap=null}isValidId(e){return e.startsWith(`image_${l(this,nl)}_`)}};nl=new WeakMap,Iu=new WeakMap,Ct=new WeakMap,sl=new WeakSet,Kd=async function(e,t){l(this,Ct)||g(this,Ct,new Map);let s=l(this,Ct).get(e);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${l(this,nl)}_${Dt(this,Iu)._++}`,refCounter:0,isSvg:!1});let i;if(typeof t=="string"?(s.url=t,i=await Gp(t,"blob")):t instanceof File?i=s.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const r=ty._isSVGFittingCanvas,a=new FileReader,o=new Image,c=new Promise((u,h)=>{o.onload=()=>{s.bitmap=o,s.isSvg=!0,u()},a.onload=async()=>{const d=s.svgUrl=a.result;o.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},o.onerror=a.onerror=h});a.readAsDataURL(i),await c}else s.bitmap=await createImageBitmap(i);s.refCounter=1}catch(i){se(i),s=null}return l(this,Ct).set(e,s),s&&l(this,Ct).set(s.id,s),s};let Dg=ty;var He,Qi,ju,Le;class JC{constructor(e=128){b(this,He,[]);b(this,Qi,!1);b(this,ju);b(this,Le,-1);g(this,ju,e)}add({cmd:e,undo:t,post:s,mustExec:i,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(i&&e(),l(this,Qi))return;const c={cmd:e,undo:t,post:s,type:r};if(l(this,Le)===-1){l(this,He).length>0&&(l(this,He).length=0),g(this,Le,0),l(this,He).push(c);return}if(a&&l(this,He)[l(this,Le)].type===r){o&&(c.undo=l(this,He)[l(this,Le)].undo),l(this,He)[l(this,Le)]=c;return}const u=l(this,Le)+1;u===l(this,ju)?l(this,He).splice(0,1):(g(this,Le,u),u<l(this,He).length&&l(this,He).splice(u)),l(this,He).push(c)}undo(){if(l(this,Le)===-1)return;g(this,Qi,!0);const{undo:e,post:t}=l(this,He)[l(this,Le)];e(),t==null||t(),g(this,Qi,!1),g(this,Le,l(this,Le)-1)}redo(){if(l(this,Le)<l(this,He).length-1){g(this,Le,l(this,Le)+1),g(this,Qi,!0);const{cmd:e,post:t}=l(this,He)[l(this,Le)];e(),t==null||t(),g(this,Qi,!1)}}hasSomethingToUndo(){return l(this,Le)!==-1}hasSomethingToRedo(){return l(this,Le)<l(this,He).length-1}cleanType(e){if(l(this,Le)!==-1){for(let t=l(this,Le);t>=0;t--)if(l(this,He)[t].type!==e){l(this,He).splice(t+1,l(this,Le)-t),g(this,Le,t);return}l(this,He).length=0,g(this,Le,-1)}}destroy(){g(this,He,null)}}He=new WeakMap,Qi=new WeakMap,ju=new WeakMap,Le=new WeakMap;var rp,P1;class cd{constructor(e){b(this,rp);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Wt.platform;for(const[s,i,r={}]of e)for(const a of s){const o=a.startsWith("mac+");t&&o?(this.callbacks.set(a.slice(4),{callback:i,options:r}),this.allKeys.add(a.split("+").at(-1))):!t&&!o&&(this.callbacks.set(a,{callback:i,options:r}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(A(this,rp,P1).call(this,t));if(!s)return;const{callback:i,options:{bubbles:r=!1,args:a=[],checker:o=null}}=s;o&&!o(e,t)||(i.bind(e,...a,t)(),r||_n(t))}}rp=new WeakSet,P1=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const ap=class ap{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return qC(e),ae(this,"_colors",e)}convert(e){const t=Kv(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,i]of this._colors)if(i.every((r,a)=>r===t[a]))return ap._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?W.makeHexColor(...t):e}};X(ap,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Fg=ap;var il,un,Ze,ft,rl,ni,al,jn,Ji,aa,ol,oa,Cs,ss,la,Du,Fu,ll,Ou,Ns,Zi,cl,er,Ts,op,tr,zu,nr,ca,Bu,Hu,it,me,si,ua,Uu,$u,sr,Ps,ii,Vu,Dn,F,Qd,Og,R1,L1,Jd,M1,I1,j1,zg,D1,Bg,Hg,F1,Ot,Ks,O1,z1,Ug,B1,Fc,$g;const Vo=class Vo{constructor(e,t,s,i,r,a,o,c,u,h,d,p,m){b(this,F);b(this,il,new AbortController);b(this,un,null);b(this,Ze,new Map);b(this,ft,new Map);b(this,rl,null);b(this,ni,null);b(this,al,null);b(this,jn,new JC);b(this,Ji,null);b(this,aa,null);b(this,ol,0);b(this,oa,new Set);b(this,Cs,null);b(this,ss,null);b(this,la,new Set);X(this,"_editorUndoBar",null);b(this,Du,!1);b(this,Fu,!1);b(this,ll,!1);b(this,Ou,null);b(this,Ns,null);b(this,Zi,null);b(this,cl,null);b(this,er,!1);b(this,Ts,null);b(this,op,new QC);b(this,tr,!1);b(this,zu,!1);b(this,nr,null);b(this,ca,null);b(this,Bu,null);b(this,Hu,null);b(this,it,ne.NONE);b(this,me,new Set);b(this,si,null);b(this,ua,null);b(this,Uu,null);b(this,$u,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});b(this,sr,[0,0]);b(this,Ps,null);b(this,ii,null);b(this,Vu,null);b(this,Dn,null);const v=this._signal=l(this,il).signal;g(this,ii,e),g(this,Vu,t),g(this,rl,s),this._eventBus=i,i._on("editingaction",this.onEditingAction.bind(this),{signal:v}),i._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),i._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),i._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),i._on("setpreference",this.onSetPreference.bind(this),{signal:v}),i._on("switchannotationeditorparams",w=>this.updateParams(w.type,w.value),{signal:v}),A(this,F,M1).call(this),A(this,F,F1).call(this),A(this,F,zg).call(this),g(this,ni,r.annotationStorage),g(this,Ou,r.filterFactory),g(this,ua,a),g(this,cl,o||null),g(this,Du,c),g(this,Fu,u),g(this,ll,h),g(this,Hu,d||null),this.viewParameters={realScale:Br.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=p||null,this._supportsPinchToZoom=m!==!1}static get _keyboardManager(){const e=Vo.prototype,t=a=>l(a,ii).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),s=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:c}=o;return c!=="text"&&c!=="number"}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return ae(this,"_keyboardManager",new cd([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&l(a,ii).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&l(a,ii).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}destroy(){var e,t,s,i,r;(e=l(this,Dn))==null||e.resolve(),g(this,Dn,null),(t=l(this,il))==null||t.abort(),g(this,il,null),this._signal=null;for(const a of l(this,ft).values())a.destroy();l(this,ft).clear(),l(this,Ze).clear(),l(this,la).clear(),g(this,un,null),l(this,me).clear(),l(this,jn).destroy(),(s=l(this,rl))==null||s.destroy(),(i=l(this,Ts))==null||i.hide(),g(this,Ts,null),l(this,Ns)&&(clearTimeout(l(this,Ns)),g(this,Ns,null)),l(this,Ps)&&(clearTimeout(l(this,Ps)),g(this,Ps,null)),(r=this._editorUndoBar)==null||r.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return l(this,Hu)}get useNewAltTextFlow(){return l(this,Fu)}get useNewAltTextWhenAddingImage(){return l(this,ll)}get hcmFilter(){return ae(this,"hcmFilter",l(this,ua)?l(this,Ou).addHCMFilter(l(this,ua).foreground,l(this,ua).background):"none")}get direction(){return ae(this,"direction",getComputedStyle(l(this,ii)).direction)}get highlightColors(){return ae(this,"highlightColors",l(this,cl)?new Map(l(this,cl).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return ae(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),g(this,aa,e)}setMainHighlightColorPicker(e){g(this,Bu,e)}editAltText(e,t=!1){var s;(s=l(this,rl))==null||s.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":g(this,ll,t);break}}onPageChanging({pageNumber:e}){g(this,ol,e-1)}focusMainContainer(){l(this,ii).focus()}findParent(e,t){for(const s of l(this,ft).values()){const{x:i,y:r,width:a,height:o}=s.div.getBoundingClientRect();if(e>=i&&e<=i+a&&t>=r&&t<=r+o)return s}return null}disableUserSelect(e=!1){l(this,Vu).classList.toggle("noUserSelect",e)}addShouldRescale(e){l(this,la).add(e)}removeShouldRescale(e){l(this,la).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Br.PDF_TO_CSS_UNITS;for(const s of l(this,la))s.onScaleChanging();(t=l(this,aa))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:s,anchorOffset:i,focusNode:r,focusOffset:a}=t,o=t.toString(),u=A(this,F,Qd).call(this,t).closest(".textLayer"),h=this.getSelectionBoxes(u);if(!h)return;t.empty();const d=A(this,F,Og).call(this,u),p=l(this,it)===ne.NONE,m=()=>{d==null||d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:s,anchorOffset:i,focusNode:r,focusOffset:a,text:o}),p&&this.showAllEditors("highlight",!0,!0)};if(p){this.switchToMode(ne.HIGHLIGHT,m);return}m()}addToAnnotationStorage(e){!e.isEmpty()&&l(this,ni)&&!l(this,ni).has(e.id)&&l(this,ni).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,l(this,er)&&(g(this,er,!1),A(this,F,Jd).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of l(this,me))if(t.div.contains(e)){g(this,ca,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!l(this,ca))return;const[e,t]=l(this,ca);g(this,ca,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){A(this,F,zg).call(this),A(this,F,Bg).call(this)}removeEditListeners(){A(this,F,D1).call(this),A(this,F,Hg).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of l(this,ss))if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of l(this,ss))if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var s;if(e.preventDefault(),(s=l(this,un))==null||s.commitOrRemove(),!this.hasSelection)return;const t=[];for(const i of l(this,me)){const r=i.serialize(!0);r&&t.push(r)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const a of l(this,ss))if(a.isHandlingMimeForPasting(r.type)){a.paste(r,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(r){se(`paste: "${r.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const i=this.currentLayer;try{const r=[];for(const c of s){const u=await i.deserialize(c);if(!u)return;r.push(u)}const a=()=>{for(const c of r)A(this,F,Ug).call(this,c);A(this,F,$g).call(this,r)},o=()=>{for(const c of r)c.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(r){se(`paste: "${r.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,it)!==ne.NONE&&!this.isEditorHandlingKeyboard&&Vo._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,er)&&(g(this,er,!1),A(this,F,Jd).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(A(this,F,I1).call(this),A(this,F,Bg).call(this),A(this,F,Ot).call(this,{isEditing:l(this,it)!==ne.NONE,isEmpty:A(this,F,Fc).call(this),hasSomethingToUndo:l(this,jn).hasSomethingToUndo(),hasSomethingToRedo:l(this,jn).hasSomethingToRedo(),hasSelectedEditor:!1})):(A(this,F,j1).call(this),A(this,F,Hg).call(this),A(this,F,Ot).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!l(this,ss)){g(this,ss,e);for(const t of l(this,ss))A(this,F,Ks).call(this,t.defaultPropertiesToUpdate)}}getId(){return l(this,op).id}get currentLayer(){return l(this,ft).get(l(this,ol))}getLayer(e){return l(this,ft).get(e)}get currentPageIndex(){return l(this,ol)}addLayer(e){l(this,ft).set(e.pageIndex,e),l(this,tr)?e.enable():e.disable()}removeLayer(e){l(this,ft).delete(e.pageIndex)}async updateMode(e,t=null,s=!1){var i;if(l(this,it)!==e&&!(l(this,Dn)&&(await l(this,Dn).promise,!l(this,Dn)))){if(g(this,Dn,Promise.withResolvers()),g(this,it,e),e===ne.NONE){this.setEditingState(!1),A(this,F,z1).call(this),(i=this._editorUndoBar)==null||i.hide(),l(this,Dn).resolve();return}this.setEditingState(!0),await A(this,F,O1).call(this),this.unselectAll();for(const r of l(this,ft).values())r.updateMode(e);if(!t){s&&this.addNewEditorFromKeyboard(),l(this,Dn).resolve();return}for(const r of l(this,Ze).values())r.annotationElementId===t?(this.setSelected(r),r.enterInEditMode()):r.unselect();l(this,Dn).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==l(this,it)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var s;if(l(this,ss)){switch(e){case ce.CREATE:this.currentLayer.addNewEditor();return;case ce.HIGHLIGHT_DEFAULT_COLOR:(s=l(this,Bu))==null||s.updateColor(t);break;case ce.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,Uu)||g(this,Uu,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const i of l(this,me))i.updateParams(e,t);for(const i of l(this,ss))i.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){var r;for(const a of l(this,Ze).values())a.editorType===e&&a.show(t);(((r=l(this,Uu))==null?void 0:r.get(ce.HIGHLIGHT_SHOW_ALL))??!0)!==t&&A(this,F,Ks).call(this,[[ce.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(l(this,zu)!==e){g(this,zu,e);for(const t of l(this,ft).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const s of l(this,Ze).values())s.pageIndex===e&&t.push(s);return t}getEditor(e){return l(this,Ze).get(e)}addEditor(e){l(this,Ze).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(l(this,Ns)&&clearTimeout(l(this,Ns)),g(this,Ns,setTimeout(()=>{this.focusMainContainer(),g(this,Ns,null)},0))),l(this,Ze).delete(e.id),this.unselect(e),(!e.annotationElementId||!l(this,oa).has(e.annotationElementId))&&((t=l(this,ni))==null||t.remove(e.id))}addDeletedAnnotationElement(e){l(this,oa).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return l(this,oa).has(e)}removeDeletedAnnotationElement(e){l(this,oa).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){l(this,un)!==e&&(g(this,un,e),e&&A(this,F,Ks).call(this,e.propertiesToUpdate))}updateUI(e){l(this,F,B1)===e&&A(this,F,Ks).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){A(this,F,Ks).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(l(this,me).has(e)){l(this,me).delete(e),e.unselect(),A(this,F,Ot).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,me).add(e),e.select(),A(this,F,Ks).call(this,e.propertiesToUpdate),A(this,F,Ot).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;(t=l(this,aa))==null||t.commitOrRemove();for(const s of l(this,me))s!==e&&s.unselect();l(this,me).clear(),l(this,me).add(e),e.select(),A(this,F,Ks).call(this,e.propertiesToUpdate),A(this,F,Ot).call(this,{hasSelectedEditor:!0})}isSelected(e){return l(this,me).has(e)}get firstSelectedEditor(){return l(this,me).values().next().value}unselect(e){e.unselect(),l(this,me).delete(e),A(this,F,Ot).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,me).size!==0}get isEnterHandled(){return l(this,me).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;l(this,jn).undo(),A(this,F,Ot).call(this,{hasSomethingToUndo:l(this,jn).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:A(this,F,Fc).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){l(this,jn).redo(),A(this,F,Ot).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,jn).hasSomethingToRedo(),isEmpty:A(this,F,Fc).call(this)})}addCommands(e){l(this,jn).add(e),A(this,F,Ot).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:A(this,F,Fc).call(this)})}cleanUndoStack(e){l(this,jn).cleanType(e)}delete(){var r;this.commitOrRemove();const e=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...l(this,me)],s=()=>{var a;(a=this._editorUndoBar)==null||a.show(i,t.length===1?t[0].editorType:t.length);for(const o of t)o.remove()},i=()=>{for(const a of t)A(this,F,Ug).call(this,a)};this.addCommands({cmd:s,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=l(this,un))==null||e.commitOrRemove()}hasSomethingToControl(){return l(this,un)||this.hasSelection}selectAll(){for(const e of l(this,me))e.commit();A(this,F,$g).call(this,l(this,Ze).values())}unselectAll(){var e;if(!(l(this,un)&&(l(this,un).commitOrRemove(),l(this,it)!==ne.NONE))&&!((e=l(this,aa))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of l(this,me))t.unselect();l(this,me).clear(),A(this,F,Ot).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;l(this,sr)[0]+=e,l(this,sr)[1]+=t;const[i,r]=l(this,sr),a=[...l(this,me)],o=1e3;l(this,Ps)&&clearTimeout(l(this,Ps)),g(this,Ps,setTimeout(()=>{g(this,Ps,null),l(this,sr)[0]=l(this,sr)[1]=0,this.addCommands({cmd:()=>{for(const c of a)l(this,Ze).has(c.id)&&c.translateInPage(i,r)},undo:()=>{for(const c of a)l(this,Ze).has(c.id)&&c.translateInPage(-i,-r)},mustExec:!1})},o));for(const c of a)c.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),g(this,Cs,new Map);for(const e of l(this,me))l(this,Cs).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,Cs))return!1;this.disableUserSelect(!1);const e=l(this,Cs);g(this,Cs,null);let t=!1;for(const[{x:i,y:r,pageIndex:a},o]of e)o.newX=i,o.newY=r,o.newPageIndex=a,t||(t=i!==o.savedX||r!==o.savedY||a!==o.savedPageIndex);if(!t)return!1;const s=(i,r,a,o)=>{if(l(this,Ze).has(i.id)){const c=l(this,ft).get(o);c?i._setParentAndPosition(c,r,a):(i.pageIndex=o,i.x=r,i.y=a)}};return this.addCommands({cmd:()=>{for(const[i,{newX:r,newY:a,newPageIndex:o}]of e)s(i,r,a,o)},undo:()=>{for(const[i,{savedX:r,savedY:a,savedPageIndex:o}]of e)s(i,r,a,o)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(l(this,Cs))for(const s of l(this,Cs).keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||l(this,me).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return l(this,un)===e}getActive(){return l(this,un)}getMode(){return l(this,it)}get imageManager(){return ae(this,"imageManager",new Dg)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,h=t.rangeCount;u<h;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:s,y:i,width:r,height:a}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(u,h,d,p)=>({x:(h-i)/a,y:1-(u+d-s)/r,width:p/a,height:d/r});break;case"180":o=(u,h,d,p)=>({x:1-(u+d-s)/r,y:1-(h+p-i)/a,width:d/r,height:p/a});break;case"270":o=(u,h,d,p)=>({x:1-(h+p-i)/a,y:(u-s)/r,width:p/a,height:d/r});break;default:o=(u,h,d,p)=>({x:(u-s)/r,y:(h-i)/a,width:d/r,height:p/a});break}const c=[];for(let u=0,h=t.rangeCount;u<h;u++){const d=t.getRangeAt(u);if(!d.collapsed)for(const{x:p,y:m,width:v,height:w}of d.getClientRects())v===0||w===0||c.push(o(p,m,v,w))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(l(this,al)||g(this,al,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=l(this,al))==null||t.delete(e)}renderAnnotationElement(e){var i;const t=(i=l(this,al))==null?void 0:i.get(e.data.id);if(!t)return;const s=l(this,ni).getRawValue(t);s&&(l(this,it)===ne.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}};il=new WeakMap,un=new WeakMap,Ze=new WeakMap,ft=new WeakMap,rl=new WeakMap,ni=new WeakMap,al=new WeakMap,jn=new WeakMap,Ji=new WeakMap,aa=new WeakMap,ol=new WeakMap,oa=new WeakMap,Cs=new WeakMap,ss=new WeakMap,la=new WeakMap,Du=new WeakMap,Fu=new WeakMap,ll=new WeakMap,Ou=new WeakMap,Ns=new WeakMap,Zi=new WeakMap,cl=new WeakMap,er=new WeakMap,Ts=new WeakMap,op=new WeakMap,tr=new WeakMap,zu=new WeakMap,nr=new WeakMap,ca=new WeakMap,Bu=new WeakMap,Hu=new WeakMap,it=new WeakMap,me=new WeakMap,si=new WeakMap,ua=new WeakMap,Uu=new WeakMap,$u=new WeakMap,sr=new WeakMap,Ps=new WeakMap,ii=new WeakMap,Vu=new WeakMap,Dn=new WeakMap,F=new WeakSet,Qd=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},Og=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const s of l(this,ft).values())if(s.hasTextLayer(e))return s;return null},R1=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=A(this,F,Qd).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(s);i&&(l(this,Ts)||g(this,Ts,new KC(this)),l(this,Ts).show(s,i,this.direction==="ltr"))},L1=function(){var r,a,o;const e=document.getSelection();if(!e||e.isCollapsed){l(this,si)&&((r=l(this,Ts))==null||r.hide(),g(this,si,null),A(this,F,Ot).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===l(this,si))return;const i=A(this,F,Qd).call(this,e).closest(".textLayer");if(!i){l(this,si)&&((a=l(this,Ts))==null||a.hide(),g(this,si,null),A(this,F,Ot).call(this,{hasSelectedText:!1}));return}if((o=l(this,Ts))==null||o.hide(),g(this,si,t),A(this,F,Ot).call(this,{hasSelectedText:!0}),!(l(this,it)!==ne.HIGHLIGHT&&l(this,it)!==ne.NONE)&&(l(this,it)===ne.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),g(this,er,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=l(this,it)===ne.HIGHLIGHT?A(this,F,Og).call(this,i):null;c==null||c.toggleDrawing();const u=new AbortController,h=this.combinedSignal(u),d=p=>{p.type==="pointerup"&&p.button!==0||(u.abort(),c==null||c.toggleDrawing(!0),p.type==="pointerup"&&A(this,F,Jd).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}},Jd=function(e=""){l(this,it)===ne.HIGHLIGHT?this.highlightSelection(e):l(this,Du)&&A(this,F,R1).call(this)},M1=function(){document.addEventListener("selectionchange",A(this,F,L1).bind(this),{signal:this._signal})},I1=function(){if(l(this,Zi))return;g(this,Zi,new AbortController);const e=this.combinedSignal(l(this,Zi));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},j1=function(){var e;(e=l(this,Zi))==null||e.abort(),g(this,Zi,null)},zg=function(){if(l(this,nr))return;g(this,nr,new AbortController);const e=this.combinedSignal(l(this,nr));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},D1=function(){var e;(e=l(this,nr))==null||e.abort(),g(this,nr,null)},Bg=function(){if(l(this,Ji))return;g(this,Ji,new AbortController);const e=this.combinedSignal(l(this,Ji));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},Hg=function(){var e;(e=l(this,Ji))==null||e.abort(),g(this,Ji,null)},F1=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Ot=function(e){Object.entries(e).some(([s,i])=>l(this,$u)[s]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,$u),e)}),l(this,it)===ne.HIGHLIGHT&&e.hasSelectedEditor===!1&&A(this,F,Ks).call(this,[[ce.HIGHLIGHT_FREE,!0]]))},Ks=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},O1=async function(){if(!l(this,tr)){g(this,tr,!0);const e=[];for(const t of l(this,ft).values())e.push(t.enable());await Promise.all(e);for(const t of l(this,Ze).values())t.enable()}},z1=function(){if(this.unselectAll(),l(this,tr)){g(this,tr,!1);for(const e of l(this,ft).values())e.disable();for(const e of l(this,Ze).values())e.disable()}},Ug=function(e){const t=l(this,ft).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},B1=function(){let e=null;for(e of l(this,me));return e},Fc=function(){if(l(this,Ze).size===0)return!0;if(l(this,Ze).size===1)for(const e of l(this,Ze).values())return e.isEmpty();return!1},$g=function(e){for(const t of l(this,me))t.unselect();l(this,me).clear();for(const t of e)t.isEmpty()||(l(this,me).add(t),t.select());A(this,F,Ot).call(this,{hasSelectedEditor:this.hasSelection})},X(Vo,"TRANSLATE_SMALL",1),X(Vo,"TRANSLATE_BIG",10);let mo=Vo;var rt,Rs,is,ul,Ls,hn,hl,Ms,Zt,ri,ha,Is,ir,gs,Oc,Zd;const zt=class zt{constructor(e){b(this,gs);b(this,rt,null);b(this,Rs,!1);b(this,is,null);b(this,ul,null);b(this,Ls,null);b(this,hn,null);b(this,hl,!1);b(this,Ms,null);b(this,Zt,null);b(this,ri,null);b(this,ha,null);b(this,Is,!1);g(this,Zt,e),g(this,Is,e._uiManager.useNewAltTextFlow),l(zt,ir)||g(zt,ir,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){zt._l10n??(zt._l10n=e)}async render(){const e=g(this,is,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=g(this,ul,document.createElement("span"));e.append(t),l(this,Is)?(e.classList.add("new"),e.setAttribute("data-l10n-id",l(zt,ir).missing),t.setAttribute("data-l10n-id",l(zt,ir)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=l(this,Zt)._uiManager._signal;e.addEventListener("contextmenu",xs,{signal:s}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const i=r=>{r.preventDefault(),l(this,Zt)._uiManager.editAltText(l(this,Zt)),l(this,Is)&&l(this,Zt)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,gs,Oc)}})};return e.addEventListener("click",i,{capture:!0,signal:s}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(g(this,hl,!0),i(r))},{signal:s}),await A(this,gs,Zd).call(this),e}finish(){l(this,is)&&(l(this,is).focus({focusVisible:l(this,hl)}),g(this,hl,!1))}isEmpty(){return l(this,Is)?l(this,rt)===null:!l(this,rt)&&!l(this,Rs)}hasData(){return l(this,Is)?l(this,rt)!==null||!!l(this,ri):this.isEmpty()}get guessedText(){return l(this,ri)}async setGuessedText(e){l(this,rt)===null&&(g(this,ri,e),g(this,ha,await zt._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),A(this,gs,Zd).call(this))}toggleAltTextBadge(e=!1){var t;if(!l(this,Is)||l(this,rt)){(t=l(this,Ms))==null||t.remove(),g(this,Ms,null);return}if(!l(this,Ms)){const s=g(this,Ms,document.createElement("div"));s.className="noAltTextBadge",l(this,Zt).div.append(s)}l(this,Ms).classList.toggle("hidden",!e)}serialize(e){let t=l(this,rt);return!e&&l(this,ri)===t&&(t=l(this,ha)),{altText:t,decorative:l(this,Rs),guessedText:l(this,ri),textWithDisclaimer:l(this,ha)}}get data(){return{altText:l(this,rt),decorative:l(this,Rs)}}set data({altText:e,decorative:t,guessedText:s,textWithDisclaimer:i,cancel:r=!1}){s&&(g(this,ri,s),g(this,ha,i)),!(l(this,rt)===e&&l(this,Rs)===t)&&(r||(g(this,rt,e),g(this,Rs,t)),A(this,gs,Zd).call(this))}toggle(e=!1){l(this,is)&&(!e&&l(this,hn)&&(clearTimeout(l(this,hn)),g(this,hn,null)),l(this,is).disabled=!e)}shown(){l(this,Zt)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,gs,Oc)}})}destroy(){var e,t;(e=l(this,is))==null||e.remove(),g(this,is,null),g(this,ul,null),g(this,Ls,null),(t=l(this,Ms))==null||t.remove(),g(this,Ms,null)}};rt=new WeakMap,Rs=new WeakMap,is=new WeakMap,ul=new WeakMap,Ls=new WeakMap,hn=new WeakMap,hl=new WeakMap,Ms=new WeakMap,Zt=new WeakMap,ri=new WeakMap,ha=new WeakMap,Is=new WeakMap,ir=new WeakMap,gs=new WeakSet,Oc=function(){return l(this,rt)&&"added"||l(this,rt)===null&&this.guessedText&&"review"||"missing"},Zd=async function(){var i,r,a;const e=l(this,is);if(!e)return;if(l(this,Is)){if(e.classList.toggle("done",!!l(this,rt)),e.setAttribute("data-l10n-id",l(zt,ir)[l(this,gs,Oc)]),(i=l(this,ul))==null||i.setAttribute("data-l10n-id",l(zt,ir)[`${l(this,gs,Oc)}-label`]),!l(this,rt)){(r=l(this,Ls))==null||r.remove();return}}else{if(!l(this,rt)&&!l(this,Rs)){e.classList.remove("done"),(a=l(this,Ls))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=l(this,Ls);if(!t){g(this,Ls,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${l(this,Zt).id}`;const o=100,c=l(this,Zt)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(l(this,hn)),g(this,hn,null)},{once:!0}),e.addEventListener("mouseenter",()=>{g(this,hn,setTimeout(()=>{g(this,hn,null),l(this,Ls).classList.add("show"),l(this,Zt)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:c}),e.addEventListener("mouseleave",()=>{var u;l(this,hn)&&(clearTimeout(l(this,hn)),g(this,hn,null)),(u=l(this,Ls))==null||u.classList.remove("show")},{signal:c})}l(this,Rs)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=l(this,rt)),t.parentNode||e.append(t);const s=l(this,Zt).getImageForAltText();s==null||s.setAttribute("aria-describedby",t.id)},b(zt,ir,null),X(zt,"_l10n",null);let Qf=zt;var Wu,da,Gu,Xu,Yu,qu,Ku,dl,ai,fa,rr,zi,H1,U1,Vg;const ny=class ny{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:s=null,onPinchStart:i=null,onPinching:r=null,onPinchEnd:a=null,signal:o}){b(this,zi);b(this,Wu);b(this,da,!1);b(this,Gu,null);b(this,Xu);b(this,Yu);b(this,qu);b(this,Ku);b(this,dl);b(this,ai,null);b(this,fa);b(this,rr,null);g(this,Wu,e),g(this,Gu,s),g(this,Xu,t),g(this,Yu,i),g(this,qu,r),g(this,Ku,a),g(this,fa,new AbortController),g(this,dl,AbortSignal.any([o,l(this,fa).signal])),e.addEventListener("touchstart",A(this,zi,H1).bind(this),{passive:!1,signal:l(this,dl)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return ae(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var e;(e=l(this,fa))==null||e.abort(),g(this,fa,null)}};Wu=new WeakMap,da=new WeakMap,Gu=new WeakMap,Xu=new WeakMap,Yu=new WeakMap,qu=new WeakMap,Ku=new WeakMap,dl=new WeakMap,ai=new WeakMap,fa=new WeakMap,rr=new WeakMap,zi=new WeakSet,H1=function(e){var i,r,a;if((i=l(this,Xu))!=null&&i.call(this)||e.touches.length<2)return;if(!l(this,rr)){g(this,rr,new AbortController);const o=AbortSignal.any([l(this,dl),l(this,rr).signal]),c=l(this,Wu),u={signal:o,passive:!1};c.addEventListener("touchmove",A(this,zi,U1).bind(this),u),c.addEventListener("touchend",A(this,zi,Vg).bind(this),u),c.addEventListener("touchcancel",A(this,zi,Vg).bind(this),u),(r=l(this,Yu))==null||r.call(this)}if(_n(e),e.touches.length!==2||(a=l(this,Gu))!=null&&a.call(this)){g(this,ai,null);return}let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]),g(this,ai,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:s.screenX,touch1Y:s.screenY})},U1=function(e){var _;if(!l(this,ai)||e.touches.length!==2)return;let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]);const{screenX:i,screenY:r}=t,{screenX:a,screenY:o}=s,c=l(this,ai),{touch0X:u,touch0Y:h,touch1X:d,touch1Y:p}=c,m=d-u,v=p-h,w=a-i,E=o-r,y=Math.hypot(w,E)||1,x=Math.hypot(m,v)||1;if(!l(this,da)&&Math.abs(x-y)<=ny.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=i,c.touch0Y=r,c.touch1X=a,c.touch1Y=o,e.preventDefault(),!l(this,da)){g(this,da,!0);return}const S=[(i+a)/2,(r+o)/2];(_=l(this,qu))==null||_.call(this,S,x,y)},Vg=function(e){var t;l(this,rr).abort(),g(this,rr,null),(t=l(this,Ku))==null||t.call(this),l(this,ai)&&(e.preventDefault(),g(this,ai,null),g(this,da,!1))};let Jf=ny;var pa,rs,_e,fl,ar,Qu,ma,pt,ga,oi,or,Ju,va,dn,Zu,ya,li,js,pl,ml,Fn,wa,eh,lp,Y,Wg,th,Gg,ef,$1,V1,Xg,tf,Yg,W1,G1,X1,qg,Y1,Kg,q1,K1,Q1,Qg,zc;const ie=class ie{constructor(e){b(this,Y);b(this,pa,null);b(this,rs,null);b(this,_e,null);b(this,fl,!1);b(this,ar,null);b(this,Qu,"");b(this,ma,!1);b(this,pt,null);b(this,ga,null);b(this,oi,null);b(this,or,null);b(this,Ju,"");b(this,va,!1);b(this,dn,null);b(this,Zu,!1);b(this,ya,!1);b(this,li,!1);b(this,js,null);b(this,pl,0);b(this,ml,0);b(this,Fn,null);b(this,wa,null);X(this,"_editToolbar",null);X(this,"_initialOptions",Object.create(null));X(this,"_initialData",null);X(this,"_isVisible",!0);X(this,"_uiManager",null);X(this,"_focusEventsAllowed",!0);b(this,eh,!1);b(this,lp,ie._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:s,pageHeight:i,pageX:r,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,i],this.pageTranslation=[r,a];const[o,c]=this.parentDimensions;this.x=e.x/o,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=ie.prototype._resizeWithKeyboard,t=mo.TRANSLATE_SMALL,s=mo.TRANSLATE_BIG;return ae(this,"_resizerKeyboardManager",new cd([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],ie.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return ae(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new ZC({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(ie._l10n??(ie._l10n=e),ie._l10nResizer||(ie._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),ie._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);ie._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){xe("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,eh)}set _isDraggable(e){var t;g(this,eh,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,lp)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):A(this,Y,zc).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(l(this,va)?g(this,va,!1):this.parent.setSelected(this))}focusout(e){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,i){const[r,a]=this.parentDimensions;[s,i]=this.screenToPageTranslation(s,i),this.x=(e+s)/r,this.y=(t+i)/a,this.fixAndSetPosition()}translate(e,t){A(this,Y,Wg).call(this,this.parentDimensions,e,t)}translateInPage(e,t){l(this,dn)||g(this,dn,[this.x,this.y,this.width,this.height]),A(this,Y,Wg).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){l(this,dn)||g(this,dn,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[i,r]}=this;if(this.x+=e/i,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:p}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,p)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:o}=this;const[c,u]=this.getBaseTranslation();a+=c,o+=u;const{style:h}=s;h.left=`${(100*a).toFixed(2)}%`,h.top=`${(100*o).toFixed(2)}%`,this._onTranslating(a,o),s.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!l(this,dn)&&(l(this,dn)[0]!==this.x||l(this,dn)[1]!==this.y)}get _hasBeenResized(){return!!l(this,dn)&&(l(this,dn)[2]!==this.width||l(this,dn)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=ie,i=s/e,r=s/t;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[s,i]}=this;let{x:r,y:a,width:o,height:c}=this;if(o*=s,c*=i,r*=s,a*=i,this._mustFixPosition)switch(e){case 0:r=Math.max(0,Math.min(s-o,r)),a=Math.max(0,Math.min(i-c,a));break;case 90:r=Math.max(0,Math.min(s-c,r)),a=Math.min(i,Math.max(o,a));break;case 180:r=Math.min(s,Math.max(o,r)),a=Math.min(i,Math.max(c,a));break;case 270:r=Math.min(s,Math.max(c,r)),a=Math.max(0,Math.min(i-o,a));break}this.x=r/=s,this.y=a/=i;const[u,h]=this.getBaseTranslation();r+=u,a+=h,t.left=`${(100*r).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var s;return A(s=ie,th,Gg).call(s,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var s;return A(s=ie,th,Gg).call(s,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this;return[t*e,s*e]}setDims(e,t){const[s,i]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*e/s).toFixed(2)}%`,l(this,ma)||(r.height=`${(100*t/i).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:s}=e,i=s.endsWith("%"),r=!l(this,ma)&&t.endsWith("%");if(i&&r)return;const[a,o]=this.parentDimensions;i||(e.width=`${(100*parseFloat(s)/a).toFixed(2)}%`),!l(this,ma)&&!r&&(e.height=`${(100*parseFloat(t)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=l(this,_e))==null||e.finish()}async addEditToolbar(){return this._editToolbar||l(this,ya)?this._editToolbar:(this._editToolbar=new Ig(this),this.div.append(this._editToolbar.render()),l(this,_e)&&await this._editToolbar.addAltText(l(this,_e)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=l(this,_e))==null||e.destroy())}addContainer(e){var s;const t=(s=this._editToolbar)==null?void 0:s.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){l(this,_e)||(Qf.initialize(ie._l10n),g(this,_e,new Qf(this)),l(this,pa)&&(l(this,_e).data=l(this,pa),g(this,pa,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=l(this,_e))==null?void 0:e.data}set altTextData(e){l(this,_e)&&(l(this,_e).data=e)}get guessedAltText(){var e;return(e=l(this,_e))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=l(this,_e))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=l(this,_e))==null?void 0:t.serialize(e)}hasAltText(){return!!l(this,_e)&&!l(this,_e).isEmpty()}hasAltTextData(){var e;return((e=l(this,_e))==null?void 0:e.hasData())??!1}render(){var r;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=l(this,fl)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),A(this,Y,Kg).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[s,i]=this.getInitialTranslation();return this.translate(s,i),Kf(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(l(this,wa)||g(this,wa,new Jf({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:A(this,Y,W1).bind(this),onPinching:A(this,Y,G1).bind(this),onPinchEnd:A(this,Y,X1).bind(this),signal:this._uiManager._signal}))),(r=this._uiManager._editorUndoBar)==null||r.hide(),this.div}pointerdown(e){const{isMac:t}=Wt.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(g(this,va,!0),this._isDraggable){A(this,Y,Y1).call(this,e);return}A(this,Y,qg).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){l(this,js)&&clearTimeout(l(this,js)),g(this,js,setTimeout(()=>{var e;g(this,js,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,s=this.rotation){const i=this.parentScale,[r,a]=this.pageDimensions,[o,c]=this.pageTranslation,u=e/i,h=t/i,d=this.x*r,p=this.y*a,m=this.width*r,v=this.height*a;switch(s){case 0:return[d+u+o,a-p-h-v+c,d+u+m+o,a-p-h+c];case 90:return[d+h+o,a-p+u+c,d+h+v+o,a-p+u+m+c];case 180:return[d-u-m+o,a-p+h+c,d-u+o,a-p+h+v+c];case 270:return[d-h-v+o,a-p-u-m+c,d-h+o,a-p-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,i,r,a]=e,o=r-s,c=a-i;switch(this.rotation){case 0:return[s,t-a,o,c];case 90:return[s,t-i,c,o];case 180:return[r,t-i,o,c];case 270:return[r,t-a,c,o];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){g(this,ya,!0)}disableEditMode(){g(this,ya,!1)}isInEditMode(){return l(this,ya)}shouldGetKeyboardEvents(){return l(this,li)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:s,right:i}=this.getClientDimensions(),{innerHeight:r,innerWidth:a}=window;return t<a&&i>0&&e<r&&s>0}rebuild(){A(this,Y,Kg).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){xe("An editor must be serializable")}static async deserialize(e,t,s){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s});i.rotation=e.rotation,g(i,pa,e.accessibilityData);const[r,a]=i.pageDimensions,[o,c,u,h]=i.getRectInCurrentCoords(e.rect,a);return i.x=o/r,i.y=c/a,i.width=u/r,i.height=h/a,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=l(this,or))==null||e.abort(),g(this,or,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),l(this,js)&&(clearTimeout(l(this,js)),g(this,js,null)),A(this,Y,zc).call(this),this.removeEditToolbar(),l(this,Fn)){for(const s of l(this,Fn).values())clearTimeout(s);g(this,Fn,null)}this.parent=null,(t=l(this,wa))==null||t.destroy(),g(this,wa,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(A(this,Y,$1).call(this),l(this,pt).classList.remove("hidden"),Kf(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),g(this,oi,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=l(this,pt).children;if(!l(this,rs)){g(this,rs,Array.from(t));const a=A(this,Y,q1).bind(this),o=A(this,Y,K1).bind(this),c=this._uiManager._signal;for(const u of l(this,rs)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",a,{signal:c}),u.addEventListener("blur",o,{signal:c}),u.addEventListener("focus",A(this,Y,Q1).bind(this,h),{signal:c}),u.setAttribute("data-l10n-id",ie._l10nResizer[h])}}const s=l(this,rs)[0];let i=0;for(const a of t){if(a===s)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(l(this,rs).length/4);if(r!==i){if(r<i)for(let o=0;o<i-r;o++)l(this,pt).append(l(this,pt).firstChild);else if(r>i)for(let o=0;o<r-i;o++)l(this,pt).firstChild.before(l(this,pt).lastChild);let a=0;for(const o of t){const u=l(this,rs)[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",ie._l10nResizer[u])}}A(this,Y,Qg).call(this,0),g(this,li,!0),l(this,pt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){l(this,li)&&A(this,Y,Yg).call(this,l(this,Ju),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){A(this,Y,zc).call(this),this.div.focus()}select(){var e,t,s;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,r;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(t=this._editToolbar)==null||t.show(),(s=l(this,_e))==null||s.toggleAltTextBadge(!1)}unselect(){var e,t,s,i,r;(e=l(this,pt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(r=l(this,_e))==null||r.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return l(this,Zu)}set isEditing(e){g(this,Zu,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){g(this,ma,!0);const s=e/t,{style:i}=this.div;i.aspectRatio=s,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){l(this,Fn)||g(this,Fn,new Map);const{action:s}=e;let i=l(this,Fn).get(s);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),l(this,Fn).delete(s),l(this,Fn).size===0&&g(this,Fn,null)},ie._telemetryTimeout),l(this,Fn).set(s,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),g(this,fl,!1)}disable(){this.div&&(this.div.tabIndex=-1),g(this,fl,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};pa=new WeakMap,rs=new WeakMap,_e=new WeakMap,fl=new WeakMap,ar=new WeakMap,Qu=new WeakMap,ma=new WeakMap,pt=new WeakMap,ga=new WeakMap,oi=new WeakMap,or=new WeakMap,Ju=new WeakMap,va=new WeakMap,dn=new WeakMap,Zu=new WeakMap,ya=new WeakMap,li=new WeakMap,js=new WeakMap,pl=new WeakMap,ml=new WeakMap,Fn=new WeakMap,wa=new WeakMap,eh=new WeakMap,lp=new WeakMap,Y=new WeakSet,Wg=function([e,t],s,i){[s,i]=this.screenToPageTranslation(s,i),this.x+=s/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},th=new WeakSet,Gg=function(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},ef=function(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}},$1=function(){if(l(this,pt))return;g(this,pt,document.createElement("div")),l(this,pt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const s of e){const i=document.createElement("div");l(this,pt).append(i),i.classList.add("resizer",s),i.setAttribute("data-resizer-name",s),i.addEventListener("pointerdown",A(this,Y,V1).bind(this,s),{signal:t}),i.addEventListener("contextmenu",xs,{signal:t}),i.tabIndex=-1}this.div.prepend(l(this,pt))},V1=function(e,t){var h;t.preventDefault();const{isMac:s}=Wt.platform;if(t.button!==0||t.ctrlKey&&s)return;(h=l(this,_e))==null||h.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,g(this,ga,[t.screenX,t.screenY]);const r=new AbortController,a=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",A(this,Y,Yg).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",_n,{passive:!1,signal:a}),window.addEventListener("contextmenu",xs,{signal:a}),g(this,oi,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const u=()=>{var d;r.abort(),this.parent.togglePointerEvents(!0),(d=l(this,_e))==null||d.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=o,this.div.style.cursor=c,A(this,Y,tf).call(this)};window.addEventListener("pointerup",u,{signal:a}),window.addEventListener("blur",u,{signal:a})},Xg=function(e,t,s,i){this.width=s,this.height=i,this.x=e,this.y=t;const[r,a]=this.parentDimensions;this.setDims(r*s,a*i),this.fixAndSetPosition(),this._onResized()},tf=function(){if(!l(this,oi))return;const{savedX:e,savedY:t,savedWidth:s,savedHeight:i}=l(this,oi);g(this,oi,null);const r=this.x,a=this.y,o=this.width,c=this.height;r===e&&a===t&&o===s&&c===i||this.addCommands({cmd:A(this,Y,Xg).bind(this,r,a,o,c),undo:A(this,Y,Xg).bind(this,e,t,s,i),mustExec:!0})},Yg=function(e,t){const[s,i]=this.parentDimensions,r=this.x,a=this.y,o=this.width,c=this.height,u=ie.MIN_SIZE/s,h=ie.MIN_SIZE/i,d=A(this,Y,ef).call(this,this.rotation),p=(O,R)=>[d[0]*O+d[2]*R,d[1]*O+d[3]*R],m=A(this,Y,ef).call(this,360-this.rotation),v=(O,R)=>[m[0]*O+m[2]*R,m[1]*O+m[3]*R];let w,E,y=!1,x=!1;switch(e){case"topLeft":y=!0,w=(O,R)=>[0,0],E=(O,R)=>[O,R];break;case"topMiddle":w=(O,R)=>[O/2,0],E=(O,R)=>[O/2,R];break;case"topRight":y=!0,w=(O,R)=>[O,0],E=(O,R)=>[0,R];break;case"middleRight":x=!0,w=(O,R)=>[O,R/2],E=(O,R)=>[0,R/2];break;case"bottomRight":y=!0,w=(O,R)=>[O,R],E=(O,R)=>[0,0];break;case"bottomMiddle":w=(O,R)=>[O/2,R],E=(O,R)=>[O/2,0];break;case"bottomLeft":y=!0,w=(O,R)=>[0,R],E=(O,R)=>[O,0];break;case"middleLeft":x=!0,w=(O,R)=>[0,R/2],E=(O,R)=>[O,R/2];break}const S=w(o,c),_=E(o,c);let k=p(..._);const T=ie._round(r+k[0]),C=ie._round(a+k[1]);let P=1,j=1,D,M;if(t.fromKeyboard)({deltaX:D,deltaY:M}=t);else{const{screenX:O,screenY:R}=t,[L,$]=l(this,ga);[D,M]=this.screenToPageTranslation(O-L,R-$),l(this,ga)[0]=O,l(this,ga)[1]=R}if([D,M]=v(D/s,M/i),y){const O=Math.hypot(o,c);P=j=Math.max(Math.min(Math.hypot(_[0]-S[0]-D,_[1]-S[1]-M)/O,1/o,1/c),u/o,h/c)}else x?P=Math.max(u,Math.min(1,Math.abs(_[0]-S[0]-D)))/o:j=Math.max(h,Math.min(1,Math.abs(_[1]-S[1]-M)))/c;const J=ie._round(o*P),ue=ie._round(c*j);k=p(...E(J,ue));const ee=T-k[0],Oe=C-k[1];l(this,dn)||g(this,dn,[this.x,this.y,this.width,this.height]),this.width=J,this.height=ue,this.x=ee,this.y=Oe,this.setDims(s*J,i*ue),this.fixAndSetPosition(),this._onResizing()},W1=function(){var e;g(this,oi,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=l(this,_e))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},G1=function(e,t,s){let r=.7*(s/t)+1-.7;if(r===1)return;const a=A(this,Y,ef).call(this,this.rotation),o=(T,C)=>[a[0]*T+a[2]*C,a[1]*T+a[3]*C],[c,u]=this.parentDimensions,h=this.x,d=this.y,p=this.width,m=this.height,v=ie.MIN_SIZE/c,w=ie.MIN_SIZE/u;r=Math.max(Math.min(r,1/p,1/m),v/p,w/m);const E=ie._round(p*r),y=ie._round(m*r);if(E===p&&y===m)return;l(this,dn)||g(this,dn,[h,d,p,m]);const x=o(p/2,m/2),S=ie._round(h+x[0]),_=ie._round(d+x[1]),k=o(E/2,y/2);this.x=S-k[0],this.y=_-k[1],this.width=E,this.height=y,this.setDims(c*E,u*y),this.fixAndSetPosition(),this._onResizing()},X1=function(){var e;(e=l(this,_e))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),A(this,Y,tf).call(this)},qg=function(e){const{isMac:t}=Wt.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},Y1=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let s=!1;const i=new AbortController,r=this._uiManager.combinedSignal(i),a={capture:!0,passive:!1,signal:r},o=u=>{i.abort(),g(this,ar,null),g(this,va,!1),this._uiManager.endDragSession()||A(this,Y,qg).call(this,u),s&&this._onStopDragging()};t&&(g(this,pl,e.clientX),g(this,ml,e.clientY),g(this,ar,e.pointerId),g(this,Qu,e.pointerType),window.addEventListener("pointermove",u=>{s||(s=!0,this._onStartDragging());const{clientX:h,clientY:d,pointerId:p}=u;if(p!==l(this,ar)){_n(u);return}const[m,v]=this.screenToPageTranslation(h-l(this,pl),d-l(this,ml));g(this,pl,h),g(this,ml,d),this._uiManager.dragSelectedEditors(m,v)},a),window.addEventListener("touchmove",_n,a),window.addEventListener("pointerdown",u=>{u.pointerType===l(this,Qu)&&(l(this,wa)||u.isPrimary)&&o(u),_n(u)},a));const c=u=>{if(!l(this,ar)||l(this,ar)===u.pointerId){o(u);return}_n(u)};window.addEventListener("pointerup",c,{signal:r}),window.addEventListener("blur",c,{signal:r})},Kg=function(){if(l(this,or)||!this.div)return;g(this,or,new AbortController);const e=this._uiManager.combinedSignal(l(this,or));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},q1=function(e){ie._resizerKeyboardManager.exec(this,e)},K1=function(e){var t;l(this,li)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==l(this,pt)&&A(this,Y,zc).call(this)},Q1=function(e){g(this,Ju,l(this,li)?e:"")},Qg=function(e){if(l(this,rs))for(const t of l(this,rs))t.tabIndex=e},zc=function(){g(this,li,!1),A(this,Y,Qg).call(this,-1),A(this,Y,tf).call(this)},b(ie,th),X(ie,"_l10n",null),X(ie,"_l10nResizer",null),X(ie,"_borderLineWidth",-1),X(ie,"_colorManager",new Fg),X(ie,"_zIndex",1),X(ie,"_telemetryTimeout",1e3);let je=ie;class ZC extends je{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const kw=3285377520,In=4294901760,Es=65535;class J1{constructor(e){this.h1=e?e&4294967295:kw,this.h2=e?e&4294967295:kw}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let w=0,E=e.length;w<E;w++){const y=e.charCodeAt(w);y<=255?t[s++]=y:(t[s++]=y>>>8,t[s++]=y&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=s>>2,r=s-i*4,a=new Uint32Array(t.buffer,0,i);let o=0,c=0,u=this.h1,h=this.h2;const d=3432918353,p=461845907,m=d&Es,v=p&Es;for(let w=0;w<i;w++)w&1?(o=a[w],o=o*d&In|o*m&Es,o=o<<15|o>>>17,o=o*p&In|o*v&Es,u^=o,u=u<<13|u>>>19,u=u*5+3864292196):(c=a[w],c=c*d&In|c*m&Es,c=c<<15|c>>>17,c=c*p&In|c*v&Es,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(o=0,r){case 3:o^=t[i*4+2]<<16;case 2:o^=t[i*4+1]<<8;case 1:o^=t[i*4],o=o*d&In|o*m&Es,o=o<<15|o>>>17,o=o*p&In|o*v&Es,i&1?u^=o:h^=o}this.h1=u,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&In|e*36045&Es,t=t*4283543511&In|((t<<16|e>>>16)*2950163797&In)>>>16,e^=t>>>1,e=e*444984403&In|e*60499&Es,t=t*3301882366&In|((t<<16|e>>>16)*3120437893&In)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Jg=Object.freeze({map:null,hash:"",transfer:void 0});var xa,ba,at,cp,Z1;class Qv{constructor(){b(this,cp);b(this,xa,!1);b(this,ba,null);b(this,at,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=l(this,at).get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return l(this,at).get(e)}remove(e){if(l(this,at).delete(e),l(this,at).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of l(this,at).values())if(t instanceof je)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=l(this,at).get(e);let i=!1;if(s!==void 0)for(const[r,a]of Object.entries(t))s[r]!==a&&(i=!0,s[r]=a);else i=!0,l(this,at).set(e,t);i&&A(this,cp,Z1).call(this),t instanceof je&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return l(this,at).has(e)}getAll(){return l(this,at).size>0?Wv(l(this,at)):null}setAll(e){for(const[t,s]of Object.entries(e))this.setValue(t,s)}get size(){return l(this,at).size}resetModified(){l(this,xa)&&(g(this,xa,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new eA(this)}get serializable(){if(l(this,at).size===0)return Jg;const e=new Map,t=new J1,s=[],i=Object.create(null);let r=!1;for(const[a,o]of l(this,at)){const c=o instanceof je?o.serialize(!1,i):o;c&&(e.set(a,c),t.update(`${a}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const a of e.values())a.bitmap&&s.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:Jg}get editorStats(){let e=null;const t=new Map;for(const s of l(this,at).values()){if(!(s instanceof je))continue;const i=s.telemetryFinalData;if(!i)continue;const{type:r}=i;t.has(r)||t.set(r,Object.getPrototypeOf(s).constructor),e||(e=Object.create(null));const a=e[r]||(e[r]=new Map);for(const[o,c]of Object.entries(i)){if(o==="type")continue;let u=a.get(o);u||(u=new Map,a.set(o,u));const h=u.get(c)??0;u.set(c,h+1)}}for(const[s,i]of t)e[s]=i.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){g(this,ba,null)}get modifiedIds(){if(l(this,ba))return l(this,ba);const e=[];for(const t of l(this,at).values())!(t instanceof je)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return g(this,ba,{ids:new Set(e),hash:e.join(",")})}}xa=new WeakMap,ba=new WeakMap,at=new WeakMap,cp=new WeakSet,Z1=function(){l(this,xa)||(g(this,xa,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var nh;class eA extends Qv{constructor(t){super();b(this,nh);const{map:s,hash:i,transfer:r}=t.serializable,a=structuredClone(s,r?{transfer:r}:null);g(this,nh,{map:a,hash:i,transfer:r})}get print(){xe("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,nh)}get modifiedIds(){return ae(this,"modifiedIds",{ids:new Set,hash:""})}}nh=new WeakMap;var gl;class e2{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){b(this,gl,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),l(this,gl).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||l(this,gl).has(e.loadedName))){if(Ye(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:i,style:r}=e,a=new FontFace(s,i,r);this.addNativeFontFace(a);try{await a.load(),l(this,gl).add(s),t==null||t(e)}catch{se(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}xe("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(i){throw se(`Failed to load font '${s.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const i=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return ae(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(Mt||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),ae(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Ye(!i.done,"completeRequest() cannot be called twice."),i.done=!0;s.length>0&&s[0].done;){const r=s.shift();setTimeout(r.callback,0)}}const{loadingRequests:s}=this,i={done:!1,complete:t,callback:e};return s.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ae(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(_,k){return _.charCodeAt(k)<<24|_.charCodeAt(k+1)<<16|_.charCodeAt(k+2)<<8|_.charCodeAt(k+3)&255}function i(_,k,T,C){const P=_.substring(0,k),j=_.substring(k+T);return P+C+j}let r,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const c=o.getContext("2d");let u=0;function h(_,k){if(++u>30){se("Load test font never loaded."),k();return}if(c.font="30px "+_,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){k();return}setTimeout(h.bind(null,_,k))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;p=i(p,976,d.length,d);const v=16,w=1482184792;let E=s(p,v);for(r=0,a=d.length-3;r<a;r+=4)E=E-w+s(d,r)|0;r<d.length&&(E=E-w+s(d+"XXX",r)|0),p=i(p,v,4,zC(E));const y=`url(data:font/opentype;base64,${btoa(p)});`,x=`@font-face {font-family:"${d}";src:${y}}`;this.insertRule(x);const S=this._document.createElement("div");S.style.visibility="hidden",S.style.width=S.style.height="10px",S.style.position="absolute",S.style.top=S.style.left="0px";for(const _ of[e.loadedName,d]){const k=this._document.createElement("span");k.textContent="Hi",k.style.fontFamily=_,S.append(k)}this._document.body.append(S),h(d,()=>{S.remove(),t.complete()})}}gl=new WeakMap;class t2{constructor(e,{disableFontFace:t=!1,fontExtraProperties:s=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this.disableFontFace=t===!0,this.fontExtraProperties=s===!0,this._inspectFont=i}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${WC(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(s=this._inspectFont)==null||s.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const s=this.loadedName+"_path_"+t;let i;try{i=e.get(s)}catch(a){se(`getPathGenerator - ignoring character: "${a}".`)}const r=new Path2D(i||"");return this.fontExtraProperties||e.delete(s),this.compiledGlyphs[t]=r}}const Td={DATA:1,ERROR:2},We={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Cw(){}function Qt(n){if(n instanceof zr||n instanceof Rg||n instanceof Cu||n instanceof Sw||n instanceof qf||n instanceof Cm)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||xe('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new zr(n.message);case"InvalidPDFException":return new Rg(n.message);case"MissingPDFException":return new Cu(n.message);case"PasswordException":return new Sw(n.message,n.code);case"UnexpectedResponseException":return new qf(n.message,n.status);case"UnknownErrorException":return new Cm(n.message,n.details)}return new Cm(n.message,n.toString())}var vl,Yn,tA,nA,sA,nf;class Bc{constructor(e,t,s){b(this,Yn);b(this,vl,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",A(this,Yn,tA).bind(this),{signal:l(this,vl).signal})}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},s)}catch(a){r.reject(a)}return r.promise}sendWithStream(e,t,s,i){const r=this.streamId++,a=this.sourceName,o=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[r]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:a,targetName:o,action:e,streamId:r,data:t,desiredSize:u.desiredSize},i),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[r].pullCall=h,c.postMessage({sourceName:a,targetName:o,stream:We.PULL,streamId:r,desiredSize:u.desiredSize}),h.promise},cancel:u=>{Ye(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[r].cancelCall=h,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:a,targetName:o,stream:We.CANCEL,streamId:r,reason:Qt(u)}),h.promise}},s)}destroy(){var e;(e=l(this,vl))==null||e.abort(),g(this,vl,null)}}vl=new WeakMap,Yn=new WeakSet,tA=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){A(this,Yn,sA).call(this,e);return}if(e.callback){const s=e.callbackId,i=this.callbackCapabilities[s];if(!i)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===Td.DATA)i.resolve(e.data);else if(e.callback===Td.ERROR)i.reject(Qt(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,i=e.sourceName,r=this.comObj;Promise.try(t,e.data).then(function(a){r.postMessage({sourceName:s,targetName:i,callback:Td.DATA,callbackId:e.callbackId,data:a})},function(a){r.postMessage({sourceName:s,targetName:i,callback:Td.ERROR,callbackId:e.callbackId,reason:Qt(a)})});return}if(e.streamId){A(this,Yn,nA).call(this,e);return}t(e.data)},nA=function(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,r=this.comObj,a=this,o=this.actionHandler[e.action],c={enqueue(u,h=1,d){if(this.isCancelled)return;const p=this.desiredSize;this.desiredSize-=h,p>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:s,targetName:i,stream:We.ENQUEUE,streamId:t,chunk:u},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:We.CLOSE,streamId:t}),delete a.streamSinks[t])},error(u){Ye(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:We.ERROR,streamId:t,reason:Qt(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,Promise.try(o,e.data,c).then(function(){r.postMessage({sourceName:s,targetName:i,stream:We.START_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:s,targetName:i,stream:We.START_COMPLETE,streamId:t,reason:Qt(u)})})},sA=function(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,r=this.comObj,a=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case We.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(Qt(e.reason));break;case We.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(Qt(e.reason));break;case We.PULL:if(!o){r.postMessage({sourceName:s,targetName:i,stream:We.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||Cw).then(function(){r.postMessage({sourceName:s,targetName:i,stream:We.PULL_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:s,targetName:i,stream:We.PULL_COMPLETE,streamId:t,reason:Qt(u)})});break;case We.ENQUEUE:if(Ye(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case We.CLOSE:if(Ye(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),A(this,Yn,nf).call(this,a,t);break;case We.ERROR:Ye(a,"error should have stream controller"),a.controller.error(Qt(e.reason)),A(this,Yn,nf).call(this,a,t);break;case We.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(Qt(e.reason)),A(this,Yn,nf).call(this,a,t);break;case We.CANCEL:if(!o)break;const c=Qt(e.reason);Promise.try(o.onCancel||Cw,c).then(function(){r.postMessage({sourceName:s,targetName:i,stream:We.CANCEL_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:s,targetName:i,stream:We.CANCEL_COMPLETE,streamId:t,reason:Qt(u)})}),o.sinkCapability.reject(c),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},nf=async function(e,t){var s,i,r;await Promise.allSettled([(s=e.startCall)==null?void 0:s.promise,(i=e.pullCall)==null?void 0:i.promise,(r=e.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[t]};var sh;class iA{constructor({enableHWA:e=!1}){b(this,sh,!1);g(this,sh,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!l(this,sh)})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){xe("Abstract method `_createCanvas` called.")}}sh=new WeakMap;class n2 extends iA{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}class rA{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){xe("Abstract method `_fetch` called.")}}class aA extends rA{async _fetch(e){const t=await Gp(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Wp(t)}}class oA{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,i,r){return"none"}destroy(e=!1){}}var Aa,yl,ci,ui,Nt,Sa,Ea,z,_t,Hc,_o,sf,ko,lA,Zg,Co,Uc,$c,e0,Vc;class s2 extends oA{constructor({docId:t,ownerDocument:s=globalThis.document}){super();b(this,z);b(this,Aa);b(this,yl);b(this,ci);b(this,ui);b(this,Nt);b(this,Sa);b(this,Ea,0);g(this,ui,t),g(this,Nt,s)}addFilter(t){if(!t)return"none";let s=l(this,z,_t).get(t);if(s)return s;const[i,r,a]=A(this,z,sf).call(this,t),o=t.length===1?i:`${i}${r}${a}`;if(s=l(this,z,_t).get(o),s)return l(this,z,_t).set(t,s),s;const c=`g_${l(this,ui)}_transfer_map_${Dt(this,Ea)._++}`,u=A(this,z,ko).call(this,c);l(this,z,_t).set(t,u),l(this,z,_t).set(o,u);const h=A(this,z,Co).call(this,c);return A(this,z,$c).call(this,i,r,a,h),u}addHCMFilter(t,s){var v;const i=`${t}-${s}`,r="base";let a=l(this,z,Hc).get(r);if((a==null?void 0:a.key)===i||(a?((v=a.filter)==null||v.remove(),a.key=i,a.url="none",a.filter=null):(a={key:i,url:"none",filter:null},l(this,z,Hc).set(r,a)),!t||!s))return a.url;const o=A(this,z,Vc).call(this,t);t=W.makeHexColor(...o);const c=A(this,z,Vc).call(this,s);if(s=W.makeHexColor(...c),l(this,z,_o).style.color="",t==="#000000"&&s==="#ffffff"||t===s)return a.url;const u=new Array(256);for(let w=0;w<=255;w++){const E=w/255;u[w]=E<=.03928?E/12.92:((E+.055)/1.055)**2.4}const h=u.join(","),d=`g_${l(this,ui)}_hcm_filter`,p=a.filter=A(this,z,Co).call(this,d);A(this,z,$c).call(this,h,h,h,p),A(this,z,Zg).call(this,p);const m=(w,E)=>{const y=o[w]/255,x=c[w]/255,S=new Array(E+1);for(let _=0;_<=E;_++)S[_]=y+_/E*(x-y);return S.join(",")};return A(this,z,$c).call(this,m(0,5),m(1,5),m(2,5),p),a.url=A(this,z,ko).call(this,d),a.url}addAlphaFilter(t){let s=l(this,z,_t).get(t);if(s)return s;const[i]=A(this,z,sf).call(this,[t]),r=`alpha_${i}`;if(s=l(this,z,_t).get(r),s)return l(this,z,_t).set(t,s),s;const a=`g_${l(this,ui)}_alpha_map_${Dt(this,Ea)._++}`,o=A(this,z,ko).call(this,a);l(this,z,_t).set(t,o),l(this,z,_t).set(r,o);const c=A(this,z,Co).call(this,a);return A(this,z,e0).call(this,i,c),o}addLuminosityFilter(t){let s=l(this,z,_t).get(t||"luminosity");if(s)return s;let i,r;if(t?([i]=A(this,z,sf).call(this,[t]),r=`luminosity_${i}`):r="luminosity",s=l(this,z,_t).get(r),s)return l(this,z,_t).set(t,s),s;const a=`g_${l(this,ui)}_luminosity_map_${Dt(this,Ea)._++}`,o=A(this,z,ko).call(this,a);l(this,z,_t).set(t,o),l(this,z,_t).set(r,o);const c=A(this,z,Co).call(this,a);return A(this,z,lA).call(this,c),t&&A(this,z,e0).call(this,i,c),o}addHighlightHCMFilter(t,s,i,r,a){var x;const o=`${s}-${i}-${r}-${a}`;let c=l(this,z,Hc).get(t);if((c==null?void 0:c.key)===o||(c?((x=c.filter)==null||x.remove(),c.key=o,c.url="none",c.filter=null):(c={key:o,url:"none",filter:null},l(this,z,Hc).set(t,c)),!s||!i))return c.url;const[u,h]=[s,i].map(A(this,z,Vc).bind(this));let d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),p=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[m,v]=[r,a].map(A(this,z,Vc).bind(this));p<d&&([d,p,m,v]=[p,d,v,m]),l(this,z,_o).style.color="";const w=(S,_,k)=>{const T=new Array(256),C=(p-d)/k,P=S/255,j=(_-S)/(255*k);let D=0;for(let M=0;M<=k;M++){const J=Math.round(d+M*C),ue=P+M*j;for(let ee=D;ee<=J;ee++)T[ee]=ue;D=J+1}for(let M=D;M<256;M++)T[M]=T[D-1];return T.join(",")},E=`g_${l(this,ui)}_hcm_${t}_filter`,y=c.filter=A(this,z,Co).call(this,E);return A(this,z,Zg).call(this,y),A(this,z,$c).call(this,w(m[0],v[0],5),w(m[1],v[1],5),w(m[2],v[2],5),y),c.url=A(this,z,ko).call(this,E),c.url}destroy(t=!1){var s,i,r,a;t&&((s=l(this,Sa))!=null&&s.size)||((i=l(this,ci))==null||i.parentNode.parentNode.remove(),g(this,ci,null),(r=l(this,yl))==null||r.clear(),g(this,yl,null),(a=l(this,Sa))==null||a.clear(),g(this,Sa,null),g(this,Ea,0))}}Aa=new WeakMap,yl=new WeakMap,ci=new WeakMap,ui=new WeakMap,Nt=new WeakMap,Sa=new WeakMap,Ea=new WeakMap,z=new WeakSet,_t=function(){return l(this,yl)||g(this,yl,new Map)},Hc=function(){return l(this,Sa)||g(this,Sa,new Map)},_o=function(){if(!l(this,ci)){const t=l(this,Nt).createElement("div"),{style:s}=t;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const i=l(this,Nt).createElementNS(qs,"svg");i.setAttribute("width",0),i.setAttribute("height",0),g(this,ci,l(this,Nt).createElementNS(qs,"defs")),t.append(i),i.append(l(this,ci)),l(this,Nt).body.append(t)}return l(this,ci)},sf=function(t){if(t.length===1){const u=t[0],h=new Array(256);for(let p=0;p<256;p++)h[p]=u[p]/255;const d=h.join(",");return[d,d,d]}const[s,i,r]=t,a=new Array(256),o=new Array(256),c=new Array(256);for(let u=0;u<256;u++)a[u]=s[u]/255,o[u]=i[u]/255,c[u]=r[u]/255;return[a.join(","),o.join(","),c.join(",")]},ko=function(t){if(l(this,Aa)===void 0){g(this,Aa,"");const s=l(this,Nt).URL;s!==l(this,Nt).baseURI&&(Xp(s)?se('#createUrl: ignore "data:"-URL for performance reasons.'):g(this,Aa,s.split("#",1)[0]))}return`url(${l(this,Aa)}#${t})`},lA=function(t){const s=l(this,Nt).createElementNS(qs,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(s)},Zg=function(t){const s=l(this,Nt).createElementNS(qs,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(s)},Co=function(t){const s=l(this,Nt).createElementNS(qs,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",t),l(this,z,_o).append(s),s},Uc=function(t,s,i){const r=l(this,Nt).createElementNS(qs,s);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),t.append(r)},$c=function(t,s,i,r){const a=l(this,Nt).createElementNS(qs,"feComponentTransfer");r.append(a),A(this,z,Uc).call(this,a,"feFuncR",t),A(this,z,Uc).call(this,a,"feFuncG",s),A(this,z,Uc).call(this,a,"feFuncB",i)},e0=function(t,s){const i=l(this,Nt).createElementNS(qs,"feComponentTransfer");s.append(i),A(this,z,Uc).call(this,i,"feFuncA",t)},Vc=function(t){return l(this,z,_o).style.color=t,Kv(getComputedStyle(l(this,z,_o)).getPropertyValue("color"))};class cA{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){xe("Abstract method `_fetch` called.")}}class uA extends cA{async _fetch(e){const t=await Gp(e,"arraybuffer");return new Uint8Array(t)}}Mt&&se("Please use the `legacy` build in Node.js environments.");async function hA(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class i2 extends oA{}class r2 extends iA{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class a2 extends rA{async _fetch(e){return hA(e)}}class o2 extends cA{async _fetch(e){return hA(e)}}const Rt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function t0(n,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,s),n.clip(i)}class Jv{getPattern(){xe("Abstract method `getPattern` called.")}}class l2 extends Jv{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,i){let r;if(i===Rt.STROKE||i===Rt.FILL){const a=t.current.getClippedPathBoundingBox(i,Ne(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,c=Math.ceil(a[3]-a[1])||1,u=t.cachedCanvases.getCanvas("pattern",o,c),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-a[0],-a[1]),s=W.transform(s,[1,0,0,1,a[0],a[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),t0(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),r=e.createPattern(u.canvas,"no-repeat");const d=new DOMMatrix(s);r.setTransform(d)}else t0(e,this._bbox),r=this._createGradient(e);return r}}function Pm(n,e,t,s,i,r,a,o){const c=e.coords,u=e.colors,h=n.data,d=n.width*4;let p;c[t+1]>c[s+1]&&(p=t,t=s,s=p,p=r,r=a,a=p),c[s+1]>c[i+1]&&(p=s,s=i,i=p,p=a,a=o,o=p),c[t+1]>c[s+1]&&(p=t,t=s,s=p,p=r,r=a,a=p);const m=(c[t]+e.offsetX)*e.scaleX,v=(c[t+1]+e.offsetY)*e.scaleY,w=(c[s]+e.offsetX)*e.scaleX,E=(c[s+1]+e.offsetY)*e.scaleY,y=(c[i]+e.offsetX)*e.scaleX,x=(c[i+1]+e.offsetY)*e.scaleY;if(v>=x)return;const S=u[r],_=u[r+1],k=u[r+2],T=u[a],C=u[a+1],P=u[a+2],j=u[o],D=u[o+1],M=u[o+2],J=Math.round(v),ue=Math.round(x);let ee,Oe,O,R,L,$,G,Q;for(let oe=J;oe<=ue;oe++){if(oe<E){const te=oe<v?0:(v-oe)/(v-E);ee=m-(m-w)*te,Oe=S-(S-T)*te,O=_-(_-C)*te,R=k-(k-P)*te}else{let te;oe>x?te=1:E===x?te=0:te=(E-oe)/(E-x),ee=w-(w-y)*te,Oe=T-(T-j)*te,O=C-(C-D)*te,R=P-(P-M)*te}let be;oe<v?be=0:oe>x?be=1:be=(v-oe)/(v-x),L=m-(m-y)*be,$=S-(S-j)*be,G=_-(_-D)*be,Q=k-(k-M)*be;const dt=Math.round(Math.min(ee,L)),jt=Math.round(Math.max(ee,L));let q=d*oe+dt*4;for(let te=dt;te<=jt;te++)be=(ee-te)/(ee-L),be<0?be=0:be>1&&(be=1),h[q++]=Oe-(Oe-$)*be|0,h[q++]=O-(O-G)*be|0,h[q++]=R-(R-Q)*be|0,h[q++]=255}}function c2(n,e,t){const s=e.coords,i=e.colors;let r,a;switch(e.type){case"lattice":const o=e.verticesPerRow,c=Math.floor(s.length/o)-1,u=o-1;for(r=0;r<c;r++){let h=r*o;for(let d=0;d<u;d++,h++)Pm(n,t,s[h],s[h+1],s[h+o],i[h],i[h+1],i[h+o]),Pm(n,t,s[h+o+1],s[h+1],s[h+o],i[h+o+1],i[h+1],i[h+o])}break;case"triangles":for(r=0,a=s.length;r<a;r+=3)Pm(n,t,s[r],s[r+1],s[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}class u2 extends Jv{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,s){const o=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-o,h=Math.ceil(this._bounds[3])-c,d=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),p=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),m=u/d,v=h/p,w={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-c,scaleX:1/m,scaleY:1/v},E=d+2*2,y=p+2*2,x=s.getCanvas("mesh",E,y),S=x.context,_=S.createImageData(d,p);if(t){const T=_.data;for(let C=0,P=T.length;C<P;C+=4)T[C]=t[0],T[C+1]=t[1],T[C+2]=t[2],T[C+3]=255}for(const T of this._figures)c2(_,T,w);return S.putImageData(_,2,2),{canvas:x.canvas,offsetX:o-2*m,offsetY:c-2*v,scaleX:m,scaleY:v}}getPattern(e,t,s,i){t0(e,this._bbox);let r;if(i===Rt.SHADING)r=W.singularValueDecompose2dScale(Ne(e));else if(r=W.singularValueDecompose2dScale(t.baseTransform),this.matrix){const o=W.singularValueDecompose2dScale(this.matrix);r=[r[0]*o[0],r[1]*o[1]]}const a=this._createMeshCanvas(r,i===Rt.SHADING?null:this._background,t.cachedCanvases);return i!==Rt.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class h2 extends Jv{getPattern(){return"hotpink"}}function d2(n){switch(n[0]){case"RadialAxial":return new l2(n);case"Mesh":return new u2(n);case"Dummy":return new h2}throw new Error(`Unknown IR type: ${n[0]}`)}const Nw={COLORED:1,UNCOLORED:2},up=class up{constructor(e,t,s,i,r){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=s,this.canvasGraphicsFactory=i,this.baseTransform=r}createPatternCanvas(e){const{bbox:t,operatorList:s,paintType:i,tilingType:r,color:a,canvasGraphicsFactory:o}=this;let{xstep:c,ystep:u}=this;c=Math.abs(c),u=Math.abs(u),Vp("TilingType: "+r);const h=t[0],d=t[1],p=t[2],m=t[3],v=p-h,w=m-d,E=W.singularValueDecompose2dScale(this.matrix),y=W.singularValueDecompose2dScale(this.baseTransform),x=E[0]*y[0],S=E[1]*y[1];let _=v,k=w,T=!1,C=!1;const P=Math.ceil(c*x),j=Math.ceil(u*S),D=Math.ceil(v*x),M=Math.ceil(w*S);P>=D?_=c:T=!0,j>=M?k=u:C=!0;const J=this.getSizeAndScale(_,this.ctx.canvas.width,x),ue=this.getSizeAndScale(k,this.ctx.canvas.height,S),ee=e.cachedCanvases.getCanvas("pattern",J.size,ue.size),Oe=ee.context,O=o.createCanvasGraphics(Oe);if(O.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(O,i,a),Oe.translate(-J.scale*h,-ue.scale*d),O.transform(J.scale,0,0,ue.scale,0,0),Oe.save(),this.clipBbox(O,h,d,p,m),O.baseTransform=Ne(O.ctx),O.executeOperatorList(s),O.endDrawing(),Oe.restore(),T||C){const R=ee.canvas;T&&(_=c),C&&(k=u);const L=this.getSizeAndScale(_,this.ctx.canvas.width,x),$=this.getSizeAndScale(k,this.ctx.canvas.height,S),G=L.size,Q=$.size,oe=e.cachedCanvases.getCanvas("pattern-workaround",G,Q),be=oe.context,dt=T?Math.floor(v/c):0,jt=C?Math.floor(w/u):0;for(let q=0;q<=dt;q++)for(let te=0;te<=jt;te++)be.drawImage(R,G*q,Q*te,G,Q,0,0,G,Q);return{canvas:oe.canvas,scaleX:L.scale,scaleY:$.scale,offsetX:h,offsetY:d}}return{canvas:ee.canvas,scaleX:J.scale,scaleY:ue.scale,offsetX:h,offsetY:d}}getSizeAndScale(e,t,s){const i=Math.max(up.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*s);return r>=i?r=i:s=r/e,{scale:s,size:r}}clipBbox(e,t,s,i,r){const a=i-t,o=r-s;e.ctx.rect(t,s,a,o),e.current.updateRectMinMax(Ne(e.ctx),[t,s,i,r]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const i=e.ctx,r=e.current;switch(t){case Nw.COLORED:const a=this.ctx;i.fillStyle=a.fillStyle,i.strokeStyle=a.strokeStyle,r.fillColor=a.fillStyle,r.strokeColor=a.strokeStyle;break;case Nw.UNCOLORED:const o=W.makeHexColor(s[0],s[1],s[2]);i.fillStyle=o,i.strokeStyle=o,r.fillColor=o,r.strokeColor=o;break;default:throw new OC(`Unsupported paint type: ${t}`)}}getPattern(e,t,s,i){let r=s;i!==Rt.SHADING&&(r=W.transform(r,t.baseTransform),this.matrix&&(r=W.transform(r,this.matrix)));const a=this.createPatternCanvas(t);let o=new DOMMatrix(r);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const c=e.createPattern(a.canvas,"repeat");return c.setTransform(o),c}};X(up,"MAX_PATTERN_SIZE",3e3);let n0=up;function f2({src:n,srcPos:e=0,dest:t,width:s,height:i,nonBlackColor:r=4294967295,inverseDecode:a=!1}){const o=Wt.isLittleEndian?4278190080:255,[c,u]=a?[r,o]:[o,r],h=s>>3,d=s&7,p=n.length;t=new Uint32Array(t.buffer);let m=0;for(let v=0;v<i;v++){for(const E=e+h;e<E;e++){const y=e<p?n[e]:255;t[m++]=y&128?u:c,t[m++]=y&64?u:c,t[m++]=y&32?u:c,t[m++]=y&16?u:c,t[m++]=y&8?u:c,t[m++]=y&4?u:c,t[m++]=y&2?u:c,t[m++]=y&1?u:c}if(d===0)continue;const w=e<p?n[e++]:255;for(let E=0;E<d;E++)t[m++]=w&1<<7-E?u:c}return{srcPos:e,destPos:m}}const Tw=16,Pw=100,p2=15,Rw=10,Lw=1e3,nn=16;function m2(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(s,i){e.translate(s,i),this.__originalTranslate(s,i)},n.scale=function(s,i){e.scale(s,i),this.__originalScale(s,i)},n.transform=function(s,i,r,a,o,c){e.transform(s,i,r,a,o,c),this.__originalTransform(s,i,r,a,o,c)},n.setTransform=function(s,i,r,a,o,c){e.setTransform(s,i,r,a,o,c),this.__originalSetTransform(s,i,r,a,o,c)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(s){e.rotate(s),this.__originalRotate(s)},n.clip=function(s){e.clip(s),this.__originalClip(s)},n.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},n.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},n.bezierCurveTo=function(t,s,i,r,a,o){e.bezierCurveTo(t,s,i,r,a,o),this.__originalBezierCurveTo(t,s,i,r,a,o)},n.rect=function(t,s,i,r){e.rect(t,s,i,r),this.__originalRect(t,s,i,r)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class g2{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,s)):(i=this.canvasFactory.create(t,s),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Pd(n,e,t,s,i,r,a,o,c,u){const[h,d,p,m,v,w]=Ne(n);if(d===0&&p===0){const x=a*h+v,S=Math.round(x),_=o*m+w,k=Math.round(_),T=(a+c)*h+v,C=Math.abs(Math.round(T)-S)||1,P=(o+u)*m+w,j=Math.abs(Math.round(P)-k)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(m),S,k),n.drawImage(e,t,s,i,r,0,0,C,j),n.setTransform(h,d,p,m,v,w),[C,j]}if(h===0&&m===0){const x=o*p+v,S=Math.round(x),_=a*d+w,k=Math.round(_),T=(o+u)*p+v,C=Math.abs(Math.round(T)-S)||1,P=(a+c)*d+w,j=Math.abs(Math.round(P)-k)||1;return n.setTransform(0,Math.sign(d),Math.sign(p),0,S,k),n.drawImage(e,t,s,i,r,0,0,j,C),n.setTransform(h,d,p,m,v,w),[j,C]}n.drawImage(e,t,s,i,r,a,o,c,u);const E=Math.hypot(h,d),y=Math.hypot(p,m);return[E*c,y*u]}function v2(n){const{width:e,height:t}=n;if(e>Lw||t>Lw)return null;const s=1e3,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=e+1;let a=new Uint8Array(r*(t+1)),o,c,u;const h=e+7&-8;let d=new Uint8Array(h*t),p=0;for(const y of n.data){let x=128;for(;x>0;)d[p++]=y&x?0:255,x>>=1}let m=0;for(p=0,d[p]!==0&&(a[0]=1,++m),c=1;c<e;c++)d[p]!==d[p+1]&&(a[c]=d[p]?2:1,++m),p++;for(d[p]!==0&&(a[c]=2,++m),o=1;o<t;o++){p=o*h,u=o*r,d[p-h]!==d[p]&&(a[u]=d[p]?1:8,++m);let y=(d[p]?4:0)+(d[p-h]?8:0);for(c=1;c<e;c++)y=(y>>2)+(d[p+1]?4:0)+(d[p-h+1]?8:0),i[y]&&(a[u+c]=i[y],++m),p++;if(d[p-h]!==d[p]&&(a[u+c]=d[p]?2:4,++m),m>s)return null}for(p=h*(t-1),u=o*r,d[p]!==0&&(a[u]=8,++m),c=1;c<e;c++)d[p]!==d[p+1]&&(a[u+c]=d[p]?4:8,++m),p++;if(d[p]!==0&&(a[u+c]=4,++m),m>s)return null;const v=new Int32Array([0,r,-1,0,-r,0,0,0,1]),w=new Path2D;for(o=0;m&&o<=t;o++){let y=o*r;const x=y+e;for(;y<x&&!a[y];)y++;if(y===x)continue;w.moveTo(y%r,o);const S=y;let _=a[y];do{const k=v[_];do y+=k;while(!a[y]);const T=a[y];T!==5&&T!==10?(_=T,a[y]=0):(_=T&51*_>>4,a[y]&=_>>2|_<<2),w.lineTo(y%r,y/r|0),a[y]||--m}while(S!==y);--o}return d=null,a=null,function(y){y.save(),y.scale(1/e,-1/t),y.translate(0,-t),y.fill(w),y.beginPath(),y.restore()}}class Mw{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=b1,this.textMatrixScale=1,this.fontMatrix=Pg,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Et.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,s){[t,s]=W.applyTransform([t,s],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,s),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,s)}updateRectMinMax(e,t){const s=W.applyTransform(t,e),i=W.applyTransform(t.slice(2),e),r=W.applyTransform([t[0],t[3]],e),a=W.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,s[0],i[0],r[0],a[0]),this.minY=Math.min(this.minY,s[1],i[1],r[1],a[1]),this.maxX=Math.max(this.maxX,s[0],i[0],r[0],a[0]),this.maxY=Math.max(this.maxY,s[1],i[1],r[1],a[1])}updateScalingPathMinMax(e,t){W.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,s,i,r,a,o,c,u,h){const d=W.bezierBoundingBox(t,s,i,r,a,o,c,u,h);h||this.updateRectMinMax(e,d)}getPathBoundingBox(e=Rt.FILL,t=null){const s=[this.minX,this.minY,this.maxX,this.maxY];if(e===Rt.STROKE){t||xe("Stroke bounding box must include transform.");const i=W.singularValueDecompose2dScale(t),r=i[0]*this.lineWidth/2,a=i[1]*this.lineWidth/2;s[0]-=r,s[1]-=a,s[2]+=r,s[3]+=a}return s}updateClipFromPath(){const e=W.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Rt.FILL,t=null){return W.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function Iw(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,s=e.width,i=t%nn,r=(t-i)/nn,a=i===0?r:r+1,o=n.createImageData(s,nn);let c=0,u;const h=e.data,d=o.data;let p,m,v,w;if(e.kind===Xd.GRAYSCALE_1BPP){const E=h.byteLength,y=new Uint32Array(d.buffer,0,d.byteLength>>2),x=y.length,S=s+7>>3,_=4294967295,k=Wt.isLittleEndian?4278190080:255;for(p=0;p<a;p++){for(v=p<r?nn:i,u=0,m=0;m<v;m++){const T=E-c;let C=0;const P=T>S?s:T*8-7,j=P&-8;let D=0,M=0;for(;C<j;C+=8)M=h[c++],y[u++]=M&128?_:k,y[u++]=M&64?_:k,y[u++]=M&32?_:k,y[u++]=M&16?_:k,y[u++]=M&8?_:k,y[u++]=M&4?_:k,y[u++]=M&2?_:k,y[u++]=M&1?_:k;for(;C<P;C++)D===0&&(M=h[c++],D=128),y[u++]=M&D?_:k,D>>=1}for(;u<x;)y[u++]=0;n.putImageData(o,0,p*nn)}}else if(e.kind===Xd.RGBA_32BPP){for(m=0,w=s*nn*4,p=0;p<r;p++)d.set(h.subarray(c,c+w)),c+=w,n.putImageData(o,0,m),m+=nn;p<a&&(w=s*i*4,d.set(h.subarray(c,c+w)),n.putImageData(o,0,m))}else if(e.kind===Xd.RGB_24BPP)for(v=nn,w=s*v,p=0;p<a;p++){for(p>=r&&(v=i,w=s*v),u=0,m=w;m--;)d[u++]=h[c++],d[u++]=h[c++],d[u++]=h[c++],d[u++]=255;n.putImageData(o,0,p*nn)}else throw new Error(`bad image kind: ${e.kind}`)}function jw(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,i=t%nn,r=(t-i)/nn,a=i===0?r:r+1,o=n.createImageData(s,nn);let c=0;const u=e.data,h=o.data;for(let d=0;d<a;d++){const p=d<r?nn:i;({srcPos:c}=f2({src:u,srcPos:c,dest:h,width:s,height:p,nonBlackColor:0})),n.putImageData(o,0,d*nn)}}function Tc(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)n[s]!==void 0&&(e[s]=n[s]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function Rd(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!Mt){const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}}function Dw(n,e){if(e)return!0;const t=W.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const s=Math.fround((globalThis.devicePixelRatio||1)*Br.PDF_TO_CSS_UNITS);return t[0]<=s&&t[1]<=s}const y2=["butt","round","square"],w2=["miter","round","bevel"],x2={},Fw={};var bs,s0,i0,r0;const sy=class sy{constructor(e,t,s,i,r,{optionalContentConfig:a,markedContentStack:o=null},c,u){b(this,bs);this.ctx=e,this.current=new Mw(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new g2(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:i=null}){const r=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=o,s){const c=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Ne(this.compositeCtx))}this.ctx.save(),Rd(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Ne(this.ctx)}executeOperatorList(e,t,s,i){const r=e.argsArray,a=e.fnArray;let o=t||0;const c=r.length;if(c===o)return o;const u=c-o>Rw&&typeof s=="function",h=u?Date.now()+p2:0;let d=0;const p=this.commonObjs,m=this.objs;let v;for(;;){if(i!==void 0&&o===i.nextBreakPoint)return i.breakIt(o,s),o;if(v=a[o],v!==ts.dependency)this[v].apply(this,r[o]);else for(const w of r[o]){const E=w.startsWith("g_")?p:m;if(!E.has(w))return E.get(w,s),o}if(o++,o===c)return o;if(u&&++d>Rw){if(Date.now()>h)return s(),o;d=0}}}endDrawing(){A(this,bs,s0).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),A(this,bs,i0).call(this)}_scaleImage(e,t){const s=e.width??e.displayWidth,i=e.height??e.displayHeight;let r=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),o=s,c=i,u="prescale1",h,d;for(;r>2&&o>1||a>2&&c>1;){let p=o,m=c;r>2&&o>1&&(p=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),r/=o/p),a>2&&c>1&&(m=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,a/=c/m),h=this.cachedCanvases.getCanvas(u,p,m),d=h.context,d.clearRect(0,0,p,m),d.drawImage(e,0,0,o,c,0,0,p,m),e=h.canvas,o=p,c=m,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:c}}_createMaskCanvas(e){const t=this.ctx,{width:s,height:i}=e,r=this.current.fillColor,a=this.current.patternFill,o=Ne(t);let c,u,h,d;if((e.bitmap||e.data)&&e.count>1){const P=e.bitmap||e.data.buffer;u=JSON.stringify(a?o:[o.slice(0,4),r]),c=this._cachedBitmapsMap.get(P),c||(c=new Map,this._cachedBitmapsMap.set(P,c));const j=c.get(u);if(j&&!a){const D=Math.round(Math.min(o[0],o[2])+o[4]),M=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:j,offsetX:D,offsetY:M}}h=j}h||(d=this.cachedCanvases.getCanvas("maskCanvas",s,i),jw(d.context,e));let p=W.transform(o,[1/s,0,0,-1/i,0,0]);p=W.transform(p,[1,0,0,1,0,-i]);const[m,v,w,E]=W.getAxialAlignedBoundingBox([0,0,s,i],p),y=Math.round(w-m)||1,x=Math.round(E-v)||1,S=this.cachedCanvases.getCanvas("fillCanvas",y,x),_=S.context,k=m,T=v;_.translate(-k,-T),_.transform(...p),h||(h=this._scaleImage(d.canvas,Ss(_)),h=h.img,c&&a&&c.set(u,h)),_.imageSmoothingEnabled=Dw(Ne(_),e.interpolate),Pd(_,h,0,0,h.width,h.height,0,0,s,i),_.globalCompositeOperation="source-in";const C=W.transform(Ss(_),[1,0,0,1,-k,-T]);return _.fillStyle=a?r.getPattern(t,this,C,Rt.FILL):r,_.fillRect(0,0,s,i),c&&!a&&(this.cachedCanvases.delete("fillCanvas"),c.set(u,S.canvas)),{canvas:S.canvas,offsetX:Math.round(k),offsetY:Math.round(T)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=y2[e]}setLineJoin(e){this.ctx.lineJoin=w2[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,s]of e)switch(t){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.current.fillAlpha=s,this.ctx.globalAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(s,e,t);this.suspendedCtx=this.ctx,this.ctx=i.context;const r=this.ctx;r.setTransform(...Ne(this.suspendedCtx)),Tc(this.suspendedCtx,r),m2(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Tc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,i){const r=i[0],a=i[1],o=i[2]-r,c=i[3]-a;o===0||c===0||(this.genericComposeSMask(t.context,s,o,c,t.subtype,t.backdrop,t.transferMap,r,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,i,r,a,o,c,u,h,d){let p=e.canvas,m=c-h,v=u-d;if(a){const E=W.makeHexColor(...a);if(m<0||v<0||m+s>p.width||v+i>p.height){const y=this.cachedCanvases.getCanvas("maskExtension",s,i),x=y.context;x.drawImage(p,-m,-v),x.globalCompositeOperation="destination-atop",x.fillStyle=E,x.fillRect(0,0,s,i),x.globalCompositeOperation="source-over",p=y.canvas,m=v=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const y=new Path2D;y.rect(m,v,s,i),e.clip(y),e.globalCompositeOperation="destination-atop",e.fillStyle=E,e.fillRect(m,v,s,i),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));const w=new Path2D;w.rect(c,u,s,i),t.clip(w),t.globalCompositeOperation="destination-in",t.drawImage(p,m,v,s,i,c,u,s,i),t.restore()}save(){this.inSMaskMode?(Tc(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Tc(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,s,i,r,a){this.ctx.transform(e,t,s,i,r,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s){const i=this.ctx,r=this.current;let a=r.x,o=r.y,c,u;const h=Ne(i),d=h[0]===0&&h[3]===0||h[1]===0&&h[2]===0,p=d?s.slice(0):null;for(let m=0,v=0,w=e.length;m<w;m++)switch(e[m]|0){case ts.rectangle:a=t[v++],o=t[v++];const E=t[v++],y=t[v++],x=a+E,S=o+y;i.moveTo(a,o),E===0||y===0?i.lineTo(x,S):(i.lineTo(x,o),i.lineTo(x,S),i.lineTo(a,S)),d||r.updateRectMinMax(h,[a,o,x,S]),i.closePath();break;case ts.moveTo:a=t[v++],o=t[v++],i.moveTo(a,o),d||r.updatePathMinMax(h,a,o);break;case ts.lineTo:a=t[v++],o=t[v++],i.lineTo(a,o),d||r.updatePathMinMax(h,a,o);break;case ts.curveTo:c=a,u=o,a=t[v+4],o=t[v+5],i.bezierCurveTo(t[v],t[v+1],t[v+2],t[v+3],a,o),r.updateCurvePathMinMax(h,c,u,t[v],t[v+1],t[v+2],t[v+3],a,o,p),v+=6;break;case ts.curveTo2:c=a,u=o,i.bezierCurveTo(a,o,t[v],t[v+1],t[v+2],t[v+3]),r.updateCurvePathMinMax(h,c,u,a,o,t[v],t[v+1],t[v+2],t[v+3],p),a=t[v+2],o=t[v+3],v+=4;break;case ts.curveTo3:c=a,u=o,a=t[v+2],o=t[v+3],i.bezierCurveTo(t[v],t[v+1],a,o,a,o),r.updateCurvePathMinMax(h,c,u,t[v],t[v+1],a,o,a,o,p),v+=4;break;case ts.closePath:i.closePath();break}d&&r.updateScalingPathMinMax(h,p),r.setCurrentPoint(a,o)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,s=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof s=="object"&&(s!=null&&s.getPattern)?(t.save(),t.strokeStyle=s.getPattern(t,this,Ss(t),Rt.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,s=this.current.fillColor,i=this.current.patternFill;let r=!1;i&&(t.save(),t.fillStyle=s.getPattern(t,this,Ss(t),Rt.FILL),r=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),r&&t.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=x2}eoClip(){this.pendingClip=Fw}beginText(){this.current.textMatrix=b1,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}const s=new Path2D,i=t.getTransform().invertSelf();for(const{transform:r,x:a,y:o,fontSize:c,path:u}of e)s.addPath(u,new DOMMatrix(r).preMultiplySelf(i).translate(a,o).scale(c,-c));t.clip(s),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var h;const s=this.commonObjs.get(e),i=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(i.fontMatrix=s.fontMatrix||Pg,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&se("Invalid font matrix for font "+e),t<0?(t=-t,i.fontDirection=-1):i.fontDirection=1,this.current.font=s,this.current.fontSize=t,s.isType3Font)return;const r=s.loadedName||"sans-serif",a=((h=s.systemFontInfo)==null?void 0:h.css)||`"${r}", ${s.fallbackName}`;let o="normal";s.black?o="900":s.bold&&(o="bold");const c=s.italic?"italic":"normal";let u=t;t<Tw?u=Tw:t>Pw&&(u=Pw),this.current.fontSizeScale=t/u,this.ctx.font=`${c} ${o} ${u}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,s,i,r,a){this.current.textMatrix=[e,t,s,i,r,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,s,i,r){const a=this.ctx,o=this.current,c=o.font,u=o.textRenderingMode,h=o.fontSize/o.fontSizeScale,d=u&Et.FILL_STROKE_MASK,p=!!(u&Et.ADD_TO_PATH_FLAG),m=o.patternFill&&!c.missingFile,v=o.patternStroke&&!c.missingFile;let w;if((c.disableFontFace||p||m||v)&&(w=c.getPathGenerator(this.commonObjs,e)),c.disableFontFace||m||v){if(a.save(),a.translate(t,s),a.scale(h,-h),d===Et.FILL||d===Et.FILL_STROKE)if(i){const E=a.getTransform();a.setTransform(...i),a.fill(A(this,bs,r0).call(this,w,E,i))}else a.fill(w);if(d===Et.STROKE||d===Et.FILL_STROKE)if(r){const E=a.getTransform();a.setTransform(...r),a.stroke(A(this,bs,r0).call(this,w,E,r))}else a.lineWidth/=h,a.stroke(w);a.restore()}else(d===Et.FILL||d===Et.FILL_STROKE)&&a.fillText(e,t,s),(d===Et.STROKE||d===Et.FILL_STROKE)&&a.strokeText(e,t,s);p&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ne(a),x:t,y:s,fontSize:h,path:w})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){s=!0;break}return ae(this,"isFontSubpixelAAEnabled",s)}showText(e){const t=this.current,s=t.font;if(s.isType3Font)return this.showType3Text(e);const i=t.fontSize;if(i===0)return;const r=this.ctx,a=t.fontSizeScale,o=t.charSpacing,c=t.wordSpacing,u=t.fontDirection,h=t.textHScale*u,d=e.length,p=s.vertical,m=p?1:-1,v=s.defaultVMetrics,w=i*t.fontMatrix[0],E=t.textRenderingMode===Et.FILL&&!s.disableFontFace&&!t.patternFill;r.save(),r.transform(...t.textMatrix),r.translate(t.x,t.y+t.textRise),u>0?r.scale(h,-1):r.scale(h,1);let y,x;if(t.patternFill){r.save();const C=t.fillColor.getPattern(r,this,Ss(r),Rt.FILL);y=Ne(r),r.restore(),r.fillStyle=C}if(t.patternStroke){r.save();const C=t.strokeColor.getPattern(r,this,Ss(r),Rt.STROKE);x=Ne(r),r.restore(),r.strokeStyle=C}let S=t.lineWidth;const _=t.textMatrixScale;if(_===0||S===0){const C=t.textRenderingMode&Et.FILL_STROKE_MASK;(C===Et.STROKE||C===Et.FILL_STROKE)&&(S=this.getSinglePixelWidth())}else S/=_;if(a!==1&&(r.scale(a,a),S/=a),r.lineWidth=S,s.isInvalidPDFjsFont){const C=[];let P=0;for(const j of e)C.push(j.unicode),P+=j.width;r.fillText(C.join(""),0,0),t.x+=P*w*h,r.restore(),this.compose();return}let k=0,T;for(T=0;T<d;++T){const C=e[T];if(typeof C=="number"){k+=m*C*i/1e3;continue}let P=!1;const j=(C.isSpace?c:0)+o,D=C.fontChar,M=C.accent;let J,ue,ee=C.width;if(p){const O=C.vmetric||v,R=-(C.vmetric?O[1]:ee*.5)*w,L=O[2]*w;ee=O?-O[0]:ee,J=R/a,ue=(k+L)/a}else J=k/a,ue=0;if(s.remeasure&&ee>0){const O=r.measureText(D).width*1e3/i*a;if(ee<O&&this.isFontSubpixelAAEnabled){const R=ee/O;P=!0,r.save(),r.scale(R,1),J/=R}else ee!==O&&(J+=(ee-O)/2e3*i/a)}if(this.contentVisible&&(C.isInFont||s.missingFile)){if(E&&!M)r.fillText(D,J,ue);else if(this.paintChar(D,J,ue,y,x),M){const O=J+i*M.offset.x/a,R=ue-i*M.offset.y/a;this.paintChar(M.fontChar,O,R,y,x)}}const Oe=p?ee*w-j*u:ee*w+j*u;k+=Oe,P&&r.restore()}p?t.y-=k:t.x+=k*h,r.restore(),this.compose()}showType3Text(e){const t=this.ctx,s=this.current,i=s.font,r=s.fontSize,a=s.fontDirection,o=i.vertical?1:-1,c=s.charSpacing,u=s.wordSpacing,h=s.textHScale*a,d=s.fontMatrix||Pg,p=e.length,m=s.textRenderingMode===Et.INVISIBLE;let v,w,E,y;if(!(m||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...s.textMatrix),t.translate(s.x,s.y),t.scale(h,a),v=0;v<p;++v){if(w=e[v],typeof w=="number"){y=o*w*r/1e3,this.ctx.translate(y,0),s.x+=y*h;continue}const x=(w.isSpace?u:0)+c,S=i.charProcOperatorList[w.operatorListId];if(!S){se(`Type3 character "${w.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=w,this.save(),t.scale(r,r),t.transform(...d),this.executeOperatorList(S),this.restore()),E=W.applyTransform([w.width,0],d)[0]*r+x,t.translate(E,0),s.x+=E*h}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,s,i,r,a){this.ctx.rect(s,i,r-s,a-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const s=e[1],i=this.baseTransform||Ne(this.ctx),r={createCanvasGraphics:a=>new sy(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new n0(e,s,this.ctx,r,i)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,s){this.ctx.strokeStyle=this.current.strokeColor=W.makeHexColor(e,t,s),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t,s){this.ctx.fillStyle=this.current.fillColor=W.makeHexColor(e,t,s),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=d2(this.getObject(e)),this.cachedPatterns.set(e,s)),t&&(s.matrix=t),s}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const s=this._getPattern(e);t.fillStyle=s.getPattern(t,this,Ss(t),Rt.SHADING);const i=Ss(t);if(i){const{width:r,height:a}=t.canvas,[o,c,u,h]=W.getAxialAlignedBoundingBox([0,0,r,a],i);this.ctx.fillRect(o,c,u-o,h-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){xe("Should not call beginInlineImage")}beginImageData(){xe("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Ne(this.ctx),t)){const s=t[2]-t[0],i=t[3]-t[1];this.ctx.rect(t[0],t[1],s,i),this.current.updateRectMinMax(Ne(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Vp("TODO: Support non-isolated groups."),e.knockout&&se("Knockout groups not supported.");const s=Ne(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=W.getAxialAlignedBoundingBox(e.bbox,Ne(t));const r=[0,0,t.canvas.width,t.canvas.height];i=W.intersect(i,r)||[0,0,0,0];const a=Math.floor(i[0]),o=Math.floor(i[1]),c=Math.max(Math.ceil(i[2])-a,1),u=Math.max(Math.ceil(i[3])-o,1);this.current.startNewPathAndClipBox([0,0,c,u]);let h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(h,c,u),p=d.context;p.translate(-a,-o),p.transform(...s),e.smask?this.smaskStack.push({canvas:d.canvas,context:p,offsetX:a,offsetY:o,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,o),t.save()),Tc(t,p),this.ctx=p,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=Ne(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const r=W.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],i);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(e,t,s,i,r){if(A(this,bs,s0).call(this),Rd(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const a=t[2]-t[0],o=t[3]-t[1];if(r&&this.annotationCanvasMap){s=s.slice(),s[4]-=t[0],s[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=o;const[c,u]=W.singularValueDecompose2dScale(Ne(this.ctx)),{viewportScale:h}=this,d=Math.ceil(a*this.outputScaleX*h),p=Math.ceil(o*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(d,p);const{canvas:m,context:v}=this.annotationCanvas;this.annotationCanvasMap.set(e,m),this.annotationCanvas.savedCtx=this.ctx,this.ctx=v,this.ctx.save(),this.ctx.setTransform(c,0,0,-u,0,o*u),Rd(this.ctx)}else Rd(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],a,o),this.ctx.clip(),this.ctx.beginPath()}this.current=new Mw(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),A(this,bs,i0).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const s=this.ctx,i=this.processingType3;if(i&&(i.compiled===void 0&&(i.compiled=v2(e)),i.compiled)){i.compiled(s);return}const r=this._createMaskCanvas(e),a=r.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(a,r.offsetX,r.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s=0,i=0,r,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const o=this.ctx;o.save();const c=Ne(o);o.transform(t,s,i,r,0,0);const u=this._createMaskCanvas(e);o.setTransform(1,0,0,1,u.offsetX-c[4],u.offsetY-c[5]);for(let h=0,d=a.length;h<d;h+=2){const p=W.transform(c,[t,s,i,r,a[h],a[h+1]]),[m,v]=W.applyTransform([0,0],p);o.drawImage(u.canvas,m,v)}o.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,s=this.current.fillColor,i=this.current.patternFill;for(const r of e){const{data:a,width:o,height:c,transform:u}=r,h=this.cachedCanvases.getCanvas("maskCanvas",o,c),d=h.context;d.save();const p=this.getObject(a,r);jw(d,p),d.globalCompositeOperation="source-in",d.fillStyle=i?s.getPattern(d,this,Ss(t),Rt.FILL):s,d.fillRect(0,0,o,c),d.restore(),t.save(),t.transform(...u),t.scale(1,-1),Pd(t,h.canvas,0,0,o,c,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){se("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,s,i){if(!this.contentVisible)return;const r=this.getObject(e);if(!r){se("Dependent image isn't ready yet");return}const a=r.width,o=r.height,c=[];for(let u=0,h=i.length;u<h;u+=2)c.push({transform:[t,0,0,s,i[u],i[u+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(r,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:i}=e,r=this.cachedCanvases.getCanvas("inlineImage",s,i),a=r.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",r.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,s=e.height,i=this.ctx;if(this.save(),!Mt){const{filter:o}=i;o!=="none"&&o!==""&&(i.filter="none")}i.scale(1/t,-1/s);let r;if(e.bitmap)r=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)r=e;else{const c=this.cachedCanvases.getCanvas("inlineImage",t,s).context;Iw(c,e),r=this.applyTransferMapsToCanvas(c)}const a=this._scaleImage(r,Ss(i));i.imageSmoothingEnabled=Dw(Ne(i),e.interpolate),Pd(i,a.img,0,0,a.paintWidth,a.paintHeight,0,-s,t,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const s=this.ctx;let i;if(e.bitmap)i=e.bitmap;else{const r=e.width,a=e.height,c=this.cachedCanvases.getCanvas("inlineImage",r,a).context;Iw(c,e),i=this.applyTransferMapsToCanvas(c)}for(const r of t)s.save(),s.transform(...r.transform),s.scale(1,-1),Pd(s,i,r.x,r.y,r.w,r.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const s=this.ctx;this.pendingClip&&(t||(this.pendingClip===Fw?s.clip("evenodd"):s.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),s.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Ne(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:i,d:r}=this.ctx.getTransform();let a,o;if(s===0&&i===0){const c=Math.abs(t),u=Math.abs(r);if(c===u)if(e===0)a=o=1/c;else{const h=c*e;a=o=h<1?1/h:1}else if(e===0)a=1/c,o=1/u;else{const h=c*e,d=u*e;a=h<1?1/h:1,o=d<1?1/d:1}}else{const c=Math.abs(t*r-s*i),u=Math.hypot(t,s),h=Math.hypot(i,r);if(e===0)a=h/c,o=u/c;else{const d=e*c;a=h>d?h/d:1,o=u>d?u/d:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:s}=this.current,[i,r]=this.getScaleForStroking();if(t.lineWidth=s||1,i===1&&r===1){t.stroke();return}const a=t.getLineDash();if(e&&t.save(),t.scale(i,r),a.length>0){const o=Math.max(i,r);t.setLineDash(a.map(c=>c/o)),t.lineDashOffset/=o}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};bs=new WeakSet,s0=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},i0=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},r0=function(e,t,s){const i=new Path2D;return i.addPath(e,new DOMMatrix(s).invertSelf().multiplySelf(t)),i};let el=sy;for(const n in ts)el.prototype[n]!==void 0&&(el.prototype[ts[n]]=el.prototype[n]);var ih,rh;class Ci{static get workerPort(){return l(this,ih)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");g(this,ih,e)}static get workerSrc(){return l(this,rh)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");g(this,rh,e)}}ih=new WeakMap,rh=new WeakMap,b(Ci,ih,null),b(Ci,rh,"");var _a,ah;class b2{constructor({parsedData:e,rawData:t}){b(this,_a);b(this,ah);g(this,_a,e),g(this,ah,t)}getRaw(){return l(this,ah)}get(e){return l(this,_a).get(e)??null}getAll(){return Wv(l(this,_a))}has(e){return l(this,_a).has(e)}}_a=new WeakMap,ah=new WeakMap;const No=Symbol("INTERNAL");var oh,lh,ch,wl;class A2{constructor(e,{name:t,intent:s,usage:i,rbGroups:r}){b(this,oh,!1);b(this,lh,!1);b(this,ch,!1);b(this,wl,!0);g(this,oh,!!(e&An.DISPLAY)),g(this,lh,!!(e&An.PRINT)),this.name=t,this.intent=s,this.usage=i,this.rbGroups=r}get visible(){if(l(this,ch))return l(this,wl);if(!l(this,wl))return!1;const{print:e,view:t}=this.usage;return l(this,oh)?(t==null?void 0:t.viewState)!=="OFF":l(this,lh)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,s=!1){e!==No&&xe("Internal method `_setVisible` called."),g(this,ch,s),g(this,wl,t)}}oh=new WeakMap,lh=new WeakMap,ch=new WeakMap,wl=new WeakMap;var lr,ge,xl,bl,uh,a0;class S2{constructor(e,t=An.DISPLAY){b(this,uh);b(this,lr,null);b(this,ge,new Map);b(this,xl,null);b(this,bl,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,g(this,bl,e.order);for(const s of e.groups)l(this,ge).set(s.id,new A2(t,s));if(e.baseState==="OFF")for(const s of l(this,ge).values())s._setVisible(No,!1);for(const s of e.on)l(this,ge).get(s)._setVisible(No,!0);for(const s of e.off)l(this,ge).get(s)._setVisible(No,!1);g(this,xl,this.getHash())}}isVisible(e){if(l(this,ge).size===0)return!0;if(!e)return Vp("Optional content group not defined."),!0;if(e.type==="OCG")return l(this,ge).has(e.id)?l(this,ge).get(e.id).visible:(se(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return A(this,uh,a0).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!l(this,ge).has(t))return se(`Optional content group not found: ${t}`),!0;if(l(this,ge).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!l(this,ge).has(t))return se(`Optional content group not found: ${t}`),!0;if(!l(this,ge).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!l(this,ge).has(t))return se(`Optional content group not found: ${t}`),!0;if(!l(this,ge).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!l(this,ge).has(t))return se(`Optional content group not found: ${t}`),!0;if(l(this,ge).get(t).visible)return!1}return!0}return se(`Unknown optional content policy ${e.policy}.`),!0}return se(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,s=!0){var r;const i=l(this,ge).get(e);if(!i){se(`Optional content group not found: ${e}`);return}if(s&&t&&i.rbGroups.length)for(const a of i.rbGroups)for(const o of a)o!==e&&((r=l(this,ge).get(o))==null||r._setVisible(No,!1,!0));i._setVisible(No,!!t,!0),g(this,lr,null)}setOCGState({state:e,preserveRB:t}){let s;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":s=i;continue}const r=l(this,ge).get(i);if(r)switch(s){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!r.visible,t);break}}g(this,lr,null)}get hasInitialVisibility(){return l(this,xl)===null||this.getHash()===l(this,xl)}getOrder(){return l(this,ge).size?l(this,bl)?l(this,bl).slice():[...l(this,ge).keys()]:null}getGroups(){return l(this,ge).size>0?Wv(l(this,ge)):null}getGroup(e){return l(this,ge).get(e)||null}getHash(){if(l(this,lr)!==null)return l(this,lr);const e=new J1;for(const[t,s]of l(this,ge))e.update(`${t}:${s.visible}`);return g(this,lr,e.hexdigest())}}lr=new WeakMap,ge=new WeakMap,xl=new WeakMap,bl=new WeakMap,uh=new WeakSet,a0=function(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let i=1;i<t;i++){const r=e[i];let a;if(Array.isArray(r))a=A(this,uh,a0).call(this,r);else if(l(this,ge).has(r))a=l(this,ge).get(r).visible;else return se(`Optional content group not found: ${r}`),!0;switch(s){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return s==="And"};class E2{constructor(e,{disableRange:t=!1,disableStream:s=!1}){Ye(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:r,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(r==null?void 0:r.length)>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),e.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const i=this._rangeReaders.some(function(r){return r._begin!==e?!1:(r._enqueue(s),!0)});Ye(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,s,i,r;e.total===void 0?(s=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||s.call(t,{loaded:e.loaded}):(r=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||r.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Ye(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new _2(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new k2(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeReaders.slice(0))s.cancel(e);this._pdfDataRangeTransport.abort()}}class _2{constructor(e,t,s=!1,i=null){this._stream=e,this._done=s||!1,this._filename=Yv(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class k2{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function C2(n){let e=!0,t=s("filename\\*","i").exec(n);if(t){t=t[1];let h=o(t);return h=unescape(h),h=c(h),h=u(h),r(h)}if(t=a(n),t){const h=u(t);return r(h)}if(t=s("filename","i").exec(n),t){t=t[1];let h=o(t);return h=u(h),r(h)}function s(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function i(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const p=new TextDecoder(h,{fatal:!0}),m=Wp(d);d=p.decode(m),e=!1}catch{}}return d}function r(h){return e&&/[\x80-\xff]/.test(h)&&(h=i("utf-8",h),e&&(h=i("iso-8859-1",h))),h}function a(h){const d=[];let p;const m=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(p=m.exec(h))!==null;){let[,w,E,y]=p;if(w=parseInt(w,10),w in d){if(w===0)break;continue}d[w]=[E,y]}const v=[];for(let w=0;w<d.length&&w in d;++w){let[E,y]=d[w];y=o(y),E&&(y=unescape(y),w===0&&(y=c(y))),v.push(y)}return v.join("")}function o(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let p=0;p<d.length;++p){const m=d[p].indexOf('"');m!==-1&&(d[p]=d[p].slice(0,m),d.length=p+1),d[p]=d[p].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function c(h){const d=h.indexOf("'");if(d===-1)return h;const p=h.slice(0,d),v=h.slice(d+1).replace(/^[^']*'/,"");return i(p,v)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,p,m,v){if(m==="q"||m==="Q")return v=v.replaceAll("_"," "),v=v.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,E){return String.fromCharCode(parseInt(E,16))}),i(p,v);try{v=atob(v)}catch{}return i(p,v)})}return""}function dA(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const s in e){const i=e[s];i!==void 0&&t.append(s,i)}return t}function Yp(n){try{return new URL(n).origin}catch{}return null}function fA({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:s}){const i={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(i.suggestedLength=r,r<=2*t)||s||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function pA(n){const e=n.get("Content-Disposition");if(e){let t=C2(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Yv(t))return t}return null}function qp(n,e){return n===404||n===0&&e.startsWith("file:")?new Cu('Missing PDF "'+e+'".'):new qf(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function mA(n){return n===200||n===206}function gA(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function vA(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(se(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class Ow{constructor(e){X(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=dA(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ye(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new N2(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new T2(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class N2{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const s=new Headers(e.headers),i=t.url;fetch(i,gA(s,this._withCredentials,this._abortController)).then(r=>{if(e._responseOrigin=Yp(r.url),!mA(r.status))throw qp(r.status,i);this._reader=r.body.getReader(),this._headersCapability.resolve();const a=r.headers,{allowRangeRequests:o,suggestedLength:c}=fA({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=c||this._contentLength,this._filename=pA(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new zr("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:vA(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class T2{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range",`bytes=${t}-${s-1}`);const a=i.url;fetch(a,gA(r,this._withCredentials,this._abortController)).then(o=>{const c=Yp(o.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!mA(o.status))throw qp(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:vA(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const Rm=200,Lm=206;function P2(n){const e=n.response;return typeof e!="string"?e:Wp(e).buffer}class R2{constructor({url:e,httpHeaders:t,withCredentials:s}){X(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=dA(this.isHttp,t),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,i=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,a]of this.headers)t.setRequestHeader(r,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=Lm):i.expectedStatus=Rm,t.responseType="arraybuffer",Ye(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){var i;const s=this.pendingRequests[e];s&&((i=s.onProgress)==null||i.call(s,t))}onStateChange(e,t){const s=this.pendingRequests[e];if(!s)return;const i=s.xhr;if(i.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){s.onError(i.status);return}const r=i.status||Rm;if(!(r===Rm&&s.expectedStatus===Lm)&&r!==s.expectedStatus){s.onError(i.status);return}const o=P2(i);if(r===Lm){const c=i.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);u?s.onDone({begin:parseInt(u[1],10),chunk:o}):(se('Missing or invalid "Content-Range" header.'),s.onError(0))}else o?s.onDone({begin:0,chunk:o}):s.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class L2{constructor(e){this._source=e,this._manager=new R2(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Ye(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new M2(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new I2(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class M2{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Yp(t.responseURL);const s=t.getAllResponseHeaders(),i=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{const[c,...u]=o.split(": ");return[c,u.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:a}=fA({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=pA(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=qp(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class I2{constructor(e,t,s){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=Yp((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=qp(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const j2=/^[a-z][a-z0-9\-+.]+:/i;function D2(n){if(j2.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class F2{constructor(e){this.source=e,this.url=D2(e.url),Ye(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ye(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new O2(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new z2(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class O2{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new Cu(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new zr("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class z2{constructor(e,t,s){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const B2=1e5,Kt=30,H2=.8;var $w,cr,en,hh,dh,ka,hi,fh,ph,Ca,Al,Sl,ur,El,mh,_l,Na,gh,vh,Ta,Pa,yh,hr,kl,Bi,yA,wA,o0,Nn,rf,l0,xA,bA;const Je=class Je{constructor({textContentSource:e,container:t,viewport:s}){b(this,Bi);b(this,cr,Promise.withResolvers());b(this,en,null);b(this,hh,!1);b(this,dh,!!(($w=globalThis.FontInspector)!=null&&$w.enabled));b(this,ka,null);b(this,hi,null);b(this,fh,0);b(this,ph,0);b(this,Ca,null);b(this,Al,null);b(this,Sl,0);b(this,ur,0);b(this,El,Object.create(null));b(this,mh,[]);b(this,_l,null);b(this,Na,[]);b(this,gh,new WeakMap);b(this,vh,null);var c;if(e instanceof ReadableStream)g(this,_l,e);else if(typeof e=="object")g(this,_l,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');g(this,en,g(this,Al,t)),g(this,ur,s.scale*(globalThis.devicePixelRatio||1)),g(this,Sl,s.rotation),g(this,hi,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:r,pageX:a,pageY:o}=s.rawDims;g(this,vh,[1,0,0,-1,-a,o+r]),g(this,ph,i),g(this,fh,r),A(c=Je,Nn,xA).call(c),po(t,s),l(this,cr).promise.finally(()=>{l(Je,kl).delete(this),g(this,hi,null),g(this,El,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Wt.platform;return ae(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{l(this,Ca).read().then(({value:t,done:s})=>{if(s){l(this,cr).resolve();return}l(this,ka)??g(this,ka,t.lang),Object.assign(l(this,El),t.styles),A(this,Bi,yA).call(this,t.items),e()},l(this,cr).reject)};return g(this,Ca,l(this,_l).getReader()),l(Je,kl).add(this),e(),l(this,cr).promise}update({viewport:e,onBefore:t=null}){var r;const s=e.scale*(globalThis.devicePixelRatio||1),i=e.rotation;if(i!==l(this,Sl)&&(t==null||t(),g(this,Sl,i),po(l(this,Al),{rotation:i})),s!==l(this,ur)){t==null||t(),g(this,ur,s);const a={div:null,properties:null,ctx:A(r=Je,Nn,rf).call(r,l(this,ka))};for(const o of l(this,Na))a.properties=l(this,gh).get(o),a.div=o,A(this,Bi,o0).call(this,a)}}cancel(){var t;const e=new zr("TextLayer task cancelled.");(t=l(this,Ca))==null||t.cancel(e).catch(()=>{}),g(this,Ca,null),l(this,cr).reject(e)}get textDivs(){return l(this,Na)}get textContentItemsStr(){return l(this,mh)}static cleanup(){if(!(l(this,kl).size>0)){l(this,Ta).clear();for(const{canvas:e}of l(this,Pa).values())e.remove();l(this,Pa).clear()}}};cr=new WeakMap,en=new WeakMap,hh=new WeakMap,dh=new WeakMap,ka=new WeakMap,hi=new WeakMap,fh=new WeakMap,ph=new WeakMap,Ca=new WeakMap,Al=new WeakMap,Sl=new WeakMap,ur=new WeakMap,El=new WeakMap,mh=new WeakMap,_l=new WeakMap,Na=new WeakMap,gh=new WeakMap,vh=new WeakMap,Ta=new WeakMap,Pa=new WeakMap,yh=new WeakMap,hr=new WeakMap,kl=new WeakMap,Bi=new WeakSet,yA=function(e){var i,r;if(l(this,hh))return;(r=l(this,hi)).ctx??(r.ctx=A(i=Je,Nn,rf).call(i,l(this,ka)));const t=l(this,Na),s=l(this,mh);for(const a of e){if(t.length>B2){se("Ignoring additional textDivs for performance reasons."),g(this,hh,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=l(this,en);g(this,en,document.createElement("span")),l(this,en).classList.add("markedContent"),a.id!==null&&l(this,en).setAttribute("id",`${a.id}`),o.append(l(this,en))}else a.type==="endMarkedContent"&&g(this,en,l(this,en).parentNode);continue}s.push(a.str),A(this,Bi,wA).call(this,a)}},wA=function(e){var w;const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};l(this,Na).push(t);const i=W.transform(l(this,vh),e.transform);let r=Math.atan2(i[1],i[0]);const a=l(this,El)[e.fontName];a.vertical&&(r+=Math.PI/2);let o=l(this,dh)&&a.fontSubstitution||a.fontFamily;o=Je.fontFamilyMap.get(o)||o;const c=Math.hypot(i[2],i[3]),u=c*A(w=Je,Nn,bA).call(w,o,l(this,ka));let h,d;r===0?(h=i[4],d=i[5]-u):(h=i[4]+u*Math.sin(r),d=i[5]-u*Math.cos(r));const p="calc(var(--scale-factor)*",m=t.style;l(this,en)===l(this,Al)?(m.left=`${(100*h/l(this,ph)).toFixed(2)}%`,m.top=`${(100*d/l(this,fh)).toFixed(2)}%`):(m.left=`${p}${h.toFixed(2)}px)`,m.top=`${p}${d.toFixed(2)}px)`),m.fontSize=`${p}${(l(Je,hr)*c).toFixed(2)}px)`,m.fontFamily=o,s.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,l(this,dh)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),r!==0&&(s.angle=r*(180/Math.PI));let v=!1;if(e.str.length>1)v=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const E=Math.abs(e.transform[0]),y=Math.abs(e.transform[3]);E!==y&&Math.max(E,y)/Math.min(E,y)>1.5&&(v=!0)}if(v&&(s.canvasWidth=a.vertical?e.height:e.width),l(this,gh).set(t,s),l(this,hi).div=t,l(this,hi).properties=s,A(this,Bi,o0).call(this,l(this,hi)),s.hasText&&l(this,en).append(t),s.hasEOL){const E=document.createElement("br");E.setAttribute("role","presentation"),l(this,en).append(E)}},o0=function(e){var o;const{div:t,properties:s,ctx:i}=e,{style:r}=t;let a="";if(l(Je,hr)>1&&(a=`scale(${1/l(Je,hr)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:c}=r,{canvasWidth:u,fontSize:h}=s;A(o=Je,Nn,l0).call(o,i,h*l(this,ur),c);const{width:d}=i.measureText(t.textContent);d>0&&(a=`scaleX(${u*l(this,ur)/d}) ${a}`)}s.angle!==0&&(a=`rotate(${s.angle}deg) ${a}`),a.length>0&&(r.transform=a)},Nn=new WeakSet,rf=function(e=null){let t=l(this,Pa).get(e||(e=""));if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,Pa).set(e,t),l(this,yh).set(t,{size:0,family:""})}return t},l0=function(e,t,s){const i=l(this,yh).get(e);t===i.size&&s===i.family||(e.font=`${t}px ${s}`,i.size=t,i.family=s)},xA=function(){if(l(this,hr)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),g(this,hr,e.getBoundingClientRect().height),e.remove()},bA=function(e,t){const s=l(this,Ta).get(e);if(s)return s;const i=A(this,Nn,rf).call(this,t);i.canvas.width=i.canvas.height=Kt,A(this,Nn,l0).call(this,i,Kt,e);const r=i.measureText("");let a=r.fontBoundingBoxAscent,o=Math.abs(r.fontBoundingBoxDescent);if(a){const h=a/(a+o);return l(this,Ta).set(e,h),i.canvas.width=i.canvas.height=0,h}i.strokeStyle="red",i.clearRect(0,0,Kt,Kt),i.strokeText("g",0,0);let c=i.getImageData(0,0,Kt,Kt).data;o=0;for(let h=c.length-1-3;h>=0;h-=4)if(c[h]>0){o=Math.ceil(h/4/Kt);break}i.clearRect(0,0,Kt,Kt),i.strokeText("A",0,Kt),c=i.getImageData(0,0,Kt,Kt).data,a=0;for(let h=0,d=c.length;h<d;h+=4)if(c[h]>0){a=Kt-Math.floor(h/4/Kt);break}i.canvas.width=i.canvas.height=0;const u=a?a/(a+o):H2;return l(this,Ta).set(e,u),u},b(Je,Nn),b(Je,Ta,new Map),b(Je,Pa,new Map),b(Je,yh,new WeakMap),b(Je,hr,null),b(Je,kl,new Set);let Nu=Je;class Tu{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function i(r){var c;if(!r)return;let a=null;const o=r.name;if(o==="#text")a=r.value;else if(Tu.shouldBuildText(o))(c=r==null?void 0:r.attributes)!=null&&c.textContent?a=r.attributes.textContent:r.value&&(a=r.value);else return;if(a!==null&&t.push({str:a}),!!r.children)for(const u of r.children)i(u)}return i(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const U2=65536,$2=100,V2=5e3,W2=Mt?r2:n2,G2=Mt?a2:aA,X2=Mt?i2:s2,Y2=Mt?o2:uA;function q2(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new c0,{docId:t}=e,s=n.url?K2(n.url):null,i=n.data?Q2(n.data):null,r=n.httpHeaders||null,a=n.withCredentials===!0,o=n.password??null,c=n.range instanceof AA?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:U2;let h=n.worker instanceof tl?n.worker:null;const d=n.verbosity,p=typeof n.docBaseUrl=="string"&&!Xp(n.docBaseUrl)?n.docBaseUrl:null,m=typeof n.cMapUrl=="string"?n.cMapUrl:null,v=n.cMapPacked!==!1,w=n.CMapReaderFactory||G2,E=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,y=n.StandardFontDataFactory||Y2,x=n.stopAtErrors!==!0,S=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,_=n.isEvalSupported!==!1,k=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Mt,T=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Mt&&(Wt.platform.isFirefox||!globalThis.chrome),C=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,P=typeof n.disableFontFace=="boolean"?n.disableFontFace:Mt,j=n.fontExtraProperties===!0,D=n.enableXfa===!0,M=n.ownerDocument||globalThis.document,J=n.disableRange===!0,ue=n.disableStream===!0,ee=n.disableAutoFetch===!0,Oe=n.pdfBug===!0,O=n.CanvasFactory||W2,R=n.FilterFactory||X2,L=n.enableHWA===!0,$=c?c.length:n.length??NaN,G=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Mt&&!P,Q=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:w===aA&&y===uA&&m&&E&&Dc(m,document.baseURI)&&Dc(E,document.baseURI),oe=null;IC(d);const be={canvasFactory:new O({ownerDocument:M,enableHWA:L}),filterFactory:new R({docId:t,ownerDocument:M}),cMapReaderFactory:Q?null:new w({baseUrl:m,isCompressed:v}),standardFontDataFactory:Q?null:new y({baseUrl:E})};if(!h){const q={verbosity:d,port:Ci.workerPort};h=q.port?tl.fromPort(q):new tl(q),e._worker=h}const dt={docId:t,apiVersion:"4.10.38",data:i,password:o,disableAutoFetch:ee,rangeChunkSize:u,length:$,docBaseUrl:p,enableXfa:D,evaluatorOptions:{maxImageSize:S,disableFontFace:P,ignoreErrors:x,isEvalSupported:_,isOffscreenCanvasSupported:k,isImageDecoderSupported:T,canvasMaxAreaInBytes:C,fontExtraProperties:j,useSystemFonts:G,cMapUrl:Q?m:null,standardFontDataUrl:Q?E:null}},jt={disableFontFace:P,fontExtraProperties:j,ownerDocument:M,pdfBug:Oe,styleElement:oe,loadingParams:{disableAutoFetch:ee,enableXfa:D}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const q=h.messageHandler.sendWithPromise("GetDocRequest",dt,i?[i.buffer]:null);let te;if(c)te=new E2(c,{disableRange:J,disableStream:ue});else if(!i){if(!s)throw new Error("getDocument - no `url` parameter provided.");let Ke;if(Mt)if(Dc(s)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");Ke=Ow}else Ke=F2;else Ke=Dc(s)?Ow:L2;te=new Ke({url:s,length:$,httpHeaders:r,withCredentials:a,rangeChunkSize:u,disableRange:J,disableStream:ue})}return q.then(Ke=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const cn=new Bc(t,Ke,h.port),wS=new tN(cn,e,te,jt,be);e._transport=wS,cn.send("Ready",null)})}).catch(e._capability.reject),e}function K2(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(Mt&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Q2(n){if(Mt&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Wp(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function zw(n){return typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0}var hp;const dp=class dp{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Dt(dp,hp)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,s,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(r){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,r}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}};hp=new WeakMap,b(dp,hp,0);let c0=dp;class AA{constructor(e,t,s=!1,i=null){this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const s of this._rangeListeners)s(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const s of this._progressListeners)s(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){xe("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class J2{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ae(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var dr,di,Vn,To,af;class Z2{constructor(e,t,s,i=!1){b(this,Vn);b(this,dr,null);b(this,di,!1);this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=i?new _w:null,this._pdfBug=i,this.commonObjs=s.commonObjs,this.objs=new SA,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:i=0,dontFlip:r=!1}={}){return new ld({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:r})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ae(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:s="display",annotationMode:i=qi.ENABLE,transform:r=null,background:a=null,optionalContentConfigPromise:o=null,annotationCanvasMap:c=null,pageColors:u=null,printAnnotationStorage:h=null,isEditing:d=!1}){var _,k;(_=this._stats)==null||_.time("Overall");const p=this._transport.getRenderingIntent(s,i,h,d),{renderingIntent:m,cacheKey:v}=p;g(this,di,!1),A(this,Vn,af).call(this),o||(o=this._transport.getOptionalContentConfig(m));let w=this._intentStates.get(v);w||(w=Object.create(null),this._intentStates.set(v,w)),w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null);const E=!!(m&An.PRINT);w.displayReadyCapability||(w.displayReadyCapability=Promise.withResolvers(),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(k=this._stats)==null||k.time("Page Request"),this._pumpOperatorList(p));const y=T=>{var C;w.renderTasks.delete(x),(this._maybeCleanupAfterRender||E)&&g(this,di,!0),A(this,Vn,To).call(this,!E),T?(x.capability.reject(T),this._abortOperatorList({intentState:w,reason:T instanceof Error?T:new Error(T)})):x.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(C=globalThis.Stats)!=null&&C.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},x=new h0({callback:y,params:{canvasContext:e,viewport:t,transform:r,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:w.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!E,pdfBug:this._pdfBug,pageColors:u});(w.renderTasks||(w.renderTasks=new Set)).add(x);const S=x.task;return Promise.all([w.displayReadyCapability.promise,o]).then(([T,C])=>{var P;if(this.destroyed){y();return}if((P=this._stats)==null||P.time("Rendering"),!(C.renderingIntent&m))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");x.initializeGraphics({transparency:T,optionalContentConfig:C}),x.operatorListChanged()}).catch(y),S}getOperatorList({intent:e="display",annotationMode:t=qi.ENABLE,printAnnotationStorage:s=null,isEditing:i=!1}={}){var u;function r(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(c))}const a=this._transport.getRenderingIntent(e,t,s,i,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let c;return o.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(c),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>Tu.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,i){function r(){a.read().then(function({value:c,done:u}){if(u){s(o);return}o.lang??(o.lang=c.lang),Object.assign(o.styles,c.styles),o.items.push(...c.items),r()},i)}const a=t.getReader(),o={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),g(this,di,!1),A(this,Vn,af).call(this),Promise.all(e)}cleanup(e=!1){g(this,di,!0);const t=A(this,Vn,To).call(this,!1);return e&&t&&this._stats&&(this._stats=new _w),t}_startRenderPage(e,t){var i,r;const s=this._intentStates.get(t);s&&((i=this._stats)==null||i.timeEnd("Page Request"),(r=s.displayReadyCapability)==null||r.resolve(e))}_renderPageChunk(e,t){for(let s=0,i=e.length;s<i;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&A(this,Vn,To).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s,modifiedIds:i}){const{map:r,transfer:a}=s,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r,modifiedIds:i},a).getReader(),u=this._intentStates.get(t);u.streamReader=c;const h=()=>{c.read().then(({value:d,done:p})=>{if(p){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,u),h())},d=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const p of u.renderTasks)p.operatorListChanged();A(this,Vn,To).call(this,!0)}if(u.displayReadyCapability)u.displayReadyCapability.reject(d);else if(u.opListReadCapability)u.opListReadCapability.reject(d);else throw d}})};h()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof Xv){let i=$2;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new zr(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,r]of this._intentStates)if(r===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}dr=new WeakMap,di=new WeakMap,Vn=new WeakSet,To=function(e=!1){if(A(this,Vn,af).call(this),!l(this,di)||this.destroyed)return!1;if(e)return g(this,dr,setTimeout(()=>{g(this,dr,null),A(this,Vn,To).call(this,!1)},V2)),!1;for(const{renderTasks:t,operatorList:s}of this._intentStates.values())if(t.size>0||!s.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),g(this,di,!1),!0},af=function(){l(this,dr)&&(clearTimeout(l(this,dr)),g(this,dr,null))};var fi,fp;class eN{constructor(){b(this,fi,new Map);b(this,fp,Promise.resolve())}postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};l(this,fp).then(()=>{for(const[i]of l(this,fi))i.call(this,s)})}addEventListener(e,t,s=null){let i=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:r}=s;if(r.aborted){se("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);i=()=>r.removeEventListener("abort",a),r.addEventListener("abort",a)}l(this,fi).set(t,i)}removeEventListener(e,t){const s=l(this,fi).get(t);s==null||s(),l(this,fi).delete(t)}terminate(){for(const[,e]of l(this,fi))e==null||e();l(this,fi).clear()}}fi=new WeakMap,fp=new WeakMap;var pp,Ra,La,Cl,of,Nl,lf;const Ce=class Ce{constructor({name:e=null,port:t=null,verbosity:s=jC()}={}){b(this,Cl);var i;if(this.name=e,this.destroyed=!1,this.verbosity=s,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((i=l(Ce,La))!=null&&i.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(l(Ce,La)||g(Ce,La,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new Bc("main","worker",e),this._messageHandler.on("ready",function(){}),A(this,Cl,of).call(this)}_initialize(){if(l(Ce,Ra)||l(Ce,Nl,lf)){this._setupFakeWorker();return}let{workerSrc:e}=Ce;try{Ce._isSameOrigin(window.location.href,e)||(e=Ce._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new Bc("main","worker",t),i=()=>{r.abort(),s.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;t.addEventListener("error",()=>{this._webWorker||i()},{signal:r.signal}),s.on("test",o=>{if(r.abort(),this.destroyed||!o){i();return}this._messageHandler=s,this._port=t,this._webWorker=t,A(this,Cl,of).call(this)}),s.on("ready",o=>{if(r.abort(),this.destroyed){i();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const o=new Uint8Array;s.send("test",o,[o.buffer])};a();return}catch{Vp("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){l(Ce,Ra)||(se("Setting up fake worker."),g(Ce,Ra,!0)),Ce._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new eN;this._port=t;const s=`fake${Dt(Ce,pp)._++}`,i=new Bc(s+"_worker",s,t);e.setup(i,t),this._messageHandler=new Bc(s,s+"_worker",t),A(this,Cl,of).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e,t,s;this.destroyed=!0,(e=this._webWorker)==null||e.terminate(),this._webWorker=null,(t=l(Ce,La))==null||t.delete(this._port),this._port=null,(s=this._messageHandler)==null||s.destroy(),this._messageHandler=null}static fromPort(e){var s;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(s=l(this,La))==null?void 0:s.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Ce(e)}static get workerSrc(){if(Ci.workerSrc)return Ci.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ae(this,"_setupFakeWorkerGlobal",(async()=>l(this,Nl,lf)?l(this,Nl,lf):(await import(this.workerSrc)).WorkerMessageHandler)())}};pp=new WeakMap,Ra=new WeakMap,La=new WeakMap,Cl=new WeakSet,of=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Nl=new WeakSet,lf=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},b(Ce,Nl),b(Ce,pp,0),b(Ce,Ra,!1),b(Ce,La),Mt&&(g(Ce,Ra,!0),Ci.workerSrc||(Ci.workerSrc="./pdf.worker.mjs")),Ce._isSameOrigin=(e,t)=>{let s;try{if(s=new URL(e),!s.origin||s.origin==="null")return!1}catch{return!1}const i=new URL(t,s);return s.origin===i.origin},Ce._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let tl=Ce;var pi,Ds,Tl,Pl,mi,Ma,Wc;class tN{constructor(e,t,s,i,r){b(this,Ma);b(this,pi,new Map);b(this,Ds,new Map);b(this,Tl,new Map);b(this,Pl,new Map);b(this,mi,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new SA,this.fontLoader=new e2({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return ae(this,"annotationStorage",new Qv)}getRenderingIntent(e,t=qi.ENABLE,s=null,i=!1,r=!1){let a=An.DISPLAY,o=Jg;switch(e){case"any":a=An.ANY;break;case"display":break;case"print":a=An.PRINT;break;default:se(`getRenderingIntent - invalid intent: ${e}`)}const c=a&An.PRINT&&s instanceof eA?s:this.annotationStorage;switch(t){case qi.DISABLE:a+=An.ANNOTATIONS_DISABLE;break;case qi.ENABLE:break;case qi.ENABLE_FORMS:a+=An.ANNOTATIONS_FORMS;break;case qi.ENABLE_STORAGE:a+=An.ANNOTATIONS_STORAGE,o=c.serializable;break;default:se(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(a+=An.IS_EDITING),r&&(a+=An.OPLIST);const{ids:u,hash:h}=c.modifiedIds,d=[a,o.hash,h];return{renderingIntent:a,cacheKey:d.join("_"),annotationStorageSerializable:o,modifiedIds:u}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=l(this,mi))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of l(this,Ds).values())e.push(i._destroy());l(this,Ds).clear(),l(this,Tl).clear(),l(this,Pl).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var i,r;this.commonObjs.clear(),this.fontLoader.clear(),l(this,pi).clear(),this.filterFactory.destroy(),Nu.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new zr("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,i)=>{Ye(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},i.onPull=()=>{this._fullReader.read().then(function({value:r,done:a}){if(a){i.close();return}Ye(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{i.error(r)})},i.onCancel=r=>{this._fullReader.cancel(r),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async s=>{var o;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:r,contentLength:a}=this._fullReader;return(!i||!r)&&(this._lastProgress&&((o=t.onProgress)==null||o.call(t,this._lastProgress)),this._fullReader.onProgress=c=>{var u;(u=t.onProgress)==null||u.call(t,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:i,isRangeSupported:r,contentLength:a}}),e.on("GetRangeReader",(s,i)=>{Ye(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(s.begin,s.end);if(!r){i.close();return}i.onPull=()=>{r.read().then(function({value:a,done:o}){if(o){i.close();return}Ye(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{r.cancel(a),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new J2(s,this))}),e.on("DocException",s=>{t._capability.reject(Qt(s))}),e.on("PasswordRequest",s=>{g(this,mi,Promise.withResolvers());try{if(!t.onPassword)throw Qt(s);const i=r=>{r instanceof Error?l(this,mi).reject(r):l(this,mi).resolve({password:r})};t.onPassword(i,s.code)}catch(i){l(this,mi).reject(i)}return l(this,mi).promise}),e.on("DataLoaded",s=>{var i;(i=t.onProgress)==null||i.call(t,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;l(this,Ds).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,i,r])=>{var a;if(this.destroyed||this.commonObjs.has(s))return null;switch(i){case"Font":const{disableFontFace:o,fontExtraProperties:c,pdfBug:u}=this._params;if("error"in r){const m=r.error;se(`Error during font loading: ${m}`),this.commonObjs.resolve(s,m);break}const h=u&&((a=globalThis.FontInspector)!=null&&a.enabled)?(m,v)=>globalThis.FontInspector.fontAdded(m,v):null,d=new t2(r,{disableFontFace:o,fontExtraProperties:c,inspectFont:h});this.fontLoader.bind(d).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!c&&d.data&&(d.data=null),this.commonObjs.resolve(s,d)});break;case"CopyLocalImage":const{imageRef:p}=r;Ye(p,"The imageRef must be defined.");for(const m of l(this,Ds).values())for(const[,v]of m.objs)if((v==null?void 0:v.ref)===p)return v.dataLen?(this.commonObjs.resolve(s,structuredClone(v)),v.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,r);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([s,i,r,a])=>{var c;if(this.destroyed)return;const o=l(this,Ds).get(i);if(!o.objs.has(s)){if(o._intentStates.size===0){(c=a==null?void 0:a.bitmap)==null||c.close();return}switch(r){case"Image":o.objs.resolve(s,a),(a==null?void 0:a.dataLen)>PC&&(o._maybeCleanupAfterRender=!0);break;case"Pattern":o.objs.resolve(s,a);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",s=>{var i;this.destroyed||(i=t.onProgress)==null||i.call(t,{loaded:s.loaded,total:s.total})}),e.on("FetchBuiltInCMap",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(s)}),e.on("FetchStandardFontData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&se("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((s=this._fullReader)==null?void 0:s.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=l(this,Tl).get(t);if(s)return s;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&l(this,Pl).set(r.refStr,e);const a=new Z2(t,r,this,this._params.pdfBug);return l(this,Ds).set(t,a),a});return l(this,Tl).set(t,i),i}getPageIndex(e){return zw(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return A(this,Ma,Wc).call(this,"GetFieldObjects")}hasJSActions(){return A(this,Ma,Wc).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return A(this,Ma,Wc).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return A(this,Ma,Wc).call(this,"GetOptionalContentConfig").then(t=>new S2(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=l(this,pi).get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(i=>{var r,a;return{info:i[0],metadata:i[1]?new b2(i[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return l(this,pi).set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of l(this,Ds).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),l(this,pi).clear(),this.filterFactory.destroy(!0),Nu.cleanup()}}cachedPageNumber(e){if(!zw(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return l(this,Pl).get(t)??null}}pi=new WeakMap,Ds=new WeakMap,Tl=new WeakMap,Pl=new WeakMap,mi=new WeakMap,Ma=new WeakSet,Wc=function(e,t=null){const s=l(this,pi).get(e);if(s)return s;const i=this.messageHandler.sendWithPromise(e,t);return l(this,pi).set(e,i),i};const Pc=Symbol("INITIAL_DATA");var fn,wh,u0;class SA{constructor(){b(this,wh);b(this,fn,Object.create(null))}get(e,t=null){if(t){const i=A(this,wh,u0).call(this,e);return i.promise.then(()=>t(i.data)),null}const s=l(this,fn)[e];if(!s||s.data===Pc)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=l(this,fn)[e];return!!t&&t.data!==Pc}delete(e){const t=l(this,fn)[e];return!t||t.data===Pc?!1:(delete l(this,fn)[e],!0)}resolve(e,t=null){const s=A(this,wh,u0).call(this,e);s.data=t,s.resolve()}clear(){var e;for(const t in l(this,fn)){const{data:s}=l(this,fn)[t];(e=s==null?void 0:s.bitmap)==null||e.close()}g(this,fn,Object.create(null))}*[Symbol.iterator](){for(const e in l(this,fn)){const{data:t}=l(this,fn)[e];t!==Pc&&(yield[e,t])}}}fn=new WeakMap,wh=new WeakSet,u0=function(e){var t;return(t=l(this,fn))[e]||(t[e]={...Promise.withResolvers(),data:Pc})};var fr;class nN{constructor(e){b(this,fr,null);g(this,fr,e),this.onContinue=null}get promise(){return l(this,fr).capability.promise}cancel(e=0){l(this,fr).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=l(this,fr).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=l(this,fr);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}fr=new WeakMap;var pr,Ia;const Jr=class Jr{constructor({callback:e,params:t,objs:s,commonObjs:i,annotationCanvasMap:r,operatorList:a,pageIndex:o,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:p=null}){b(this,pr,null);this.callback=e,this.params=t,this.objs=s,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=d,this.pageColors=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new nN(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var o,c;if(this.cancelled)return;if(this._canvas){if(l(Jr,Ia).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(Jr,Ia).add(this._canvas)}this._pdfBug&&((o=globalThis.StepperManager)!=null&&o.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:i,transform:r,background:a}=this.params;this.gfx=new el(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:i,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(e=null,t=0){var s;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),l(this,pr)&&(window.cancelAnimationFrame(l(this,pr)),g(this,pr,null)),l(Jr,Ia).delete(this._canvas),this.callback(e||new Xv(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?g(this,pr,window.requestAnimationFrame(()=>{g(this,pr,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(Jr,Ia).delete(this._canvas),this.callback())))}};pr=new WeakMap,Ia=new WeakMap,b(Jr,Ia,new WeakSet);let h0=Jr;const sN="4.10.38",iN="f9bea397f";function Bw(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Rc(n){return Math.max(0,Math.min(255,255*n))}class Hw{static CMYK_G([e,t,s,i]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Rc(e),[e,e,e]}static G_HTML([e]){const t=Bw(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(Rc)}static RGB_HTML(e){return`#${e.map(Bw).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,s+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,s,i]){return[Rc(1-Math.min(1,e+i)),Rc(1-Math.min(1,s+i)),Rc(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const i=1-e,r=1-t,a=1-s,o=Math.min(i,r,a);return["CMYK",i,r,a,o]}}class rN{create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),s||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){xe("Abstract method `_createSVG` called.")}}class Zv extends rN{_createSVG(e){return document.createElementNS(qs,e)}}class EA{static setupStorage(e,t,s,i,r){const a=i.getValue(t,{value:null});switch(s.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),r==="print")break;e.addEventListener("input",o=>{i.setValue(t,{value:o.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(a.value===s.attributes.xfaOn?e.setAttribute("checked",!0):a.value===s.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",o=>{i.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),r==="print")break;e.addEventListener("input",o=>{i.setValue(t,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const o of s.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const c=o.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;i.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:i,linkService:r}){const{attributes:a}=t,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${i}`);for(const[c,u]of Object.entries(a))if(u!=null)switch(c){case"class":u.length&&e.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!o||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,u)}o&&r.addLinkAttributes(e,a.href,a.newWindow),s&&a.dataId&&this.setupStorage(e,a.dataId,t,s)}static render(e){var d,p;const t=e.annotationStorage,s=e.linkService,i=e.xfaHtml,r=e.intent||"display",a=document.createElement(i.name);i.attributes&&this.setAttributes({html:a,element:i,intent:r,linkService:s});const o=r!=="richText",c=e.div;if(c.append(a),e.viewport){const m=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=m}o&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(i.children.length===0){if(i.value){const m=document.createTextNode(i.value);a.append(m),o&&Tu.shouldBuildText(i.name)&&u.push(m)}return{textDivs:u}}const h=[[i,-1,a]];for(;h.length>0;){const[m,v,w]=h.at(-1);if(v+1===m.children.length){h.pop();continue}const E=m.children[++h.at(-1)[1]];if(E===null)continue;const{name:y}=E;if(y==="#text"){const S=document.createTextNode(E.value);u.push(S),w.append(S);continue}const x=(d=E==null?void 0:E.attributes)!=null&&d.xmlns?document.createElementNS(E.attributes.xmlns,y):document.createElement(y);if(w.append(x),E.attributes&&this.setAttributes({html:x,element:E,storage:t,intent:r,linkService:s}),((p=E.children)==null?void 0:p.length)>0)h.push([E,-1,x]);else if(E.value){const S=document.createTextNode(E.value);o&&Tu.shouldBuildText(y)&&u.push(S),x.append(S)}}for(const m of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const ud=1e3,aN=9,go=new WeakSet;function Dr(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class oN{static create(e){switch(e.data.annotationType){case Qe.LINK:return new _A(e);case Qe.TEXT:return new lN(e);case Qe.WIDGET:switch(e.data.fieldType){case"Tx":return new cN(e);case"Btn":return e.data.radioButton?new NA(e):e.data.checkBox?new hN(e):new dN(e);case"Ch":return new fN(e);case"Sig":return new uN(e)}return new Ao(e);case Qe.POPUP:return new f0(e);case Qe.FREETEXT:return new MA(e);case Qe.LINE:return new mN(e);case Qe.SQUARE:return new gN(e);case Qe.CIRCLE:return new vN(e);case Qe.POLYLINE:return new IA(e);case Qe.CARET:return new wN(e);case Qe.INK:return new ey(e);case Qe.POLYGON:return new yN(e);case Qe.HIGHLIGHT:return new jA(e);case Qe.UNDERLINE:return new xN(e);case Qe.SQUIGGLY:return new bN(e);case Qe.STRIKEOUT:return new AN(e);case Qe.STAMP:return new DA(e);case Qe.FILEATTACHMENT:return new SN(e);default:return new Ve(e)}}}var ja,Rl,Ll,xh,d0;const iy=class iy{constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:i=!1}={}){b(this,xh);b(this,ja,null);b(this,Rl,!1);b(this,Ll,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(s)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:s}){return!!(e!=null&&e.str||t!=null&&t.str||s!=null&&s.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return iy._hasPopupData(this.data)}updateEdited(e){var s;if(!this.container)return;l(this,ja)||g(this,ja,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&A(this,xh,d0).call(this,t),(s=l(this,Ll))==null||s.popup.updateEdited(e)}resetEdited(){var e;l(this,ja)&&(A(this,xh,d0).call(this,l(this,ja).rect),(e=l(this,Ll))==null||e.popup.resetEdited(),g(this,ja,null))}_createContainer(e){const{data:t,parent:{page:s,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),this instanceof Ao||(r.tabIndex=ud);const{style:a}=r;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof f0){const{rotation:w}=t;return!t.hasOwnCanvas&&w!==0&&this.setRotation(w,r),r}const{width:o,height:c}=Dr(t.rect);if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const w=t.borderStyle.horizontalCornerRadius,E=t.borderStyle.verticalCornerRadius;if(w>0||E>0){const x=`calc(${w}px * var(--scale-factor)) / calc(${E}px * var(--scale-factor))`;a.borderRadius=x}else if(this instanceof NA){const x=`calc(${o}px * var(--scale-factor)) / calc(${c}px * var(--scale-factor))`;a.borderRadius=x}switch(t.borderStyle.style){case Nc.SOLID:a.borderStyle="solid";break;case Nc.DASHED:a.borderStyle="dashed";break;case Nc.BEVELED:se("Unimplemented border style: beveled");break;case Nc.INSET:se("Unimplemented border style: inset");break;case Nc.UNDERLINE:a.borderBottomStyle="solid";break}const y=t.borderColor||null;y?(g(this,Rl,!0),a.borderColor=W.makeHexColor(y[0]|0,y[1]|0,y[2]|0)):a.borderWidth=0}const u=W.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:h,pageHeight:d,pageX:p,pageY:m}=i.rawDims;a.left=`${100*(u[0]-p)/h}%`,a.top=`${100*(u[1]-m)/d}%`;const{rotation:v}=t;return t.hasOwnCanvas||v===0?(a.width=`${100*o/h}%`,a.height=`${100*c/d}%`):this.setRotation(v,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:i}=this.parent.viewport.rawDims,{width:r,height:a}=Dr(this.data.rect);let o,c;e%180===0?(o=100*r/s,c=100*a/i):(o=100*a/s,c=100*r/i),t.style.width=`${o}%`,t.style.height=`${c}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,i)=>{const r=i.detail[t],a=r[0],o=r.slice(1);i.target.style[s]=Hw[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[s]:Hw[`${a}_rgb`](o)})};return ae(this,"_commonActions",{display:t=>{const{display:s}=t.detail,i=s%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const i of Object.keys(t.detail)){const r=e[i]||s[i];r==null||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[i,r]of Object.entries(t)){const a=s[i];if(a){const o={detail:{[i]:r},target:e};a(o),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,i,r]=this.data.rect.map(w=>Math.fround(w));if(e.length===8){const[w,E,y,x]=e.subarray(2,6);if(i===w&&r===E&&t===y&&s===x)return}const{style:a}=this.container;let o;if(l(this,Rl)){const{borderColor:w,borderWidth:E}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const c=i-t,u=r-s,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const p=h.createElement("defs");d.append(p);const m=h.createElement("clipPath"),v=`clippath_${this.data.id}`;m.setAttribute("id",v),m.setAttribute("clipPathUnits","objectBoundingBox"),p.append(m);for(let w=2,E=e.length;w<E;w+=8){const y=e[w],x=e[w+1],S=e[w+2],_=e[w+3],k=h.createElement("rect"),T=(S-t)/c,C=(r-x)/u,P=(y-S)/c,j=(x-_)/u;k.setAttribute("x",T),k.setAttribute("y",C),k.setAttribute("width",P),k.setAttribute("height",j),m.append(k),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${T}" y="${C}" width="${P}" height="${j}"/>`)}l(this,Rl)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(d),this.container.style.clipPath=`url(#${v})`}_createPopup(){const{data:e}=this,t=g(this,Ll,new f0({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){xe("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:r,id:a,exportValues:o}of i){if(r===-1||a===t)continue;const c=typeof o=="string"?o:null,u=document.querySelector(`[data-element-id="${a}"]`);if(u&&!go.has(u)){se(`_getElementsByName - element not allowed: ${a}`);continue}s.push({id:a,exportValue:c,domElement:u})}return s}for(const i of document.getElementsByName(e)){const{exportValue:r}=i,a=i.getAttribute("data-element-id");a!==t&&go.has(i)&&s.push({id:a,exportValue:r,domElement:i})}return s}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};ja=new WeakMap,Rl=new WeakMap,Ll=new WeakMap,xh=new WeakSet,d0=function(e){const{container:{style:t},data:{rect:s,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:a,pageX:o,pageY:c}}}}=this;s==null||s.splice(0,4,...e);const{width:u,height:h}=Dr(e);t.left=`${100*(e[0]-o)/r}%`,t.top=`${100*(a-e[3]+c)/a}%`,i===0?(t.width=`${100*u/r}%`,t.height=`${100*h/a}%`):this.setRotation(i)};let Ve=iy;var En,Yr,kA,CA;class _A extends Ve{constructor(t,s=null){super(t,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});b(this,En);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:s}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let r=!1;return t.url?(s.addLinkAttributes(i,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(i,t.action),r=!0):t.attachment?(A(this,En,kA).call(this,i,t.attachment,t.attachmentDest),r=!0):t.setOCGState?(A(this,En,CA).call(this,i,t.setOCGState),r=!0):t.dest?(this._bindLink(i,t.dest),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),r=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}_bindLink(t,s){t.href=this.linkService.getDestinationHash(s),t.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&A(this,En,Yr).call(this)}_bindNamedAction(t,s){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(s),!1),A(this,En,Yr).call(this)}_bindJSAction(t,s){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(s.actions)){const a=i.get(r);a&&(t[a]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:r}}),!1})}t.onclick||(t.onclick=()=>!1),A(this,En,Yr).call(this)}_bindResetFormAction(t,s){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),A(this,En,Yr).call(this),!this._fieldObjects){se('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{var d;i==null||i();const{fields:r,refs:a,include:o}=s,c=[];if(r.length!==0||a.length!==0){const p=new Set(a);for(const m of r){const v=this._fieldObjects[m]||[];for(const{id:w}of v)p.add(w)}for(const m of Object.values(this._fieldObjects))for(const v of m)p.has(v.id)===o&&c.push(v)}else for(const p of Object.values(this._fieldObjects))c.push(...p);const u=this.annotationStorage,h=[];for(const p of c){const{id:m}=p;switch(h.push(m),p.type){case"text":{const w=p.defaultValue||"";u.setValue(m,{value:w});break}case"checkbox":case"radiobutton":{const w=p.defaultValue===p.exportValues;u.setValue(m,{value:w});break}case"combobox":case"listbox":{const w=p.defaultValue||"";u.setValue(m,{value:w});break}default:continue}const v=document.querySelector(`[data-element-id="${m}"]`);if(v){if(!go.has(v)){se(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}En=new WeakSet,Yr=function(){this.container.setAttribute("data-internal-link","")},kA=function(t,s,i=null){t.href=this.linkService.getAnchorUrl(""),s.description&&(t.title=s.description),t.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(s.content,s.filename,i),!1},A(this,En,Yr).call(this)},CA=function(t,s){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(s),!1),A(this,En,Yr).call(this)};class lN extends Ve{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Ao extends Ve{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Wt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,i,r){s.includes("mouse")?e.addEventListener(s,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(s,a=>{var o;if(s==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}r&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(a)}}))})}_setEventListeners(e,t,s,i){var r,a,o;for(const[c,u]of s)(u==="Action"||(r=this.data.actions)!=null&&r[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,u,i),u==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":W.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||aN,r=e.style;let a;const o=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o),h=Math.round(u/(km*i))||1,d=u/h;a=Math.min(i,c(d/km))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(i,c(u/km))}r.fontSize=`calc(${a}px * var(--scale-factor))`,r.color=W.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class cN extends Ao{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,i){const r=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=s),r.setValue(a.id,{[i]:s})}render(){var i,r;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let o=a.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&o.length>c&&(o=o.slice(0,c));let u=a.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??o,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type="text",s.setAttribute("value",u??o),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),go.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=ud,this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",p=>{e.setValue(t,{value:p.target.value}),this.setPropertyOnSiblings(s,"value",p.target.value,"value"),h.formattedValue=null}),s.addEventListener("resetform",p=>{const m=this.data.defaultFieldValue??"";s.value=h.userValue=m,h.formattedValue=null});let d=p=>{const{formattedValue:m}=h;m!=null&&(p.target.value=m),p.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",m=>{var w;if(h.focused)return;const{target:v}=m;h.userValue&&(v.value=h.userValue),h.lastCommittedValue=v.value,h.commitKey=1,(w=this.data.actions)!=null&&w.Focus||(h.focused=!0)}),s.addEventListener("updatefromsandbox",m=>{this.showElementAndHideCanvas(m.target);const v={value(w){h.userValue=w.detail.value??"",e.setValue(t,{value:h.userValue.toString()}),w.target.value=h.userValue},formattedValue(w){const{formattedValue:E}=w.detail;h.formattedValue=E,E!=null&&w.target!==document.activeElement&&(w.target.value=E),e.setValue(t,{formattedValue:E})},selRange(w){w.target.setSelectionRange(...w.detail.selRange)},charLimit:w=>{var S;const{charLimit:E}=w.detail,{target:y}=w;if(E===0){y.removeAttribute("maxLength");return}y.setAttribute("maxLength",E);let x=h.userValue;!x||x.length<=E||(x=x.slice(0,E),y.value=h.userValue=x,e.setValue(t,{value:x}),(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:x,willCommit:!0,commitKey:1,selStart:y.selectionStart,selEnd:y.selectionEnd}}))}};this._dispatchEventFromSandbox(v,m)}),s.addEventListener("keydown",m=>{var E;h.commitKey=1;let v=-1;if(m.key==="Escape"?v=0:m.key==="Enter"&&!this.data.multiLine?v=2:m.key==="Tab"&&(h.commitKey=3),v===-1)return;const{value:w}=m.target;h.lastCommittedValue!==w&&(h.lastCommittedValue=w,h.userValue=w,(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:w,willCommit:!0,commitKey:v,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}}))});const p=d;d=null,s.addEventListener("blur",m=>{var w,E;if(!h.focused||!m.relatedTarget)return;(w=this.data.actions)!=null&&w.Blur||(h.focused=!1);const{value:v}=m.target;h.userValue=v,h.lastCommittedValue!==v&&((E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:h.commitKey,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}})),p(m)}),(r=this.data.actions)!=null&&r.Keystroke&&s.addEventListener("beforeinput",m=>{var k;h.lastCommittedValue=null;const{data:v,target:w}=m,{value:E,selectionStart:y,selectionEnd:x}=w;let S=y,_=x;switch(m.inputType){case"deleteWordBackward":{const T=E.substring(0,y).match(/\w*[^\w]*$/);T&&(S-=T[0].length);break}case"deleteWordForward":{const T=E.substring(y).match(/^[^\w]*\w*/);T&&(_+=T[0].length);break}case"deleteContentBackward":y===x&&(S-=1);break;case"deleteContentForward":y===x&&(_+=1);break}m.preventDefault(),(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,change:v||"",willCommit:!1,selStart:S,selEnd:_}})}),this._setEventListeners(s,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],m=>m.target.value)}if(d&&s.addEventListener("blur",d),this.data.comb){const m=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${m}px * var(--scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class uN extends Ao{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class hN extends Ao{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(s,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return go.add(r),r.setAttribute("data-element-id",s),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=ud,r.addEventListener("change",a=>{const{name:o,checked:c}=a.target;for(const u of this._getElementsByName(o,s)){const h=c&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=h),e.setValue(u.id,{value:h})}e.setValue(s,{value:c})}),r.addEventListener("resetform",a=>{const o=t.defaultFieldValue||"Off";a.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",a=>{const o={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(s,{value:c.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class NA extends Ao{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(s,{value:i})),i)for(const a of this._getElementsByName(t.fieldName,s))e.setValue(a.id,{value:!1});const r=document.createElement("input");if(go.add(r),r.setAttribute("data-element-id",s),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=ud,r.addEventListener("change",a=>{const{name:o,checked:c}=a.target;for(const u of this._getElementsByName(o,s))e.setValue(u.id,{value:!1});e.setValue(s,{value:c})}),r.addEventListener("resetform",a=>{const o=t.defaultFieldValue;a.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;r.addEventListener("updatefromsandbox",o=>{const c={value:u=>{const h=a===u.detail.value;for(const d of this._getElementsByName(u.target.name)){const p=h&&d.id===s;d.domElement&&(d.domElement.checked=p),e.setValue(d.id,{value:p})}}};this._dispatchEventFromSandbox(c,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class dN extends _A{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class fN extends Ao{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");go.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=ud;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const p of i.options)p.selected=p.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,s.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),r=!1),i.append(d)}let a=null;if(r){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),i.prepend(h),a=()=>{h.remove(),i.removeEventListener("input",a),a=null},i.addEventListener("input",a)}const o=h=>{const d=h?"value":"textContent",{options:p,multiple:m}=i;return m?Array.prototype.filter.call(p,v=>v.selected).map(v=>v[d]):p.selectedIndex===-1?null:p[p.selectedIndex][d]};let c=o(!1);const u=h=>{const d=h.target.options;return Array.prototype.map.call(d,p=>({displayValue:p.textContent,exportValue:p.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",h=>{const d={value(p){a==null||a();const m=p.detail.value,v=new Set(Array.isArray(m)?m:[m]);for(const w of i.options)w.selected=v.has(w.value);e.setValue(t,{value:o(!0)}),c=o(!1)},multipleSelection(p){i.multiple=!0},remove(p){const m=i.options,v=p.detail.remove;m[v].selected=!1,i.remove(v),m.length>0&&Array.prototype.findIndex.call(m,E=>E.selected)===-1&&(m[0].selected=!0),e.setValue(t,{value:o(!0),items:u(p)}),c=o(!1)},clear(p){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),c=o(!1)},insert(p){const{index:m,displayValue:v,exportValue:w}=p.detail.insert,E=i.children[m],y=document.createElement("option");y.textContent=v,y.value=w,E?E.before(y):i.append(y),e.setValue(t,{value:o(!0),items:u(p)}),c=o(!1)},items(p){const{items:m}=p.detail;for(;i.length!==0;)i.remove(0);for(const v of m){const{displayValue:w,exportValue:E}=v,y=document.createElement("option");y.textContent=w,y.value=E,i.append(y)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:o(!0),items:u(p)}),c=o(!1)},indices(p){const m=new Set(p.detail.indices);for(const v of p.target.options)v.selected=m.has(v.index);e.setValue(t,{value:o(!0)}),c=o(!1)},editable(p){p.target.disabled=!p.detail.editable}};this._dispatchEventFromSandbox(d,h)}),i.addEventListener("input",h=>{var m;const d=o(!0),p=o(!1);e.setValue(t,{value:d}),h.preventDefault(),(m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:p,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):i.addEventListener("input",function(h){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class f0 extends Ve{constructor(e){const{data:t,elements:s}=e;super(e,{isRenderable:Ve._hasPopupData(t)}),this.elements=s,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new pN({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const s of this.elements)s.popup=e,s.container.ariaHasPopup="dialog",t.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(s=>`${Gv}${s}`).join(",")),this.container}}var Ml,mp,gp,Il,Da,ze,gi,jl,bh,Ah,Dl,vi,as,yi,Sh,wi,Eh,Fa,Oa,we,cf,p0,TA,PA,RA,LA,uf,hf,m0;class pN{constructor({container:e,color:t,elements:s,titleObj:i,modificationDate:r,contentsObj:a,richText:o,parent:c,rect:u,parentRect:h,open:d}){b(this,we);b(this,Ml,A(this,we,RA).bind(this));b(this,mp,A(this,we,m0).bind(this));b(this,gp,A(this,we,hf).bind(this));b(this,Il,A(this,we,uf).bind(this));b(this,Da,null);b(this,ze,null);b(this,gi,null);b(this,jl,null);b(this,bh,null);b(this,Ah,null);b(this,Dl,null);b(this,vi,!1);b(this,as,null);b(this,yi,null);b(this,Sh,null);b(this,wi,null);b(this,Eh,null);b(this,Fa,null);b(this,Oa,!1);var p;g(this,ze,e),g(this,Eh,i),g(this,gi,a),g(this,wi,o),g(this,Ah,c),g(this,Da,t),g(this,Sh,u),g(this,Dl,h),g(this,bh,s),g(this,jl,qv.toDateObject(r)),this.trigger=s.flatMap(m=>m.getElementsToTriggerPopup());for(const m of this.trigger)m.addEventListener("click",l(this,Il)),m.addEventListener("mouseenter",l(this,gp)),m.addEventListener("mouseleave",l(this,mp)),m.classList.add("popupTriggerArea");for(const m of s)(p=m.container)==null||p.addEventListener("keydown",l(this,Ml));l(this,ze).hidden=!0,d&&A(this,we,uf).call(this)}render(){if(l(this,as))return;const e=g(this,as,document.createElement("div"));if(e.className="popup",l(this,Da)){const r=e.style.outlineColor=W.makeHexColor(...l(this,Da));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:e.style.backgroundColor=W.makeHexColor(...l(this,Da).map(o=>Math.floor(.7*(255-o)+o)))}const t=document.createElement("span");t.className="header";const s=document.createElement("h1");if(t.append(s),{dir:s.dir,str:s.textContent}=l(this,Eh),e.append(t),l(this,jl)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,jl).valueOf()})),t.append(r)}const i=l(this,we,cf);if(i)EA.render({xfaHtml:i,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(l(this,gi));e.append(r)}l(this,ze).append(e)}_formatContents({str:e,dir:t}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=t;const i=e.split(/(?:\r\n?|\n)/);for(let r=0,a=i.length;r<a;++r){const o=i[r];s.append(document.createTextNode(o)),r<a-1&&s.append(document.createElement("br"))}return s}updateEdited({rect:e,popupContent:t}){var s;l(this,Fa)||g(this,Fa,{contentsObj:l(this,gi),richText:l(this,wi)}),e&&g(this,yi,null),t&&(g(this,wi,A(this,we,PA).call(this,t)),g(this,gi,null)),(s=l(this,as))==null||s.remove(),g(this,as,null)}resetEdited(){var e;l(this,Fa)&&({contentsObj:Dt(this,gi)._,richText:Dt(this,wi)._}=l(this,Fa),g(this,Fa,null),(e=l(this,as))==null||e.remove(),g(this,as,null),g(this,yi,null))}forceHide(){g(this,Oa,this.isVisible),l(this,Oa)&&(l(this,ze).hidden=!0)}maybeShow(){l(this,Oa)&&(l(this,as)||A(this,we,hf).call(this),g(this,Oa,!1),l(this,ze).hidden=!1)}get isVisible(){return l(this,ze).hidden===!1}}Ml=new WeakMap,mp=new WeakMap,gp=new WeakMap,Il=new WeakMap,Da=new WeakMap,ze=new WeakMap,gi=new WeakMap,jl=new WeakMap,bh=new WeakMap,Ah=new WeakMap,Dl=new WeakMap,vi=new WeakMap,as=new WeakMap,yi=new WeakMap,Sh=new WeakMap,wi=new WeakMap,Eh=new WeakMap,Fa=new WeakMap,Oa=new WeakMap,we=new WeakSet,cf=function(){const e=l(this,wi),t=l(this,gi);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&l(this,wi).html||null},p0=function(){var e,t,s;return((s=(t=(e=l(this,we,cf))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.fontSize)||0},TA=function(){var e,t,s;return((s=(t=(e=l(this,we,cf))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.color)||null},PA=function(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:l(this,we,TA),fontSize:l(this,we,p0)?`calc(${l(this,we,p0)}px * var(--scale-factor))`:""}};for(const r of e.split(`
`))t.push({name:"span",value:r,attributes:i});return s},RA=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&l(this,vi))&&A(this,we,uf).call(this)},LA=function(){if(l(this,yi)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:i,pageY:r}}}=l(this,Ah);let a=!!l(this,Dl),o=a?l(this,Dl):l(this,Sh);for(const v of l(this,bh))if(!o||W.intersect(v.data.rect,o)!==null){o=v.data.rect,a=!0;break}const c=W.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),h=a?o[2]-o[0]+5:0,d=c[0]+h,p=c[1];g(this,yi,[100*(d-i)/t,100*(p-r)/s]);const{style:m}=l(this,ze);m.left=`${l(this,yi)[0]}%`,m.top=`${l(this,yi)[1]}%`},uf=function(){g(this,vi,!l(this,vi)),l(this,vi)?(A(this,we,hf).call(this),l(this,ze).addEventListener("click",l(this,Il)),l(this,ze).addEventListener("keydown",l(this,Ml))):(A(this,we,m0).call(this),l(this,ze).removeEventListener("click",l(this,Il)),l(this,ze).removeEventListener("keydown",l(this,Ml)))},hf=function(){l(this,as)||this.render(),this.isVisible?l(this,vi)&&l(this,ze).classList.add("focused"):(A(this,we,LA).call(this),l(this,ze).hidden=!1,l(this,ze).style.zIndex=parseInt(l(this,ze).style.zIndex)+1e3)},m0=function(){l(this,ze).classList.remove("focused"),!(l(this,vi)||!this.isVisible)&&(l(this,ze).hidden=!0,l(this,ze).style.zIndex=parseInt(l(this,ze).style.zIndex)-1e3)};class MA extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=ne.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var _h;class mN extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});b(this,_h,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:s,height:i}=Dr(t.rect),r=this.svgFactory.create(s,i,!0),a=g(this,_h,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,_h)}addHighlightArea(){this.container.classList.add("highlightArea")}}_h=new WeakMap;var kh;class gN extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});b(this,kh,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:s,height:i}=Dr(t.rect),r=this.svgFactory.create(s,i,!0),a=t.borderStyle.width,o=g(this,kh,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",s-a),o.setAttribute("height",i-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,kh)}addHighlightArea(){this.container.classList.add("highlightArea")}}kh=new WeakMap;var Ch;class vN extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});b(this,Ch,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:s,height:i}=Dr(t.rect),r=this.svgFactory.create(s,i,!0),a=t.borderStyle.width,o=g(this,Ch,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",s/2),o.setAttribute("cy",i/2),o.setAttribute("rx",s/2-a/2),o.setAttribute("ry",i/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Ch)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ch=new WeakMap;var Nh;class IA extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});b(this,Nh,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:s,borderStyle:i,popupRef:r}}=this;if(!s)return this.container;const{width:a,height:o}=Dr(t),c=this.svgFactory.create(a,o,!0);let u=[];for(let d=0,p=s.length;d<p;d+=2){const m=s[d]-t[0],v=t[3]-s[d+1];u.push(`${m},${v}`)}u=u.join(" ");const h=g(this,Nh,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Nh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Nh=new WeakMap;class yN extends IA{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class wN extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Th,za,Ph,g0;class ey extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});b(this,Ph);b(this,Th,null);b(this,za,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ne.HIGHLIGHT:ne.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:s,inkLists:i,borderStyle:r,popupRef:a}}=this,{transform:o,width:c,height:u}=A(this,Ph,g0).call(this,s,t),h=this.svgFactory.create(c,u,!0),d=g(this,Th,this.svgFactory.createElement("svg:g"));h.append(d),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",o);for(let p=0,m=i.length;p<m;p++){const v=this.svgFactory.createElement(this.svgElementName);l(this,za).push(v),v.setAttribute("points",i[p].join(",")),d.append(v)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:s,points:i,rect:r}=t,a=l(this,Th);if(s>=0&&a.setAttribute("stroke-width",s||1),i)for(let o=0,c=l(this,za).length;o<c;o++)l(this,za)[o].setAttribute("points",i[o].join(","));if(r){const{transform:o,width:c,height:u}=A(this,Ph,g0).call(this,this.data.rotation,r);a.parentElement.setAttribute("viewBox",`0 0 ${c} ${u}`),a.setAttribute("transform",o)}}getElementsToTriggerPopup(){return l(this,za)}addHighlightArea(){this.container.classList.add("highlightArea")}}Th=new WeakMap,za=new WeakMap,Ph=new WeakSet,g0=function(t,s){switch(t){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class jA extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ne.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class xN extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class bN extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class AN extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class DA extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ne.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Rh,Lh,v0;class SN extends Ve{constructor(t){var i;super(t,{isRenderable:!0});b(this,Lh);b(this,Rh,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:s}=this;let i;s.hasAppearance||s.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),i.addEventListener("dblclick",A(this,Lh,v0).bind(this)),g(this,Rh,i);const{isMac:r}=Wt.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(r?a.metaKey:a.ctrlKey)&&A(this,Lh,v0).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return l(this,Rh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rh=new WeakMap,Lh=new WeakSet,v0=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Mh,Ba,Ha,Ih,vo,FA,y0;class EN{constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:i,page:r,viewport:a,structTreeLayer:o}){b(this,vo);b(this,Mh,null);b(this,Ba,null);b(this,Ha,new Map);b(this,Ih,null);this.div=e,g(this,Mh,t),g(this,Ba,s),g(this,Ih,o||null),this.page=r,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return l(this,Ha).size>0}async render(e){var a;const{annotations:t}=e,s=this.div;po(s,this.viewport);const i=new Map,r={data:null,layer:s,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Zv,annotationStorage:e.annotationStorage||new Qv,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of t){if(o.noHTML)continue;const c=o.annotationType===Qe.POPUP;if(c){const d=i.get(o.id);if(!d)continue;r.elements=d}else{const{width:d,height:p}=Dr(o.rect);if(d<=0||p<=0)continue}r.data=o;const u=oN.create(r);if(!u.isRenderable)continue;if(!c&&o.popupRef){const d=i.get(o.popupRef);d?d.push(u):i.set(o.popupRef,[u])}const h=u.render();o.hidden&&(h.style.visibility="hidden"),await A(this,vo,FA).call(this,h,o.id),u._isEditable&&(l(this,Ha).set(u.data.id,u),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(u))}A(this,vo,y0).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,po(t,{rotation:e.rotation}),A(this,vo,y0).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(l(this,Ha).values())}getEditableAnnotation(e){return l(this,Ha).get(e)}}Mh=new WeakMap,Ba=new WeakMap,Ha=new WeakMap,Ih=new WeakMap,vo=new WeakSet,FA=async function(e,t){var a,o;const s=e.firstChild||e,i=s.id=`${Gv}${t}`,r=await((a=l(this,Ih))==null?void 0:a.getAriaAttributes(i));if(r)for(const[c,u]of r)s.setAttribute(c,u);this.div.append(e),(o=l(this,Mh))==null||o.moveElementInDOM(this.div,e,s,!1)},y0=function(){if(!l(this,Ba))return;const e=this.div;for(const[t,s]of l(this,Ba)){const i=e.querySelector(`[data-annotation-id="${t}"]`);if(!i)continue;s.className="annotationContent";const{firstChild:r}=i;r?r.nodeName==="CANVAS"?r.replaceWith(s):r.classList.contains("annotationContent")?r.after(s):r.before(s):i.append(s)}l(this,Ba).clear()};const Ld=/\r\n?|\n/g;var os,pn,jh,Ua,mn,qe,OA,zA,BA,df,Mi,ff,pf,HA,x0,UA;const Ae=class Ae extends je{constructor(t){super({...t,name:"freeTextEditor"});b(this,qe);b(this,os);b(this,pn,"");b(this,jh,`${this.id}-editor`);b(this,Ua,null);b(this,mn);g(this,os,t.color||Ae._defaultColor||je._defaultLineColor),g(this,mn,t.fontSize||Ae._defaultFontSize)}static get _keyboardManager(){const t=Ae.prototype,s=a=>a.isEmpty(),i=mo.TRANSLATE_SMALL,r=mo.TRANSLATE_BIG;return ae(this,"_keyboardManager",new cd([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:s}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:s}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:s}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:s}]]))}static initialize(t,s){je.initialize(t,s);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,s){switch(t){case ce.FREETEXT_SIZE:Ae._defaultFontSize=s;break;case ce.FREETEXT_COLOR:Ae._defaultColor=s;break}}updateParams(t,s){switch(t){case ce.FREETEXT_SIZE:A(this,qe,OA).call(this,s);break;case ce.FREETEXT_COLOR:A(this,qe,zA).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[ce.FREETEXT_SIZE,Ae._defaultFontSize],[ce.FREETEXT_COLOR,Ae._defaultColor||je._defaultLineColor]]}get propertiesToUpdate(){return[[ce.FREETEXT_SIZE,l(this,mn)],[ce.FREETEXT_COLOR,l(this,os)]]}_translateEmpty(t,s){this._uiManager.translateSelectedEditors(t,s,!0)}getInitialTranslation(){const t=this.parentScale;return[-Ae._internalPadding*t,-(Ae._internalPadding+l(this,mn))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(ne.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),g(this,Ua,new AbortController);const t=this._uiManager.combinedSignal(l(this,Ua));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,jh)),this._isDraggable=!0,(t=l(this,Ua))==null||t.abort(),g(this,Ua,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var s;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=l(this,pn),s=g(this,pn,A(this,qe,BA).call(this).trimEnd());if(t===s)return;const i=r=>{if(g(this,pn,r),!r){this.remove();return}A(this,qe,pf).call(this),this._uiManager.rebuild(this),A(this,qe,df).call(this)};this.addCommands({cmd:()=>{i(s)},undo:()=>{i(t)},mustExec:!1}),A(this,qe,df).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Ae._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,s;this.width&&(t=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,jh)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${l(this,mn)}px * var(--scale-factor))`,i.color=l(this,os),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Kf(this,this.div,["dblclick","keydown"]),this.width){const[r,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[h,d]=this.pageDimensions,[p,m]=this.pageTranslation;let v,w;switch(this.rotation){case 0:v=t+(o[0]-p)/h,w=s+this.height-(o[1]-m)/d;break;case 90:v=t+(o[0]-p)/h,w=s-(o[1]-m)/d,[c,u]=[u,-c];break;case 180:v=t-this.width+(o[0]-p)/h,w=s-(o[1]-m)/d,[c,u]=[-c,-u];break;case 270:v=t+(o[0]-p-this.height*d)/h,w=s+(o[1]-m-this.width*h)/d,[c,u]=[-u,c];break}this.setAt(v*r,w*a,c,u)}else this.setAt(t*r,s*a,this.width*r,this.height*a);A(this,qe,pf).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var v,w,E;const s=t.clipboardData||window.clipboardData,{types:i}=s;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const r=A(v=Ae,Mi,x0).call(v,s.getData("text")||"").replaceAll(Ld,`
`);if(!r)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!r.includes(`
`)){o.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:c,startOffset:u}=o,h=[],d=[];if(c.nodeType===Node.TEXT_NODE){const y=c.parentElement;if(d.push(c.nodeValue.slice(u).replaceAll(Ld,"")),y!==this.editorDiv){let x=h;for(const S of this.editorDiv.childNodes){if(S===y){x=d;continue}x.push(A(w=Ae,Mi,ff).call(w,S))}}h.push(c.nodeValue.slice(0,u).replaceAll(Ld,""))}else if(c===this.editorDiv){let y=h,x=0;for(const S of this.editorDiv.childNodes)x++===u&&(y=d),y.push(A(E=Ae,Mi,ff).call(E,S))}g(this,pn,`${h.join(`
`)}${r}${d.join(`
`)}`),A(this,qe,pf).call(this);const p=new Range;let m=h.reduce((y,x)=>y+x.length,0);for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const x=y.nodeValue.length;if(m<=x){p.setStart(y,m),p.setEnd(y,m);break}m-=x}a.removeAllRanges(),a.addRange(p)}get contentDiv(){return this.editorDiv}static async deserialize(t,s,i){var o;let r=null;if(t instanceof MA){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:d,id:p,popupRef:m},textContent:v,textPosition:w,parent:{page:{pageNumber:E}}}=t;if(!v||v.length===0)return null;r=t={annotationType:ne.FREETEXT,color:Array.from(u),fontSize:c,value:v.join(`
`),position:w,pageIndex:E-1,rect:h.slice(0),rotation:d,id:p,deleted:!1,popupRef:m}}const a=await super.deserialize(t,s,i);return g(a,mn,t.fontSize),g(a,os,W.makeHexColor(...t.color)),g(a,pn,A(o=Ae,Mi,x0).call(o,t.value)),a.annotationElementId=t.id||null,a._initialData=r,a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Ae._internalPadding*this.parentScale,i=this.getRect(s,s),r=je._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:l(this,os)),a={annotationType:ne.FREETEXT,color:r,fontSize:l(this,mn),value:A(this,qe,HA).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?a:this.annotationElementId&&!A(this,qe,UA).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){const s=super.renderAnnotationElement(t);if(this.deleted)return s;const{style:i}=s;i.fontSize=`calc(${l(this,mn)}px * var(--scale-factor))`,i.color=l(this,os),s.replaceChildren();for(const a of l(this,pn).split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),s.append(o)}const r=Ae._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(r,r),popupContent:l(this,pn)}),s}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};os=new WeakMap,pn=new WeakMap,jh=new WeakMap,Ua=new WeakMap,mn=new WeakMap,qe=new WeakSet,OA=function(t){const s=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-l(this,mn))*this.parentScale),g(this,mn,r),A(this,qe,df).call(this)},i=l(this,mn);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ce.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},zA=function(t){const s=r=>{g(this,os,this.editorDiv.style.color=r)},i=l(this,os);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ce.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},BA=function(){var i;const t=[];this.editorDiv.normalize();let s=null;for(const r of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(t.push(A(i=Ae,Mi,ff).call(i,r)),s=r);return t.join(`
`)},df=function(){const[t,s]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:a}=this,o=a.style.display,c=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",r.div.append(this.div),i=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/s):(this.width=i.height/t,this.height=i.width/s),this.fixAndSetPosition()},Mi=new WeakSet,ff=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Ld,"")},pf=function(){if(this.editorDiv.replaceChildren(),!!l(this,pn))for(const t of l(this,pn).split(`
`)){const s=document.createElement("div");s.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(s)}},HA=function(){return l(this,pn).replaceAll(""," ")},x0=function(t){return t.replaceAll(" ","")},UA=function(t){const{value:s,fontSize:i,color:r,pageIndex:a}=this._initialData;return this._hasBeenMoved||t.value!==s||t.fontSize!==i||t.color.some((o,c)=>o!==r[c])||t.pageIndex!==a},b(Ae,Mi),X(Ae,"_freeTextDefaultContent",""),X(Ae,"_internalPadding",0),X(Ae,"_defaultColor",null),X(Ae,"_defaultFontSize",10),X(Ae,"_type","freetext"),X(Ae,"_editorType",ne.FREETEXT);let w0=Ae;class B{toSVGPath(){xe("Abstract method `toSVGPath` must be implemented.")}get box(){xe("Abstract getter `box` must be implemented.")}serialize(e,t){xe("Abstract method `serialize` must be implemented.")}static _rescale(e,t,s,i,r,a){a||(a=new Float32Array(e.length));for(let o=0,c=e.length;o<c;o+=2)a[o]=t+e[o]*i,a[o+1]=s+e[o+1]*r;return a}static _rescaleAndSwap(e,t,s,i,r,a){a||(a=new Float32Array(e.length));for(let o=0,c=e.length;o<c;o+=2)a[o]=t+e[o+1]*i,a[o+1]=s+e[o]*r;return a}static _translate(e,t,s,i){i||(i=new Float32Array(e.length));for(let r=0,a=e.length;r<a;r+=2)i[r]=t+e[r],i[r+1]=s+e[r+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,s,i,r){switch(r){case 90:return[1-t/s,e/i];case 180:return[1-e/s,1-t/i];case 270:return[t/s,1-e/i];default:return[e/s,t/i]}}static _normalizePagePoint(e,t,s){switch(s){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,s,i,r,a){return[(e+5*s)/6,(t+5*i)/6,(5*s+r)/6,(5*i+a)/6,(s+r)/2,(i+a)/2]}}X(B,"PRECISION",1e-4);var gn,ls,Fl,Ol,Fs,re,$a,Va,Dh,Fh,zl,Bl,mr,Oh,vp,yp,st,Gc,$A,VA,WA,GA,XA,YA;const ei=class ei{constructor({x:e,y:t},s,i,r,a,o=0){b(this,st);b(this,gn);b(this,ls,[]);b(this,Fl);b(this,Ol);b(this,Fs,[]);b(this,re,new Float32Array(18));b(this,$a);b(this,Va);b(this,Dh);b(this,Fh);b(this,zl);b(this,Bl);b(this,mr,[]);g(this,gn,s),g(this,Bl,r*i),g(this,Ol,a),l(this,re).set([NaN,NaN,NaN,NaN,e,t],6),g(this,Fl,o),g(this,Fh,l(ei,Oh)*i),g(this,Dh,l(ei,yp)*i),g(this,zl,i),l(this,mr).push(e,t)}isEmpty(){return isNaN(l(this,re)[8])}add({x:e,y:t}){var j;g(this,$a,e),g(this,Va,t);const[s,i,r,a]=l(this,gn);let[o,c,u,h]=l(this,re).subarray(8,12);const d=e-u,p=t-h,m=Math.hypot(d,p);if(m<l(this,Dh))return!1;const v=m-l(this,Fh),w=v/m,E=w*d,y=w*p;let x=o,S=c;o=u,c=h,u+=E,h+=y,(j=l(this,mr))==null||j.push(e,t);const _=-y/v,k=E/v,T=_*l(this,Bl),C=k*l(this,Bl);return l(this,re).set(l(this,re).subarray(2,8),0),l(this,re).set([u+T,h+C],4),l(this,re).set(l(this,re).subarray(14,18),12),l(this,re).set([u-T,h-C],16),isNaN(l(this,re)[6])?(l(this,Fs).length===0&&(l(this,re).set([o+T,c+C],2),l(this,Fs).push(NaN,NaN,NaN,NaN,(o+T-s)/r,(c+C-i)/a),l(this,re).set([o-T,c-C],14),l(this,ls).push(NaN,NaN,NaN,NaN,(o-T-s)/r,(c-C-i)/a)),l(this,re).set([x,S,o,c,u,h],6),!this.isEmpty()):(l(this,re).set([x,S,o,c,u,h],6),Math.abs(Math.atan2(S-c,x-o)-Math.atan2(y,E))<Math.PI/2?([o,c,u,h]=l(this,re).subarray(2,6),l(this,Fs).push(NaN,NaN,NaN,NaN,((o+u)/2-s)/r,((c+h)/2-i)/a),[o,c,x,S]=l(this,re).subarray(14,18),l(this,ls).push(NaN,NaN,NaN,NaN,((x+o)/2-s)/r,((S+c)/2-i)/a),!0):([x,S,o,c,u,h]=l(this,re).subarray(0,6),l(this,Fs).push(((x+5*o)/6-s)/r,((S+5*c)/6-i)/a,((5*o+u)/6-s)/r,((5*c+h)/6-i)/a,((o+u)/2-s)/r,((c+h)/2-i)/a),[u,h,o,c,x,S]=l(this,re).subarray(12,18),l(this,ls).push(((x+5*o)/6-s)/r,((S+5*c)/6-i)/a,((5*o+u)/6-s)/r,((5*c+h)/6-i)/a,((o+u)/2-s)/r,((c+h)/2-i)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=l(this,Fs),t=l(this,ls);if(isNaN(l(this,re)[6])&&!this.isEmpty())return A(this,st,$A).call(this);const s=[];s.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?s.push(`L${e[i+4]} ${e[i+5]}`):s.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);A(this,st,WA).call(this,s);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?s.push(`L${t[i+4]} ${t[i+5]}`):s.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return A(this,st,VA).call(this,s),s.join(" ")}newFreeDrawOutline(e,t,s,i,r,a){return new qA(e,t,s,i,r,a)}getOutlines(){var d;const e=l(this,Fs),t=l(this,ls),s=l(this,re),[i,r,a,o]=l(this,gn),c=new Float32Array((((d=l(this,mr))==null?void 0:d.length)??0)+2);for(let p=0,m=c.length-2;p<m;p+=2)c[p]=(l(this,mr)[p]-i)/a,c[p+1]=(l(this,mr)[p+1]-r)/o;if(c[c.length-2]=(l(this,$a)-i)/a,c[c.length-1]=(l(this,Va)-r)/o,isNaN(s[6])&&!this.isEmpty())return A(this,st,GA).call(this,c);const u=new Float32Array(l(this,Fs).length+24+l(this,ls).length);let h=e.length;for(let p=0;p<h;p+=2){if(isNaN(e[p])){u[p]=u[p+1]=NaN;continue}u[p]=e[p],u[p+1]=e[p+1]}h=A(this,st,YA).call(this,u,h);for(let p=t.length-6;p>=6;p-=6)for(let m=0;m<6;m+=2){if(isNaN(t[p+m])){u[h]=u[h+1]=NaN,h+=2;continue}u[h]=t[p+m],u[h+1]=t[p+m+1],h+=2}return A(this,st,XA).call(this,u,h),this.newFreeDrawOutline(u,c,l(this,gn),l(this,zl),l(this,Fl),l(this,Ol))}};gn=new WeakMap,ls=new WeakMap,Fl=new WeakMap,Ol=new WeakMap,Fs=new WeakMap,re=new WeakMap,$a=new WeakMap,Va=new WeakMap,Dh=new WeakMap,Fh=new WeakMap,zl=new WeakMap,Bl=new WeakMap,mr=new WeakMap,Oh=new WeakMap,vp=new WeakMap,yp=new WeakMap,st=new WeakSet,Gc=function(){const e=l(this,re).subarray(4,6),t=l(this,re).subarray(16,18),[s,i,r,a]=l(this,gn);return[(l(this,$a)+(e[0]-t[0])/2-s)/r,(l(this,Va)+(e[1]-t[1])/2-i)/a,(l(this,$a)+(t[0]-e[0])/2-s)/r,(l(this,Va)+(t[1]-e[1])/2-i)/a]},$A=function(){const[e,t,s,i]=l(this,gn),[r,a,o,c]=A(this,st,Gc).call(this);return`M${(l(this,re)[2]-e)/s} ${(l(this,re)[3]-t)/i} L${(l(this,re)[4]-e)/s} ${(l(this,re)[5]-t)/i} L${r} ${a} L${o} ${c} L${(l(this,re)[16]-e)/s} ${(l(this,re)[17]-t)/i} L${(l(this,re)[14]-e)/s} ${(l(this,re)[15]-t)/i} Z`},VA=function(e){const t=l(this,ls);e.push(`L${t[4]} ${t[5]} Z`)},WA=function(e){const[t,s,i,r]=l(this,gn),a=l(this,re).subarray(4,6),o=l(this,re).subarray(16,18),[c,u,h,d]=A(this,st,Gc).call(this);e.push(`L${(a[0]-t)/i} ${(a[1]-s)/r} L${c} ${u} L${h} ${d} L${(o[0]-t)/i} ${(o[1]-s)/r}`)},GA=function(e){const t=l(this,re),[s,i,r,a]=l(this,gn),[o,c,u,h]=A(this,st,Gc).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(t[2]-s)/r,(t[3]-i)/a,NaN,NaN,NaN,NaN,(t[4]-s)/r,(t[5]-i)/a,NaN,NaN,NaN,NaN,o,c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(t[16]-s)/r,(t[17]-i)/a,NaN,NaN,NaN,NaN,(t[14]-s)/r,(t[15]-i)/a],0),this.newFreeDrawOutline(d,e,l(this,gn),l(this,zl),l(this,Fl),l(this,Ol))},XA=function(e,t){const s=l(this,ls);return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],t),t+=6},YA=function(e,t){const s=l(this,re).subarray(4,6),i=l(this,re).subarray(16,18),[r,a,o,c]=l(this,gn),[u,h,d,p]=A(this,st,Gc).call(this);return e.set([NaN,NaN,NaN,NaN,(s[0]-r)/o,(s[1]-a)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,p,NaN,NaN,NaN,NaN,(i[0]-r)/o,(i[1]-a)/c],t),t+=24},b(ei,Oh,8),b(ei,vp,2),b(ei,yp,l(ei,Oh)+l(ei,vp));let Zf=ei;var Hl,Wa,xi,zh,vn,Bh,Ue,wp,KA;class qA extends B{constructor(t,s,i,r,a,o){super();b(this,wp);b(this,Hl);b(this,Wa,new Float32Array(4));b(this,xi);b(this,zh);b(this,vn);b(this,Bh);b(this,Ue);g(this,Ue,t),g(this,vn,s),g(this,Hl,i),g(this,Bh,r),g(this,xi,a),g(this,zh,o),this.lastPoint=[NaN,NaN],A(this,wp,KA).call(this,o);const[c,u,h,d]=l(this,Wa);for(let p=0,m=t.length;p<m;p+=2)t[p]=(t[p]-c)/h,t[p+1]=(t[p+1]-u)/d;for(let p=0,m=s.length;p<m;p+=2)s[p]=(s[p]-c)/h,s[p+1]=(s[p+1]-u)/d}toSVGPath(){const t=[`M${l(this,Ue)[4]} ${l(this,Ue)[5]}`];for(let s=6,i=l(this,Ue).length;s<i;s+=6){if(isNaN(l(this,Ue)[s])){t.push(`L${l(this,Ue)[s+4]} ${l(this,Ue)[s+5]}`);continue}t.push(`C${l(this,Ue)[s]} ${l(this,Ue)[s+1]} ${l(this,Ue)[s+2]} ${l(this,Ue)[s+3]} ${l(this,Ue)[s+4]} ${l(this,Ue)[s+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,s,i,r],a){const o=i-t,c=r-s;let u,h;switch(a){case 0:u=B._rescale(l(this,Ue),t,r,o,-c),h=B._rescale(l(this,vn),t,r,o,-c);break;case 90:u=B._rescaleAndSwap(l(this,Ue),t,s,o,c),h=B._rescaleAndSwap(l(this,vn),t,s,o,c);break;case 180:u=B._rescale(l(this,Ue),i,s,-o,c),h=B._rescale(l(this,vn),i,s,-o,c);break;case 270:u=B._rescaleAndSwap(l(this,Ue),i,r,-o,-c),h=B._rescaleAndSwap(l(this,vn),i,r,-o,-c);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return l(this,Wa)}newOutliner(t,s,i,r,a,o=0){return new Zf(t,s,i,r,a,o)}getNewOutline(t,s){const[i,r,a,o]=l(this,Wa),[c,u,h,d]=l(this,Hl),p=a*h,m=o*d,v=i*h+c,w=r*d+u,E=this.newOutliner({x:l(this,vn)[0]*p+v,y:l(this,vn)[1]*m+w},l(this,Hl),l(this,Bh),t,l(this,zh),s??l(this,xi));for(let y=2;y<l(this,vn).length;y+=2)E.add({x:l(this,vn)[y]*p+v,y:l(this,vn)[y+1]*m+w});return E.getOutlines()}}Hl=new WeakMap,Wa=new WeakMap,xi=new WeakMap,zh=new WeakMap,vn=new WeakMap,Bh=new WeakMap,Ue=new WeakMap,wp=new WeakSet,KA=function(t){const s=l(this,Ue);let i=s[4],r=s[5],a=i,o=r,c=i,u=r,h=i,d=r;const p=t?Math.max:Math.min;for(let v=6,w=s.length;v<w;v+=6){if(isNaN(s[v]))a=Math.min(a,s[v+4]),o=Math.min(o,s[v+5]),c=Math.max(c,s[v+4]),u=Math.max(u,s[v+5]),d<s[v+5]?(h=s[v+4],d=s[v+5]):d===s[v+5]&&(h=p(h,s[v+4]));else{const E=W.bezierBoundingBox(i,r,...s.slice(v,v+6));a=Math.min(a,E[0]),o=Math.min(o,E[1]),c=Math.max(c,E[2]),u=Math.max(u,E[3]),d<E[3]?(h=E[2],d=E[3]):d===E[3]&&(h=p(h,E[2]))}i=s[v+4],r=s[v+5]}const m=l(this,Wa);m[0]=a-l(this,xi),m[1]=o-l(this,xi),m[2]=c-a+2*l(this,xi),m[3]=u-o+2*l(this,xi),this.lastPoint=[h,d]};var Hh,Uh,gr,cs,Xt,QA,mf,JA,ZA,A0;class b0{constructor(e,t=0,s=0,i=!0){b(this,Xt);b(this,Hh);b(this,Uh);b(this,gr,[]);b(this,cs,[]);let r=1/0,a=-1/0,o=1/0,c=-1/0;const u=10**-4;for(const{x:E,y,width:x,height:S}of e){const _=Math.floor((E-t)/u)*u,k=Math.ceil((E+x+t)/u)*u,T=Math.floor((y-t)/u)*u,C=Math.ceil((y+S+t)/u)*u,P=[_,T,C,!0],j=[k,T,C,!1];l(this,gr).push(P,j),r=Math.min(r,_),a=Math.max(a,k),o=Math.min(o,T),c=Math.max(c,C)}const h=a-r+2*s,d=c-o+2*s,p=r-s,m=o-s,v=l(this,gr).at(i?-1:-2),w=[v[0],v[2]];for(const E of l(this,gr)){const[y,x,S]=E;E[0]=(y-p)/h,E[1]=(x-m)/d,E[2]=(S-m)/d}g(this,Hh,new Float32Array([p,m,h,d])),g(this,Uh,w)}getOutlines(){l(this,gr).sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of l(this,gr))t[3]?(e.push(...A(this,Xt,A0).call(this,t)),A(this,Xt,JA).call(this,t)):(A(this,Xt,ZA).call(this,t),e.push(...A(this,Xt,A0).call(this,t)));return A(this,Xt,QA).call(this,e)}}Hh=new WeakMap,Uh=new WeakMap,gr=new WeakMap,cs=new WeakMap,Xt=new WeakSet,QA=function(e){const t=[],s=new Set;for(const a of e){const[o,c,u]=a;t.push([o,c,a],[o,u,a])}t.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=t.length;a<o;a+=2){const c=t[a][2],u=t[a+1][2];c.push(u),u.push(c),s.add(c),s.add(u)}const i=[];let r;for(;s.size>0;){const a=s.values().next().value;let[o,c,u,h,d]=a;s.delete(a);let p=o,m=c;for(r=[o,u],i.push(r);;){let v;if(s.has(h))v=h;else if(s.has(d))v=d;else break;s.delete(v),[o,c,u,h,d]=v,p!==o&&(r.push(p,m,o,m===c?c:u),p=o),m=m===c?u:c}r.push(p,m)}return new _N(i,l(this,Hh),l(this,Uh))},mf=function(e){const t=l(this,cs);let s=0,i=t.length-1;for(;s<=i;){const r=s+i>>1,a=t[r][0];if(a===e)return r;a<e?s=r+1:i=r-1}return i+1},JA=function([,e,t]){const s=A(this,Xt,mf).call(this,e);l(this,cs).splice(s,0,[e,t])},ZA=function([,e,t]){const s=A(this,Xt,mf).call(this,e);for(let i=s;i<l(this,cs).length;i++){const[r,a]=l(this,cs)[i];if(r!==e)break;if(r===e&&a===t){l(this,cs).splice(i,1);return}}for(let i=s-1;i>=0;i--){const[r,a]=l(this,cs)[i];if(r!==e)break;if(r===e&&a===t){l(this,cs).splice(i,1);return}}},A0=function(e){const[t,s,i]=e,r=[[t,s,i]],a=A(this,Xt,mf).call(this,i);for(let o=0;o<a;o++){const[c,u]=l(this,cs)[o];for(let h=0,d=r.length;h<d;h++){const[,p,m]=r[h];if(!(u<=p||m<=c)){if(p>=c){if(m>u)r[h][1]=u;else{if(d===1)return[];r.splice(h,1),h--,d--}continue}r[h][2]=c,m>u&&r.push([t,u,m])}}}return r};var $h,Ul;class _N extends B{constructor(t,s,i){super();b(this,$h);b(this,Ul);g(this,Ul,t),g(this,$h,s),this.lastPoint=i}toSVGPath(){const t=[];for(const s of l(this,Ul)){let[i,r]=s;t.push(`M${i} ${r}`);for(let a=2;a<s.length;a+=2){const o=s[a],c=s[a+1];o===i?(t.push(`V${c}`),r=c):c===r&&(t.push(`H${o}`),i=o)}t.push("Z")}return t.join(" ")}serialize([t,s,i,r],a){const o=[],c=i-t,u=r-s;for(const h of l(this,Ul)){const d=new Array(h.length);for(let p=0;p<h.length;p+=2)d[p]=t+h[p]*c,d[p+1]=r-h[p+1]*u;o.push(d)}return o}get box(){return l(this,$h)}get classNamesForOutlining(){return["highlightOutline"]}}$h=new WeakMap,Ul=new WeakMap;class S0 extends Zf{newFreeDrawOutline(e,t,s,i,r,a){return new kN(e,t,s,i,r,a)}}class kN extends qA{newOutliner(e,t,s,i,r,a=0){return new S0(e,t,s,i,r,a)}}var us,Ga,$l,et,Vh,Vl,Wh,Gh,vr,hs,Wl,Xh,ye,E0,_0,k0,qr,eS,Vi;const Jt=class Jt{constructor({editor:e=null,uiManager:t=null}){b(this,ye);b(this,us,null);b(this,Ga,null);b(this,$l);b(this,et,null);b(this,Vh,!1);b(this,Vl,!1);b(this,Wh,null);b(this,Gh);b(this,vr,null);b(this,hs,null);b(this,Wl);var s;e?(g(this,Vl,!1),g(this,Wl,ce.HIGHLIGHT_COLOR),g(this,Wh,e)):(g(this,Vl,!0),g(this,Wl,ce.HIGHLIGHT_DEFAULT_COLOR)),g(this,hs,(e==null?void 0:e._uiManager)||t),g(this,Gh,l(this,hs)._eventBus),g(this,$l,(e==null?void 0:e.color)||((s=l(this,hs))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),l(Jt,Xh)||g(Jt,Xh,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return ae(this,"_keyboardManager",new cd([[["Escape","mac+Escape"],Jt.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Jt.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Jt.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Jt.prototype._moveToPrevious],[["Home","mac+Home"],Jt.prototype._moveToBeginning],[["End","mac+End"],Jt.prototype._moveToEnd]]))}renderButton(){const e=g(this,us,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=l(this,hs)._signal;e.addEventListener("click",A(this,ye,qr).bind(this),{signal:t}),e.addEventListener("keydown",A(this,ye,k0).bind(this),{signal:t});const s=g(this,Ga,document.createElement("span"));return s.className="swatch",s.setAttribute("aria-hidden",!0),s.style.backgroundColor=l(this,$l),e.append(s),e}renderMainDropdown(){const e=g(this,et,A(this,ye,E0).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===l(this,us)){A(this,ye,qr).call(this,e);return}const t=e.target.getAttribute("data-color");t&&A(this,ye,_0).call(this,t,e)}_moveToNext(e){var t,s;if(!l(this,ye,Vi)){A(this,ye,qr).call(this,e);return}if(e.target===l(this,us)){(t=l(this,et).firstChild)==null||t.focus();return}(s=e.target.nextSibling)==null||s.focus()}_moveToPrevious(e){var t,s;if(e.target===((t=l(this,et))==null?void 0:t.firstChild)||e.target===l(this,us)){l(this,ye,Vi)&&this._hideDropdownFromKeyboard();return}l(this,ye,Vi)||A(this,ye,qr).call(this,e),(s=e.target.previousSibling)==null||s.focus()}_moveToBeginning(e){var t;if(!l(this,ye,Vi)){A(this,ye,qr).call(this,e);return}(t=l(this,et).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!l(this,ye,Vi)){A(this,ye,qr).call(this,e);return}(t=l(this,et).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=l(this,et))==null||e.classList.add("hidden"),(t=l(this,vr))==null||t.abort(),g(this,vr,null)}_hideDropdownFromKeyboard(){var e;if(!l(this,Vl)){if(!l(this,ye,Vi)){(e=l(this,Wh))==null||e.unselect();return}this.hideDropdown(),l(this,us).focus({preventScroll:!0,focusVisible:l(this,Vh)})}}updateColor(e){if(l(this,Ga)&&(l(this,Ga).style.backgroundColor=e),!l(this,et))return;const t=l(this,hs).highlightColors.values();for(const s of l(this,et).children)s.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=l(this,us))==null||e.remove(),g(this,us,null),g(this,Ga,null),(t=l(this,et))==null||t.remove(),g(this,et,null)}};us=new WeakMap,Ga=new WeakMap,$l=new WeakMap,et=new WeakMap,Vh=new WeakMap,Vl=new WeakMap,Wh=new WeakMap,Gh=new WeakMap,vr=new WeakMap,hs=new WeakMap,Wl=new WeakMap,Xh=new WeakMap,ye=new WeakSet,E0=function(){const e=document.createElement("div"),t=l(this,hs)._signal;e.addEventListener("contextmenu",xs,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[s,i]of l(this,hs).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=s,r.setAttribute("data-l10n-id",l(Jt,Xh)[s]);const a=document.createElement("span");r.append(a),a.className="swatch",a.style.backgroundColor=i,r.setAttribute("aria-selected",i===l(this,$l)),r.addEventListener("click",A(this,ye,_0).bind(this,i),{signal:t}),e.append(r)}return e.addEventListener("keydown",A(this,ye,k0).bind(this),{signal:t}),e},_0=function(e,t){t.stopPropagation(),l(this,Gh).dispatch("switchannotationeditorparams",{source:this,type:l(this,Wl),value:e})},k0=function(e){Jt._keyboardManager.exec(this,e)},qr=function(e){if(l(this,ye,Vi)){this.hideDropdown();return}if(g(this,Vh,e.detail===0),l(this,vr)||(g(this,vr,new AbortController),window.addEventListener("pointerdown",A(this,ye,eS).bind(this),{signal:l(this,hs).combinedSignal(l(this,vr))})),l(this,et)){l(this,et).classList.remove("hidden");return}const t=g(this,et,A(this,ye,E0).call(this));l(this,us).append(t)},eS=function(e){var t;(t=l(this,et))!=null&&t.contains(e.target)||this.hideDropdown()},Vi=function(){return l(this,et)&&!l(this,et).classList.contains("hidden")},b(Jt,Xh,null);let ep=Jt;var Gl,Yh,bi,Xa,Xl,tn,qh,Kh,Ya,On,yn,mt,Yl,Ai,Tt,ql,zn,Qh,Z,C0,gf,tS,nS,sS,N0,Kr,Wn,Po,iS,vf,Xc,rS,aS,oS,lS,cS;const pe=class pe extends je{constructor(t){super({...t,name:"highlightEditor"});b(this,Z);b(this,Gl,null);b(this,Yh,0);b(this,bi);b(this,Xa,null);b(this,Xl,null);b(this,tn,null);b(this,qh,null);b(this,Kh,0);b(this,Ya,null);b(this,On,null);b(this,yn,null);b(this,mt,!1);b(this,Yl,null);b(this,Ai);b(this,Tt,null);b(this,ql,"");b(this,zn);b(this,Qh,"");this.color=t.color||pe._defaultColor,g(this,zn,t.thickness||pe._defaultThickness),g(this,Ai,t.opacity||pe._defaultOpacity),g(this,bi,t.boxes||null),g(this,Qh,t.methodOfCreation||""),g(this,ql,t.text||""),this._isDraggable=!1,t.highlightId>-1?(g(this,mt,!0),A(this,Z,gf).call(this,t),A(this,Z,Kr).call(this)):l(this,bi)&&(g(this,Gl,t.anchorNode),g(this,Yh,t.anchorOffset),g(this,qh,t.focusNode),g(this,Kh,t.focusOffset),A(this,Z,C0).call(this),A(this,Z,Kr).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=pe.prototype;return ae(this,"_keyboardManager",new cd([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,mt)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:l(this,zn),methodOfCreation:l(this,Qh)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,s){var i;je.initialize(t,s),pe._defaultColor||(pe._defaultColor=((i=s.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(t,s){switch(t){case ce.HIGHLIGHT_DEFAULT_COLOR:pe._defaultColor=s;break;case ce.HIGHLIGHT_THICKNESS:pe._defaultThickness=s;break}}translateInPage(t,s){}get toolbarPosition(){return l(this,Yl)}updateParams(t,s){switch(t){case ce.HIGHLIGHT_COLOR:A(this,Z,tS).call(this,s);break;case ce.HIGHLIGHT_THICKNESS:A(this,Z,nS).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[ce.HIGHLIGHT_DEFAULT_COLOR,pe._defaultColor],[ce.HIGHLIGHT_THICKNESS,pe._defaultThickness]]}get propertiesToUpdate(){return[[ce.HIGHLIGHT_COLOR,this.color||pe._defaultColor],[ce.HIGHLIGHT_THICKNESS,l(this,zn)||pe._defaultThickness],[ce.HIGHLIGHT_FREE,l(this,mt)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(g(this,Xl,new ep({editor:this})),t.addColorPicker(l(this,Xl))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(A(this,Z,Xc).call(this))}getBaseTranslation(){return[0,0]}getRect(t,s){return super.getRect(t,s,A(this,Z,Xc).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){A(this,Z,N0).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(A(this,Z,Kr).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let s=!1;this.parent&&!t?A(this,Z,N0).call(this):t&&(A(this,Z,Kr).call(this,t),s=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),s&&this.select()}rotate(t){var r,a,o;const{drawLayer:s}=this.parent;let i;l(this,mt)?(t=(t-this.rotation+360)%360,i=A(r=pe,Wn,Po).call(r,l(this,On).box,t)):i=A(a=pe,Wn,Po).call(a,[this.x,this.y,this.width,this.height],t),s.updateProperties(l(this,yn),{bbox:i,root:{"data-main-rotation":t}}),s.updateProperties(l(this,Tt),{bbox:A(o=pe,Wn,Po).call(o,l(this,tn).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();l(this,ql)&&(t.setAttribute("aria-label",l(this,ql)),t.setAttribute("role","mark")),l(this,mt)?t.classList.add("free"):this.div.addEventListener("keydown",A(this,Z,iS).bind(this),{signal:this._uiManager._signal});const s=g(this,Ya,document.createElement("div"));t.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=l(this,Xa);const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),Kf(this,l(this,Ya),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(l(this,Tt),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(l(this,Tt),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:A(this,Z,vf).call(this,!0);break;case 1:case 3:A(this,Z,vf).call(this,!1);break}}select(){var t;super.select(),l(this,Tt)&&((t=this.parent)==null||t.drawLayer.updateProperties(l(this,Tt),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),l(this,Tt)&&((t=this.parent)==null||t.drawLayer.updateProperties(l(this,Tt),{rootClass:{selected:!1}}),l(this,mt)||A(this,Z,vf).call(this,!1))}get _mustFixPosition(){return!l(this,mt)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(l(this,yn),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(l(this,Tt),{rootClass:{hidden:!t}}))}static startHighlighting(t,s,{target:i,x:r,y:a}){const{x:o,y:c,width:u,height:h}=i.getBoundingClientRect(),d=new AbortController,p=t.combinedSignal(d),m=v=>{d.abort(),A(this,Wn,lS).call(this,t,v)};window.addEventListener("blur",m,{signal:p}),window.addEventListener("pointerup",m,{signal:p}),window.addEventListener("pointerdown",_n,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",xs,{signal:p}),i.addEventListener("pointermove",A(this,Wn,oS).bind(this,t),{signal:p}),this._freeHighlight=new S0({x:r,y:a},[o,c,u,h],t.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,s,i){var w,E,y,x;let r=null;if(t instanceof jA){const{data:{quadPoints:S,rect:_,rotation:k,id:T,color:C,opacity:P,popupRef:j},parent:{page:{pageNumber:D}}}=t;r=t={annotationType:ne.HIGHLIGHT,color:Array.from(C),opacity:P,quadPoints:S,boxes:null,pageIndex:D-1,rect:_.slice(0),rotation:k,id:T,deleted:!1,popupRef:j}}else if(t instanceof ey){const{data:{inkLists:S,rect:_,rotation:k,id:T,color:C,borderStyle:{rawWidth:P},popupRef:j},parent:{page:{pageNumber:D}}}=t;r=t={annotationType:ne.HIGHLIGHT,color:Array.from(C),thickness:P,inkLists:S,boxes:null,pageIndex:D-1,rect:_.slice(0),rotation:k,id:T,deleted:!1,popupRef:j}}const{color:a,quadPoints:o,inkLists:c,opacity:u}=t,h=await super.deserialize(t,s,i);h.color=W.makeHexColor(...a),g(h,Ai,u||1),c&&g(h,zn,t.thickness),h.annotationElementId=t.id||null,h._initialData=r;const[d,p]=h.pageDimensions,[m,v]=h.pageTranslation;if(o){const S=g(h,bi,[]);for(let _=0;_<o.length;_+=8)S.push({x:(o[_]-m)/d,y:1-(o[_+1]-v)/p,width:(o[_+2]-o[_])/d,height:(o[_+1]-o[_+5])/p});A(w=h,Z,C0).call(w),A(E=h,Z,Kr).call(E),h.rotate(h.rotation)}else if(c){g(h,mt,!0);const S=c[0],_={x:S[0]-m,y:p-(S[1]-v)},k=new S0(_,[0,0,d,p],1,l(h,zn)/2,!0,.001);for(let P=0,j=S.length;P<j;P+=2)_.x=S[P]-m,_.y=p-(S[P+1]-v),k.add(_);const{id:T,clipPathId:C}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:k.toSVGPath()}},!0,!0);A(y=h,Z,gf).call(y,{highlightOutlines:k.getOutlines(),highlightId:T,clipPathId:C}),A(x=h,Z,Kr).call(x)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const s=this.getRect(0,0),i=je._colorManager.convert(this.color),r={annotationType:ne.HIGHLIGHT,color:i,opacity:l(this,Ai),thickness:l(this,zn),quadPoints:A(this,Z,rS).call(this),outlines:A(this,Z,aS).call(this,s),pageIndex:this.pageIndex,rect:s,rotation:A(this,Z,Xc).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!A(this,Z,cS).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Gl=new WeakMap,Yh=new WeakMap,bi=new WeakMap,Xa=new WeakMap,Xl=new WeakMap,tn=new WeakMap,qh=new WeakMap,Kh=new WeakMap,Ya=new WeakMap,On=new WeakMap,yn=new WeakMap,mt=new WeakMap,Yl=new WeakMap,Ai=new WeakMap,Tt=new WeakMap,ql=new WeakMap,zn=new WeakMap,Qh=new WeakMap,Z=new WeakSet,C0=function(){const t=new b0(l(this,bi),.001);g(this,On,t.getOutlines()),[this.x,this.y,this.width,this.height]=l(this,On).box;const s=new b0(l(this,bi),.0025,.001,this._uiManager.direction==="ltr");g(this,tn,s.getOutlines());const{lastPoint:i}=l(this,tn);g(this,Yl,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},gf=function({highlightOutlines:t,highlightId:s,clipPathId:i}){var d,p;if(g(this,On,t),g(this,tn,t.getNewOutline(l(this,zn)/2+1.5,.0025)),s>=0)g(this,yn,s),g(this,Xa,i),this.parent.drawLayer.finalizeDraw(s,{bbox:t.box,path:{d:t.toSVGPath()}}),g(this,Tt,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:l(this,tn).box,path:{d:l(this,tn).toSVGPath()}},!0));else if(this.parent){const m=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(l(this,yn),{bbox:A(d=pe,Wn,Po).call(d,l(this,On).box,(m-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(l(this,Tt),{bbox:A(p=pe,Wn,Po).call(p,l(this,tn).box,m),path:{d:l(this,tn).toSVGPath()}})}const[a,o,c,u]=t.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=c,this.height=u;break;case 90:{const[m,v]=this.parentDimensions;this.x=o,this.y=1-a,this.width=c*v/m,this.height=u*m/v;break}case 180:this.x=1-a,this.y=1-o,this.width=c,this.height=u;break;case 270:{const[m,v]=this.parentDimensions;this.x=1-o,this.y=a,this.width=c*v/m,this.height=u*m/v;break}}const{lastPoint:h}=l(this,tn);g(this,Yl,[(h[0]-a)/c,(h[1]-o)/u])},tS=function(t){const s=(a,o)=>{var c,u;this.color=a,g(this,Ai,o),(c=this.parent)==null||c.drawLayer.updateProperties(l(this,yn),{root:{fill:a,"fill-opacity":o}}),(u=l(this,Xl))==null||u.updateColor(a)},i=this.color,r=l(this,Ai);this.addCommands({cmd:s.bind(this,t,pe._defaultOpacity),undo:s.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ce.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},nS=function(t){const s=l(this,zn),i=r=>{g(this,zn,r),A(this,Z,sS).call(this,r)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ce.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},sS=function(t){if(!l(this,mt))return;A(this,Z,gf).call(this,{highlightOutlines:l(this,On).getNewOutline(t/2)}),this.fixAndSetPosition();const[s,i]=this.parentDimensions;this.setDims(this.width*s,this.height*i)},N0=function(){l(this,yn)===null||!this.parent||(this.parent.drawLayer.remove(l(this,yn)),g(this,yn,null),this.parent.drawLayer.remove(l(this,Tt)),g(this,Tt,null))},Kr=function(t=this.parent){l(this,yn)===null&&({id:Dt(this,yn)._,clipPathId:Dt(this,Xa)._}=t.drawLayer.draw({bbox:l(this,On).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":l(this,Ai)},rootClass:{highlight:!0,free:l(this,mt)},path:{d:l(this,On).toSVGPath()}},!1,!0),g(this,Tt,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:l(this,mt)},bbox:l(this,tn).box,path:{d:l(this,tn).toSVGPath()}},l(this,mt))),l(this,Ya)&&(l(this,Ya).style.clipPath=l(this,Xa)))},Wn=new WeakSet,Po=function([t,s,i,r],a){switch(a){case 90:return[1-s-r,t,r,i];case 180:return[1-t-i,1-s-r,i,r];case 270:return[s,1-t-i,r,i]}return[t,s,i,r]},iS=function(t){pe._keyboardManager.exec(this,t)},vf=function(t){if(!l(this,Gl))return;const s=window.getSelection();t?s.setPosition(l(this,Gl),l(this,Yh)):s.setPosition(l(this,qh),l(this,Kh))},Xc=function(){return l(this,mt)?this.rotation:0},rS=function(){if(l(this,mt))return null;const[t,s]=this.pageDimensions,[i,r]=this.pageTranslation,a=l(this,bi),o=new Float32Array(a.length*8);let c=0;for(const{x:u,y:h,width:d,height:p}of a){const m=u*t+i,v=(1-h)*s+r;o[c]=o[c+4]=m,o[c+1]=o[c+3]=v,o[c+2]=o[c+6]=m+d*t,o[c+5]=o[c+7]=v-p*s,c+=8}return o},aS=function(t){return l(this,On).serialize(t,A(this,Z,Xc).call(this))},oS=function(t,s){this._freeHighlight.add(s)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},lS=function(t,s){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},cS=function(t){const{color:s}=this._initialData;return t.color.some((i,r)=>i!==s[r])},b(pe,Wn),X(pe,"_defaultColor",null),X(pe,"_defaultOpacity",1),X(pe,"_defaultThickness",12),X(pe,"_type","highlight"),X(pe,"_editorType",ne.HIGHLIGHT),X(pe,"_freeHighlightId",-1),X(pe,"_freeHighlight",null),X(pe,"_freeHighlightClipId","");let tp=pe;var qa;class CN{constructor(){b(this,qa,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,s]of Object.entries(e))this.updateProperty(t,s)}updateSVGProperty(e,t){l(this,qa)[e]=t}toSVGProperties(){const e=l(this,qa);return g(this,qa,Object.create(null)),{root:e}}reset(){g(this,qa,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){xe("Not implemented")}}qa=new WeakMap;var wn,Kl,ot,Ka,Qa,yr,wr,xr,Ja,de,P0,R0,L0,Yc,uS,yf,qc,Ro;const U=class U extends je{constructor(t){super(t);b(this,de);b(this,wn,null);b(this,Kl);X(this,"_drawId",null);g(this,Kl,t.mustBeCommitted||!1),t.drawOutlines&&(A(this,de,P0).call(this,t),A(this,de,Yc).call(this))}static _mergeSVGProperties(t,s){const i=new Set(Object.keys(t));for(const[r,a]of Object.entries(s))i.has(r)?Object.assign(t[r],a):t[r]=a;return t}static getDefaultDrawingOptions(t){xe("Not implemented")}static get typesMap(){xe("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,s){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,s),this._currentParent&&(l(U,ot).updateProperty(i,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,s){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,s)}static get defaultPropertiesToUpdate(){const t=[],s=this._defaultDrawingOptions;for(const[i,r]of this.typesMap)t.push([i,s[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:s}=this;for(const[i,r]of this.constructor.typesMap)t.push([i,s[r]]);return t}_updateProperty(t,s,i){const r=this._drawingOptions,a=r[s],o=c=>{var h;r.updateProperty(s,c);const u=l(this,wn).updateProperty(s,c);u&&A(this,de,qc).call(this,u),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:o.bind(this,i),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,U._mergeSVGProperties(l(this,wn).getPathResizingSVGProperties(A(this,de,yf).call(this)),{bbox:A(this,de,Ro).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,U._mergeSVGProperties(l(this,wn).getPathResizedSVGProperties(A(this,de,yf).call(this)),{bbox:A(this,de,Ro).call(this)}))}_onTranslating(t,s){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:A(this,de,Ro).call(this,t,s)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,U._mergeSVGProperties(l(this,wn).getPathTranslatedSVGProperties(A(this,de,yf).call(this),this.parentDimensions),{bbox:A(this,de,Ro).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,l(this,Kl)&&(g(this,Kl,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){A(this,de,L0).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(A(this,de,Yc).call(this),A(this,de,qc).call(this,l(this,wn).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let s=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),A(this,de,L0).call(this)):t&&(this._uiManager.addShouldRescale(this),A(this,de,Yc).call(this,t),s=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,U._mergeSVGProperties({bbox:A(this,de,Ro).call(this)},l(this,wn).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&A(this,de,qc).call(this,l(this,wn).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const t=super.render();t.classList.add("draw");const s=document.createElement("div");t.append(s),s.setAttribute("aria-hidden","true"),s.className="internal";const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),this._uiManager.addShouldRescale(this),this.disableEditing(),t}static createDrawerInstance(t,s,i,r,a){xe("Not implemented")}static startDrawing(t,s,i,r){var E;const{target:a,offsetX:o,offsetY:c,pointerId:u,pointerType:h}=r;if(l(U,wr)&&l(U,wr)!==h)return;const{viewport:{rotation:d}}=t,{width:p,height:m}=a.getBoundingClientRect(),v=g(U,Ka,new AbortController),w=t.combinedSignal(v);if(l(U,yr)||g(U,yr,u),l(U,wr)??g(U,wr,h),window.addEventListener("pointerup",y=>{var x;l(U,yr)===y.pointerId?this._endDraw(y):(x=l(U,xr))==null||x.delete(y.pointerId)},{signal:w}),window.addEventListener("pointercancel",y=>{var x;l(U,yr)===y.pointerId?this._currentParent.endDrawingSession():(x=l(U,xr))==null||x.delete(y.pointerId)},{signal:w}),window.addEventListener("pointerdown",y=>{l(U,wr)===y.pointerType&&((l(U,xr)||g(U,xr,new Set)).add(y.pointerId),l(U,ot).isCancellable()&&(l(U,ot).removeLastElement(),l(U,ot).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",xs,{signal:w}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),a.addEventListener("touchmove",y=>{y.timeStamp===l(U,Ja)&&_n(y)},{signal:w}),t.toggleDrawing(),(E=s._editorUndoBar)==null||E.hide(),l(U,ot)){t.drawLayer.updateProperties(this._currentDrawId,l(U,ot).startNew(o,c,p,m,d));return}s.updateUIForDefaultProperties(this),g(U,ot,this.createDrawerInstance(o,c,p,m,d)),g(U,Qa,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(l(U,Qa).toSVGProperties(),l(U,ot).defaultSVGProperties),!0,!1)}static _drawMove(t){var a;if(g(U,Ja,-1),!l(U,ot))return;const{offsetX:s,offsetY:i,pointerId:r}=t;if(l(U,yr)===r){if(((a=l(U,xr))==null?void 0:a.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,l(U,ot).add(s,i)),g(U,Ja,t.timeStamp),_n(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,g(U,ot,null),g(U,Qa,null),g(U,wr,null),g(U,Ja,NaN)),l(U,Ka)&&(l(U,Ka).abort(),g(U,Ka,null),g(U,yr,NaN),g(U,xr,null))}static _endDraw(t){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),t&&s.drawLayer.updateProperties(this._currentDrawId,l(U,ot).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=l(U,ot),r=this._currentDrawId,a=i.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(r,i.setLastElement(a))},undo:()=>{s.drawLayer.updateProperties(r,i.removeLastElement())},mustExec:!1,type:ce.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(ce.DRAW_STEP),!l(U,ot).isEmpty()){const{pageDimensions:[i,r],scale:a}=s,o=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:l(U,ot).getOutlines(i*a,r*a,a,this._INNER_MARGIN),drawingOptions:l(U,Qa),mustBeCommitted:!t});return this._cleanup(!0),o}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,s,i,r,a,o){xe("Not implemented")}static async deserialize(t,s,i){var d,p;const{rawDims:{pageWidth:r,pageHeight:a,pageX:o,pageY:c}}=s.viewport,u=this.deserializeDraw(o,c,r,a,this._INNER_MARGIN,t),h=await super.deserialize(t,s,i);return h.createDrawingOptions(t),A(d=h,de,P0).call(d,{drawOutlines:u}),A(p=h,de,Yc).call(p),h.onScaleChanging(),h.rotate(),h}serializeDraw(t){const[s,i]=this.pageTranslation,[r,a]=this.pageDimensions;return l(this,wn).serialize([s,i,r,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};wn=new WeakMap,Kl=new WeakMap,ot=new WeakMap,Ka=new WeakMap,Qa=new WeakMap,yr=new WeakMap,wr=new WeakMap,xr=new WeakMap,Ja=new WeakMap,de=new WeakSet,P0=function({drawOutlines:t,drawId:s,drawingOptions:i}){g(this,wn,t),this._drawingOptions||(this._drawingOptions=i),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,t.defaultProperties)):this._drawId=A(this,de,R0).call(this,t,this.parent),A(this,de,qc).call(this,t.box)},R0=function(t,s){const{id:i}=s.drawLayer.draw(U._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i},L0=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Yc=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=A(this,de,R0).call(this,l(this,wn),t)}},uS=function([t,s,i,r]){const{parentDimensions:[a,o],rotation:c}=this;switch(c){case 90:return[s,1-t,i*(o/a),r*(a/o)];case 180:return[1-t,1-s,i,r];case 270:return[1-s,t,i*(o/a),r*(a/o)];default:return[t,s,i,r]}},yf=function(){const{x:t,y:s,width:i,height:r,parentDimensions:[a,o],rotation:c}=this;switch(c){case 90:return[1-s,t,i*(a/o),r*(o/a)];case 180:return[1-t,1-s,i,r];case 270:return[s,1-t,i*(a/o),r*(o/a)];default:return[t,s,i,r]}},qc=function(t){if([this.x,this.y,this.width,this.height]=A(this,de,uS).call(this,t),this.div){this.fixAndSetPosition();const[s,i]=this.parentDimensions;this.setDims(this.width*s,this.height*i)}this._onResized()},Ro=function(){const{x:t,y:s,width:i,height:r,rotation:a,parentRotation:o,parentDimensions:[c,u]}=this;switch((a*4+o)/90){case 1:return[1-s-r,t,r,i];case 2:return[1-t-i,1-s-r,i,r];case 3:return[s,1-t-i,r,i];case 4:return[t,s-i*(c/u),r*(u/c),i*(c/u)];case 5:return[1-s,t,i*(c/u),r*(u/c)];case 6:return[1-t-r*(u/c),1-s,r*(u/c),i*(c/u)];case 7:return[s-i*(c/u),1-t-r*(u/c),i*(c/u),r*(u/c)];case 8:return[t-i,s-r,i,r];case 9:return[1-s,t-i,r,i];case 10:return[1-t,1-s,i,r];case 11:return[s-r,1-t,r,i];case 12:return[t-r*(u/c),s,r*(u/c),i*(c/u)];case 13:return[1-s-i*(c/u),t-r*(u/c),i*(c/u),r*(u/c)];case 14:return[1-t,1-s-i*(c/u),r*(u/c),i*(c/u)];case 15:return[s,1-t,i*(c/u),r*(u/c)];default:return[t,s,i,r]}},X(U,"_currentDrawId",-1),X(U,"_currentParent",null),b(U,ot,null),b(U,Ka,null),b(U,Qa,null),b(U,yr,NaN),b(U,wr,null),b(U,xr,null),b(U,Ja,NaN),X(U,"_INNER_MARGIN",3);let T0=U;var Os,lt,ct,Za,Ql,Bt,gt,Bn,eo,to,no,Jl,wf;class NN{constructor(e,t,s,i,r,a){b(this,Jl);b(this,Os,new Float64Array(6));b(this,lt);b(this,ct);b(this,Za);b(this,Ql);b(this,Bt);b(this,gt,"");b(this,Bn,0);b(this,eo,new np);b(this,to);b(this,no);g(this,to,s),g(this,no,i),g(this,Za,r),g(this,Ql,a),[e,t]=A(this,Jl,wf).call(this,e,t);const o=g(this,lt,[NaN,NaN,NaN,NaN,e,t]);g(this,Bt,[e,t]),g(this,ct,[{line:o,points:l(this,Bt)}]),l(this,Os).set(o,0)}updateProperty(e,t){e==="stroke-width"&&g(this,Ql,t)}isEmpty(){return!l(this,ct)||l(this,ct).length===0}isCancellable(){return l(this,Bt).length<=10}add(e,t){[e,t]=A(this,Jl,wf).call(this,e,t);const[s,i,r,a]=l(this,Os).subarray(2,6),o=e-r,c=t-a;return Math.hypot(l(this,to)*o,l(this,no)*c)<=2?null:(l(this,Bt).push(e,t),isNaN(s)?(l(this,Os).set([r,a,e,t],2),l(this,lt).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(l(this,Os)[0])&&l(this,lt).splice(6,6),l(this,Os).set([s,i,r,a,e,t],0),l(this,lt).push(...B.createBezierPoints(s,i,r,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const s=this.add(e,t);return s||(l(this,Bt).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,s,i,r){g(this,to,s),g(this,no,i),g(this,Za,r),[e,t]=A(this,Jl,wf).call(this,e,t);const a=g(this,lt,[NaN,NaN,NaN,NaN,e,t]);g(this,Bt,[e,t]);const o=l(this,ct).at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),l(this,ct).push({line:a,points:l(this,Bt)}),l(this,Os).set(a,0),g(this,Bn,0),this.toSVGPath(),null}getLastElement(){return l(this,ct).at(-1)}setLastElement(e){return l(this,ct)?(l(this,ct).push(e),g(this,lt,e.line),g(this,Bt,e.points),g(this,Bn,0),{path:{d:this.toSVGPath()}}):l(this,eo).setLastElement(e)}removeLastElement(){if(!l(this,ct))return l(this,eo).removeLastElement();l(this,ct).pop(),g(this,gt,"");for(let e=0,t=l(this,ct).length;e<t;e++){const{line:s,points:i}=l(this,ct)[e];g(this,lt,s),g(this,Bt,i),g(this,Bn,0),this.toSVGPath()}return{path:{d:l(this,gt)}}}toSVGPath(){const e=B.svgRound(l(this,lt)[4]),t=B.svgRound(l(this,lt)[5]);if(l(this,Bt).length===2)return g(this,gt,`${l(this,gt)} M ${e} ${t} Z`),l(this,gt);if(l(this,Bt).length<=6){const i=l(this,gt).lastIndexOf("M");g(this,gt,`${l(this,gt).slice(0,i)} M ${e} ${t}`),g(this,Bn,6)}if(l(this,Bt).length===4){const i=B.svgRound(l(this,lt)[10]),r=B.svgRound(l(this,lt)[11]);return g(this,gt,`${l(this,gt)} L ${i} ${r}`),g(this,Bn,12),l(this,gt)}const s=[];l(this,Bn)===0&&(s.push(`M ${e} ${t}`),g(this,Bn,6));for(let i=l(this,Bn),r=l(this,lt).length;i<r;i+=6){const[a,o,c,u,h,d]=l(this,lt).slice(i,i+6).map(B.svgRound);s.push(`C${a} ${o} ${c} ${u} ${h} ${d}`)}return g(this,gt,l(this,gt)+s.join(" ")),g(this,Bn,l(this,lt).length),l(this,gt)}getOutlines(e,t,s,i){const r=l(this,ct).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),l(this,eo).build(l(this,ct),e,t,s,l(this,Za),l(this,Ql),i),g(this,Os,null),g(this,lt,null),g(this,ct,null),g(this,gt,null),l(this,eo)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Os=new WeakMap,lt=new WeakMap,ct=new WeakMap,Za=new WeakMap,Ql=new WeakMap,Bt=new WeakMap,gt=new WeakMap,Bn=new WeakMap,eo=new WeakMap,to=new WeakMap,no=new WeakMap,Jl=new WeakSet,wf=function(e,t){return B._normalizePoint(e,t,l(this,to),l(this,no),l(this,Za))};var Ht,Jh,Zh,xn,zs,Bs,Zl,ec,tc,wt,Qs,hS,dS,fS;const ry=class ry extends B{constructor(){super(...arguments);b(this,wt);b(this,Ht);b(this,Jh,0);b(this,Zh);b(this,xn);b(this,zs);b(this,Bs);b(this,Zl);b(this,ec);b(this,tc)}build(t,s,i,r,a,o,c){g(this,zs,s),g(this,Bs,i),g(this,Zl,r),g(this,ec,a),g(this,tc,o),g(this,Zh,c??0),g(this,xn,t),A(this,wt,dS).call(this)}setLastElement(t){return l(this,xn).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return l(this,xn).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:s}of l(this,xn)){if(t.push(`M${B.svgRound(s[4])} ${B.svgRound(s[5])}`),s.length===6){t.push("Z");continue}if(s.length===12){t.push(`L${B.svgRound(s[10])} ${B.svgRound(s[11])}`);continue}for(let i=6,r=s.length;i<r;i+=6){const[a,o,c,u,h,d]=s.subarray(i,i+6).map(B.svgRound);t.push(`C${a} ${o} ${c} ${u} ${h} ${d}`)}}return t.join("")}serialize([t,s,i,r],a){const o=[],c=[],[u,h,d,p]=A(this,wt,hS).call(this);let m,v,w,E,y,x,S,_,k;switch(l(this,ec)){case 0:k=B._rescale,m=t,v=s+r,w=i,E=-r,y=t+u*i,x=s+(1-h-p)*r,S=t+(u+d)*i,_=s+(1-h)*r;break;case 90:k=B._rescaleAndSwap,m=t,v=s,w=i,E=r,y=t+h*i,x=s+u*r,S=t+(h+p)*i,_=s+(u+d)*r;break;case 180:k=B._rescale,m=t+i,v=s,w=-i,E=r,y=t+(1-u-d)*i,x=s+h*r,S=t+(1-u)*i,_=s+(h+p)*r;break;case 270:k=B._rescaleAndSwap,m=t+i,v=s+r,w=-i,E=-r,y=t+(1-h-p)*i,x=s+(1-u-d)*r,S=t+(1-h)*i,_=s+(1-u)*r;break}for(const{line:T,points:C}of l(this,xn))o.push(k(T,m,v,w,E,a?new Array(T.length):null)),c.push(k(C,m,v,w,E,a?new Array(C.length):null));return{lines:o,points:c,rect:[y,x,S,_]}}static deserialize(t,s,i,r,a,{paths:{lines:o,points:c},rotation:u,thickness:h}){const d=[];let p,m,v,w,E;switch(u){case 0:E=B._rescale,p=-t/i,m=s/r+1,v=1/i,w=-1/r;break;case 90:E=B._rescaleAndSwap,p=-s/r,m=-t/i,v=1/r,w=1/i;break;case 180:E=B._rescale,p=t/i+1,m=-s/r,v=-1/i,w=1/r;break;case 270:E=B._rescaleAndSwap,p=s/r+1,m=t/i+1,v=-1/r,w=-1/i;break}if(!o){o=[];for(const x of c){const S=x.length;if(S===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1]]));continue}if(S===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1],NaN,NaN,NaN,NaN,x[2],x[3]]));continue}const _=new Float32Array(3*(S-2));o.push(_);let[k,T,C,P]=x.subarray(0,4);_.set([NaN,NaN,NaN,NaN,k,T],0);for(let j=4;j<S;j+=2){const D=x[j],M=x[j+1];_.set(B.createBezierPoints(k,T,C,P,D,M),(j-2)*3),[k,T,C,P]=[C,P,D,M]}}}for(let x=0,S=o.length;x<S;x++)d.push({line:E(o[x].map(_=>_??NaN),p,m,v,w),points:E(c[x].map(_=>_??NaN),p,m,v,w)});const y=new ry;return y.build(d,i,r,1,u,h,a),y}get box(){return l(this,Ht)}updateProperty(t,s){return t==="stroke-width"?A(this,wt,fS).call(this,s):null}updateParentDimensions([t,s],i){const[r,a]=A(this,wt,Qs).call(this);g(this,zs,t),g(this,Bs,s),g(this,Zl,i);const[o,c]=A(this,wt,Qs).call(this),u=o-r,h=c-a,d=l(this,Ht);return d[0]-=u,d[1]-=h,d[2]+=2*u,d[3]+=2*h,d}updateRotation(t){return g(this,Jh,t),{path:{transform:this.rotationTransform}}}get viewBox(){return l(this,Ht).map(B.svgRound).join(" ")}get defaultProperties(){const[t,s]=l(this,Ht);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${B.svgRound(t)} ${B.svgRound(s)}`}}}get rotationTransform(){const[,,t,s]=l(this,Ht);let i=0,r=0,a=0,o=0,c=0,u=0;switch(l(this,Jh)){case 90:r=s/t,a=-t/s,c=t;break;case 180:i=-1,o=-1,c=t,u=s;break;case 270:r=-s/t,a=t/s,u=s;break;default:return""}return`matrix(${i} ${r} ${a} ${o} ${B.svgRound(c)} ${B.svgRound(u)})`}getPathResizingSVGProperties([t,s,i,r]){const[a,o]=A(this,wt,Qs).call(this),[c,u,h,d]=l(this,Ht);if(Math.abs(h-a)<=B.PRECISION||Math.abs(d-o)<=B.PRECISION){const E=t+i/2-(c+h/2),y=s+r/2-(u+d/2);return{path:{"transform-origin":`${B.svgRound(t)} ${B.svgRound(s)}`,transform:`${this.rotationTransform} translate(${E} ${y})`}}}const p=(i-2*a)/(h-2*a),m=(r-2*o)/(d-2*o),v=h/i,w=d/r;return{path:{"transform-origin":`${B.svgRound(c)} ${B.svgRound(u)}`,transform:`${this.rotationTransform} scale(${v} ${w}) translate(${B.svgRound(a)} ${B.svgRound(o)}) scale(${p} ${m}) translate(${B.svgRound(-a)} ${B.svgRound(-o)})`}}}getPathResizedSVGProperties([t,s,i,r]){const[a,o]=A(this,wt,Qs).call(this),c=l(this,Ht),[u,h,d,p]=c;if(c[0]=t,c[1]=s,c[2]=i,c[3]=r,Math.abs(d-a)<=B.PRECISION||Math.abs(p-o)<=B.PRECISION){const y=t+i/2-(u+d/2),x=s+r/2-(h+p/2);for(const{line:S,points:_}of l(this,xn))B._translate(S,y,x,S),B._translate(_,y,x,_);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${B.svgRound(t)} ${B.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const m=(i-2*a)/(d-2*a),v=(r-2*o)/(p-2*o),w=-m*(u+a)+t+a,E=-v*(h+o)+s+o;if(m!==1||v!==1||w!==0||E!==0)for(const{line:y,points:x}of l(this,xn))B._rescale(y,w,E,m,v,y),B._rescale(x,w,E,m,v,x);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${B.svgRound(t)} ${B.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,s],i){const[r,a]=i,o=l(this,Ht),c=t-o[0],u=s-o[1];if(l(this,zs)===r&&l(this,Bs)===a)for(const{line:h,points:d}of l(this,xn))B._translate(h,c,u,h),B._translate(d,c,u,d);else{const h=l(this,zs)/r,d=l(this,Bs)/a;g(this,zs,r),g(this,Bs,a);for(const{line:p,points:m}of l(this,xn))B._rescale(p,c,u,h,d,p),B._rescale(m,c,u,h,d,m);o[2]*=h,o[3]*=d}return o[0]=t,o[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${B.svgRound(t)} ${B.svgRound(s)}`}}}get defaultSVGProperties(){const t=l(this,Ht);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${B.svgRound(t[0])} ${B.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}};Ht=new WeakMap,Jh=new WeakMap,Zh=new WeakMap,xn=new WeakMap,zs=new WeakMap,Bs=new WeakMap,Zl=new WeakMap,ec=new WeakMap,tc=new WeakMap,wt=new WeakSet,Qs=function(t=l(this,tc)){const s=l(this,Zh)+t/2*l(this,Zl);return l(this,ec)%180===0?[s/l(this,zs),s/l(this,Bs)]:[s/l(this,Bs),s/l(this,zs)]},hS=function(){const[t,s,i,r]=l(this,Ht),[a,o]=A(this,wt,Qs).call(this,0);return[t+a,s+o,i-2*a,r-2*o]},dS=function(){const t=g(this,Ht,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of l(this,xn)){if(r.length<=12){for(let c=4,u=r.length;c<u;c+=6){const[h,d]=r.subarray(c,c+2);t[0]=Math.min(t[0],h),t[1]=Math.min(t[1],d),t[2]=Math.max(t[2],h),t[3]=Math.max(t[3],d)}continue}let a=r[4],o=r[5];for(let c=6,u=r.length;c<u;c+=6){const[h,d,p,m,v,w]=r.subarray(c,c+6);W.bezierBoundingBox(a,o,h,d,p,m,v,w,t),a=v,o=w}}const[s,i]=A(this,wt,Qs).call(this);t[0]=Math.min(1,Math.max(0,t[0]-s)),t[1]=Math.min(1,Math.max(0,t[1]-i)),t[2]=Math.min(1,Math.max(0,t[2]+s)),t[3]=Math.min(1,Math.max(0,t[3]+i)),t[2]-=t[0],t[3]-=t[1]},fS=function(t){const[s,i]=A(this,wt,Qs).call(this);g(this,tc,t);const[r,a]=A(this,wt,Qs).call(this),[o,c]=[r-s,a-i],u=l(this,Ht);return u[0]-=o,u[1]-=c,u[2]+=2*o,u[3]+=2*c,u};let np=ry;var nc;const ay=class ay extends CN{constructor(t){super();b(this,nc);g(this,nc,t),super.updateProperties({fill:"none",stroke:je._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,s){t==="stroke-width"&&(s??(s=this["stroke-width"]),s*=l(this,nc).realScale),super.updateSVGProperty(t,s)}clone(){const t=new ay(l(this,nc));return t.updateAll(this),t}};nc=new WeakMap;let M0=ay;var xp,pS;const Wo=class Wo extends T0{constructor(t){super({...t,name:"inkEditor"});b(this,xp);this._willKeepAspectRatio=!0}static initialize(t,s){je.initialize(t,s),this._defaultDrawingOptions=new M0(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return ae(this,"typesMap",new Map([[ce.INK_THICKNESS,"stroke-width"],[ce.INK_COLOR,"stroke"],[ce.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,s,i,r,a){return new NN(t,s,i,r,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,s,i,r,a,o){return np.deserialize(t,s,i,r,a,o)}static async deserialize(t,s,i){let r=null;if(t instanceof ey){const{data:{inkLists:o,rect:c,rotation:u,id:h,color:d,opacity:p,borderStyle:{rawWidth:m},popupRef:v},parent:{page:{pageNumber:w}}}=t;r=t={annotationType:ne.INK,color:Array.from(d),thickness:m,opacity:p,paths:{points:o},boxes:null,pageIndex:w-1,rect:c.slice(0),rotation:u,id:h,deleted:!1,popupRef:v}}const a=await super.deserialize(t,s,i);return a.annotationElementId=t.id||null,a._initialData=r,a}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:s,parent:i}=this;s.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:s,opacity:i}){this._drawingOptions=Wo.getDefaultDrawingOptions({stroke:W.makeHexColor(...t),"stroke-width":s,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:i,rect:r}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":c}}=this,u={annotationType:ne.INK,color:je._colorManager.convert(a),opacity:o,thickness:c,paths:{lines:s,points:i},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?u:this.annotationElementId&&!A(this,xp,pS).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(t){const{points:s,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:s}),null}};xp=new WeakSet,pS=function(t){const{color:s,thickness:i,opacity:r,pageIndex:a}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((o,c)=>o!==s[c])||t.thickness!==i||t.opacity!==r||t.pageIndex!==a},X(Wo,"_type","ink"),X(Wo,"_editorType",ne.INK),X(Wo,"_defaultDrawingOptions",null);let I0=Wo;var Me,vt,br,Si,Ar,sc,Hs,Us,bn,ic,fe,Kc,Qc,xf,D0,bf,F0,Af,mS;const lu=class lu extends je{constructor(t){super({...t,name:"stampEditor"});b(this,fe);b(this,Me,null);b(this,vt,null);b(this,br,null);b(this,Si,null);b(this,Ar,null);b(this,sc,"");b(this,Hs,null);b(this,Us,null);b(this,bn,!1);b(this,ic,!1);g(this,Si,t.bitmapUrl),g(this,Ar,t.bitmapFile)}static initialize(t,s){je.initialize(t,s)}static get supportedTypes(){return ae(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(s=>`image/${s}`))}static get supportedTypesStr(){return ae(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,s){s.pasteEditor(ne.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const s=t.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(t=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:a,height:o}=t||this.copyCanvas(null,null,!0).imageData,c=await i.guess({name:"altText",request:{data:r,width:a,height:o,channels:r.length/(a*o)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),s&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t;l(this,vt)&&(g(this,Me,null),this._uiManager.imageManager.deleteId(l(this,vt)),(t=l(this,Hs))==null||t.remove(),g(this,Hs,null),l(this,Us)&&(clearTimeout(l(this,Us)),g(this,Us,null))),super.remove()}rebuild(){if(!this.parent){l(this,vt)&&A(this,fe,xf).call(this);return}super.rebuild(),this.div!==null&&(l(this,vt)&&l(this,Hs)===null&&A(this,fe,xf).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(l(this,br)||l(this,Me)||l(this,Si)||l(this,Ar)||l(this,vt))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,s;if(this.width&&(t=this.x,s=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),l(this,Me)?A(this,fe,D0).call(this):A(this,fe,xf).call(this),this.width&&!this.annotationElementId){const[i,r]=this.parentDimensions;this.setAt(t*i,s*r,this.width*i,this.height*r)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;l(this,Us)!==null&&clearTimeout(l(this,Us)),g(this,Us,setTimeout(()=>{g(this,Us,null),A(this,fe,F0).call(this)},200))}copyCanvas(t,s,i=!1){var m;t||(t=224);const{width:r,height:a}=l(this,Me),o=new Mg;let c=l(this,Me),u=r,h=a,d=null;if(s){if(r>s||a>s){const P=Math.min(s/r,s/a);u=Math.floor(r*P),h=Math.floor(a*P)}d=document.createElement("canvas");const v=d.width=Math.ceil(u*o.sx),w=d.height=Math.ceil(h*o.sy);l(this,bn)||(c=A(this,fe,bf).call(this,v,w));const E=d.getContext("2d");E.filter=this._uiManager.hcmFilter;let y="white",x="#cfcfd8";this._uiManager.hcmFilter!=="none"?x="black":(m=window.matchMedia)!=null&&m.call(window,"(prefers-color-scheme: dark)").matches&&(y="#8f8f9d",x="#42414d");const S=15,_=S*o.sx,k=S*o.sy,T=new OffscreenCanvas(_*2,k*2),C=T.getContext("2d");C.fillStyle=y,C.fillRect(0,0,_*2,k*2),C.fillStyle=x,C.fillRect(0,0,_,k),C.fillRect(_,k,_,k),E.fillStyle=E.createPattern(T,"repeat"),E.fillRect(0,0,v,w),E.drawImage(c,0,0,c.width,c.height,0,0,v,w)}let p=null;if(i){let v,w;if(o.symmetric&&c.width<t&&c.height<t)v=c.width,w=c.height;else if(c=l(this,Me),r>t||a>t){const x=Math.min(t/r,t/a);v=Math.floor(r*x),w=Math.floor(a*x),l(this,bn)||(c=A(this,fe,bf).call(this,v,w))}const y=new OffscreenCanvas(v,w).getContext("2d",{willReadFrequently:!0});y.drawImage(c,0,0,c.width,c.height,0,0,v,w),p={width:v,height:w,data:y.getImageData(0,0,v,w).data}}return{canvas:d,width:u,height:h,imageData:p}}getImageForAltText(){return l(this,Hs)}static async deserialize(t,s,i){var w;let r=null;if(t instanceof DA){const{data:{rect:E,rotation:y,id:x,structParent:S,popupRef:_},container:k,parent:{page:{pageNumber:T}}}=t,C=k.querySelector("canvas"),P=i.imageManager.getFromCanvas(k.id,C);C.remove();const j=((w=await s._structTree.getAriaAttributes(`${Gv}${x}`))==null?void 0:w.get("aria-label"))||"";r=t={annotationType:ne.STAMP,bitmapId:P.id,bitmap:P.bitmap,pageIndex:T-1,rect:E.slice(0),rotation:y,id:x,deleted:!1,accessibilityData:{decorative:!1,altText:j},isSvg:!1,structParent:S,popupRef:_}}const a=await super.deserialize(t,s,i),{rect:o,bitmap:c,bitmapUrl:u,bitmapId:h,isSvg:d,accessibilityData:p}=t;h&&i.imageManager.isValidId(h)?(g(a,vt,h),c&&g(a,Me,c)):g(a,Si,u),g(a,bn,d);const[m,v]=a.pageDimensions;return a.width=(o[2]-o[0])/m,a.height=(o[3]-o[1])/v,a.annotationElementId=t.id||null,p&&(a.altTextData=p),a._initialData=r,g(a,ic,!!r),a}serialize(t=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:ne.STAMP,bitmapId:l(this,vt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:l(this,bn),structTreeParentId:this._structTreeParentId};if(t)return i.bitmapUrl=A(this,fe,Af).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i;const{decorative:r,altText:a}=this.serializeAltText(!1);if(!r&&a&&(i.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const c=A(this,fe,mS).call(this,i);if(c.isSame)return null;c.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,s===null)return i;s.stamps||(s.stamps=new Map);const o=l(this,bn)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!s.stamps.has(l(this,vt)))s.stamps.set(l(this,vt),{area:o,serialized:i}),i.bitmap=A(this,fe,Af).call(this,!1);else if(l(this,bn)){const c=s.stamps.get(l(this,vt));o>c.area&&(c.area=o,c.serialized.bitmap.close(),c.serialized.bitmap=A(this,fe,Af).call(this,!1))}return i}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};Me=new WeakMap,vt=new WeakMap,br=new WeakMap,Si=new WeakMap,Ar=new WeakMap,sc=new WeakMap,Hs=new WeakMap,Us=new WeakMap,bn=new WeakMap,ic=new WeakMap,fe=new WeakSet,Kc=function(t,s=!1){if(!t){this.remove();return}g(this,Me,t.bitmap),s||(g(this,vt,t.id),g(this,bn,t.isSvg)),t.file&&g(this,sc,t.file.name),A(this,fe,D0).call(this)},Qc=function(){if(g(this,br,null),this._uiManager.enableWaiting(!1),!!l(this,Hs)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Me)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Me)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},xf=function(){if(l(this,vt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,vt)).then(i=>A(this,fe,Kc).call(this,i,!0)).finally(()=>A(this,fe,Qc).call(this));return}if(l(this,Si)){const i=l(this,Si);g(this,Si,null),this._uiManager.enableWaiting(!0),g(this,br,this._uiManager.imageManager.getFromUrl(i).then(r=>A(this,fe,Kc).call(this,r)).finally(()=>A(this,fe,Qc).call(this)));return}if(l(this,Ar)){const i=l(this,Ar);g(this,Ar,null),this._uiManager.enableWaiting(!0),g(this,br,this._uiManager.imageManager.getFromFile(i).then(r=>A(this,fe,Kc).call(this,r)).finally(()=>A(this,fe,Qc).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=lu.supportedTypesStr;const s=this._uiManager._signal;g(this,br,new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),A(this,fe,Kc).call(this,r)}i()},{signal:s}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:s})}).finally(()=>A(this,fe,Qc).call(this))),t.click()},D0=function(){var d;const{div:t}=this;let{width:s,height:i}=l(this,Me);const[r,a]=this.pageDimensions,o=.75;if(this.width)s=this.width*r,i=this.height*a;else if(s>o*r||i>o*a){const p=Math.min(o*r/s,o*a/i);s*=p,i*=p}const[c,u]=this.parentDimensions;this.setDims(s*c/r,i*u/a),this._uiManager.enableWaiting(!1);const h=g(this,Hs,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=s/r,this.height=i/a,(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),A(this,fe,F0).call(this),l(this,ic)||(this.parent.addUndoableEditor(this),g(this,ic,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,sc)&&h.setAttribute("aria-label",l(this,sc))},bf=function(t,s){const{width:i,height:r}=l(this,Me);let a=i,o=r,c=l(this,Me);for(;a>2*t||o>2*s;){const u=a,h=o;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*s&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const d=new OffscreenCanvas(a,o);d.getContext("2d").drawImage(c,0,0,u,h,0,0,a,o),c=d.transferToImageBitmap()}return c},F0=function(){const[t,s]=this.parentDimensions,{width:i,height:r}=this,a=new Mg,o=Math.ceil(i*t*a.sx),c=Math.ceil(r*s*a.sy),u=l(this,Hs);if(!u||u.width===o&&u.height===c)return;u.width=o,u.height=c;const h=l(this,bn)?l(this,Me):A(this,fe,bf).call(this,o,c),d=u.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(h,0,0,h.width,h.height,0,0,o,c)},Af=function(t){if(t){if(l(this,bn)){const r=this._uiManager.imageManager.getSvgUrl(l(this,vt));if(r)return r}const s=document.createElement("canvas");return{width:s.width,height:s.height}=l(this,Me),s.getContext("2d").drawImage(l(this,Me),0,0),s.toDataURL()}if(l(this,bn)){const[s,i]=this.pageDimensions,r=Math.round(this.width*s*Br.PDF_TO_CSS_UNITS),a=Math.round(this.height*i*Br.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(r,a);return o.getContext("2d").drawImage(l(this,Me),0,0,l(this,Me).width,l(this,Me).height,0,0,r,a),o.transferToImageBitmap()}return structuredClone(l(this,Me))},mS=function(t){var o;const{pageIndex:s,accessibilityData:{altText:i}}=this._initialData,r=t.pageIndex===s,a=(((o=t.accessibilityData)==null?void 0:o.alt)||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&a,isSameAltText:a}},X(lu,"_type","stamp"),X(lu,"_editorType",ne.STAMP);let j0=lu;var so,rc,$s,Sr,Ei,Hn,Er,ac,io,ds,_i,Pt,ki,V,_r,Te,gS,_s,z0,B0,Sf;const Zn=class Zn{constructor({uiManager:e,pageIndex:t,div:s,structTreeLayer:i,accessibilityManager:r,annotationLayer:a,drawLayer:o,textLayer:c,viewport:u,l10n:h}){b(this,Te);b(this,so);b(this,rc,!1);b(this,$s,null);b(this,Sr,null);b(this,Ei,null);b(this,Hn,new Map);b(this,Er,!1);b(this,ac,!1);b(this,io,!1);b(this,ds,null);b(this,_i,null);b(this,Pt,null);b(this,ki,null);b(this,V);const d=[...l(Zn,_r).values()];if(!Zn._initialized){Zn._initialized=!0;for(const p of d)p.initialize(h,e)}e.registerEditorTypes(d),g(this,V,e),this.pageIndex=t,this.div=s,g(this,so,r),g(this,$s,a),this.viewport=u,g(this,Pt,c),this.drawLayer=o,this._structTree=i,l(this,V).addLayer(this)}get isEmpty(){return l(this,Hn).size===0}get isInvisible(){return this.isEmpty&&l(this,V).getMode()===ne.NONE}updateToolbar(e){l(this,V).updateToolbar(e)}updateMode(e=l(this,V).getMode()){switch(A(this,Te,Sf).call(this),e){case ne.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ne.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case ne.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const s of l(Zn,_r).values())t.toggle(`${s._type}Editing`,e===s._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=l(this,Pt))==null?void 0:t.div)}setEditingState(e){l(this,V).setEditingState(e)}addCommands(e){l(this,V).addCommands(e)}cleanUndoStack(e){l(this,V).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=l(this,$s))==null||t.div.classList.toggle("disabled",!e)}async enable(){g(this,io,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const s of l(this,Hn).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(l(this,V).removeChangedExistingAnnotation(s),e.add(s.annotationElementId));if(!l(this,$s)){g(this,io,!1);return}const t=l(this,$s).getEditableAnnotations();for(const s of t){if(s.hide(),l(this,V).isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const i=await this.deserialize(s);i&&(this.addOrRebuild(i),i.enableEditing())}g(this,io,!1)}disable(){var i;g(this,ac,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const r of l(this,Hn).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){e.set(r.annotationElementId,r);continue}else t.set(r.annotationElementId,r);(i=this.getEditableAnnotation(r.annotationElementId))==null||i.show(),r.remove()}if(l(this,$s)){const r=l(this,$s).getEditableAnnotations();for(const a of r){const{id:o}=a.data;if(l(this,V).isDeletedAnnotationElement(o))continue;let c=t.get(o);if(c){c.resetAnnotationElement(a),c.show(!1),a.show();continue}c=e.get(o),c&&(l(this,V).addChangedExistingAnnotation(c),c.renderAnnotationElement(a)&&c.show(!1)),a.show()}}A(this,Te,Sf).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of l(Zn,_r).values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),g(this,ac,!1)}getEditableAnnotation(e){var t;return((t=l(this,$s))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){l(this,V).getActive()!==e&&l(this,V).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=l(this,Pt))!=null&&e.div&&!l(this,ki)){g(this,ki,new AbortController);const t=l(this,V).combinedSignal(l(this,ki));l(this,Pt).div.addEventListener("pointerdown",A(this,Te,gS).bind(this),{signal:t}),l(this,Pt).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=l(this,Pt))!=null&&e.div&&l(this,ki)&&(l(this,ki).abort(),g(this,ki,null),l(this,Pt).div.classList.remove("highlighting"))}enableClick(){if(l(this,Sr))return;g(this,Sr,new AbortController);const e=l(this,V).combinedSignal(l(this,Sr));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=l(this,Sr))==null||e.abort(),g(this,Sr,null)}attach(e){l(this,Hn).set(e.id,e);const{annotationElementId:t}=e;t&&l(this,V).isDeletedAnnotationElement(t)&&l(this,V).removeDeletedAnnotationElement(e)}detach(e){var t;l(this,Hn).delete(e.id),(t=l(this,so))==null||t.removePointerInTextLayer(e.contentDiv),!l(this,ac)&&e.annotationElementId&&l(this,V).addDeletedAnnotationElement(e)}remove(e){this.detach(e),l(this,V).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(l(this,V).addDeletedAnnotationElement(e.annotationElementId),je.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),l(this,V).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!l(this,io)),l(this,V).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var s;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!l(this,Ei)&&(e._focusEventsAllowed=!1,g(this,Ei,setTimeout(()=>{g(this,Ei,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:l(this,V)._signal}),t.focus())},0))),e._structTreeParentId=(s=l(this,so))==null?void 0:s.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getNextId(){return l(this,V).getId()}combinedSignal(e){return l(this,V).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=l(this,Te,_s))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){l(this,V).updateToolbar(e),l(this,V).updateMode(e);const{offsetX:s,offsetY:i}=A(this,Te,B0).call(this),r=this.getNextId(),a=A(this,Te,z0).call(this,{parent:this,id:r,x:s,y:i,uiManager:l(this,V),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=l(Zn,_r).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,l(this,V)))||null}createAndAddNewEditor(e,t,s={}){const i=this.getNextId(),r=A(this,Te,z0).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:l(this,V),isCentered:t,...s});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(A(this,Te,B0).call(this),!0)}setSelected(e){l(this,V).setSelected(e)}toggleSelected(e){l(this,V).toggleSelected(e)}unselect(e){l(this,V).unselect(e)}pointerup(e){var s;const{isMac:t}=Wt.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&l(this,Er)&&(g(this,Er,!1),!((s=l(this,Te,_s))!=null&&s.isDrawer&&l(this,Te,_s).supportMultipleDrawings))){if(!l(this,rc)){g(this,rc,!0);return}if(l(this,V).getMode()===ne.STAMP){l(this,V).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){var i;if(l(this,V).getMode()===ne.HIGHLIGHT&&this.enableTextSelection(),l(this,Er)){g(this,Er,!1);return}const{isMac:t}=Wt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(g(this,Er,!0),(i=l(this,Te,_s))!=null&&i.isDrawer){this.startDrawingSession(e);return}const s=l(this,V).getActive();g(this,rc,!s||s.isEmpty())}startDrawingSession(e){if(this.div.focus(),l(this,ds)){l(this,Te,_s).startDrawing(this,l(this,V),!1,e);return}l(this,V).setCurrentDrawingSession(this),g(this,ds,new AbortController);const t=l(this,V).combinedSignal(l(this,ds));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(g(this,_i,null),this.commitOrRemove())},{signal:t}),l(this,Te,_s).startDrawing(this,l(this,V),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&g(this,_i,t);return}l(this,_i)&&setTimeout(()=>{var t;(t=l(this,_i))==null||t.focus(),g(this,_i,null)},0)}endDrawingSession(e=!1){return l(this,ds)?(l(this,V).setCurrentDrawingSession(null),l(this,ds).abort(),g(this,ds,null),g(this,_i,null),l(this,Te,_s).endDrawing(e)):null}findNewParent(e,t,s){const i=l(this,V).findParent(t,s);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return l(this,ds)?(this.endDrawingSession(),!0):!1}onScaleChanging(){l(this,ds)&&l(this,Te,_s).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=l(this,V).getActive())==null?void 0:e.parent)===this&&(l(this,V).commitOrRemove(),l(this,V).setActiveEditor(null)),l(this,Ei)&&(clearTimeout(l(this,Ei)),g(this,Ei,null));for(const s of l(this,Hn).values())(t=l(this,so))==null||t.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,l(this,Hn).clear(),l(this,V).removeLayer(this)}render({viewport:e}){this.viewport=e,po(this.div,e);for(const t of l(this,V).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){l(this,V).commitOrRemove(),A(this,Te,Sf).call(this);const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,po(this.div,{rotation:s}),t!==s)for(const i of l(this,Hn).values())i.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return l(this,V).viewParameters.realScale}};so=new WeakMap,rc=new WeakMap,$s=new WeakMap,Sr=new WeakMap,Ei=new WeakMap,Hn=new WeakMap,Er=new WeakMap,ac=new WeakMap,io=new WeakMap,ds=new WeakMap,_i=new WeakMap,Pt=new WeakMap,ki=new WeakMap,V=new WeakMap,_r=new WeakMap,Te=new WeakSet,gS=function(e){l(this,V).unselectAll();const{target:t}=e;if(t===l(this,Pt).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&l(this,Pt).div.contains(t)){const{isMac:s}=Wt.platform;if(e.button!==0||e.ctrlKey&&s)return;l(this,V).showAllEditors("highlight",!0,!0),l(this,Pt).div.classList.add("free"),this.toggleDrawing(),tp.startHighlighting(this,l(this,V).direction==="ltr",{target:l(this,Pt).div,x:e.x,y:e.y}),l(this,Pt).div.addEventListener("pointerup",()=>{l(this,Pt).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,V)._signal}),e.preventDefault()}},_s=function(){return l(Zn,_r).get(l(this,V).getMode())},z0=function(e){const t=l(this,Te,_s);return t?new t.prototype.constructor(e):null},B0=function(){const{x:e,y:t,width:s,height:i}=this.div.getBoundingClientRect(),r=Math.max(0,e),a=Math.max(0,t),o=Math.min(window.innerWidth,e+s),c=Math.min(window.innerHeight,t+i),u=(r+o)/2-e,h=(a+c)/2-t,[d,p]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:d,offsetY:p}},Sf=function(){for(const e of l(this,Hn).values())e.isEmpty()&&e.remove()},X(Zn,"_initialized",!1),b(Zn,_r,new Map([w0,I0,j0,tp].map(e=>[e._editorType,e])));let O0=Zn;var fs,ed,Ut,ro,bp,vS,Xs,U0,yS,$0;const kt=class kt{constructor({pageIndex:e}){b(this,Xs);b(this,fs,null);b(this,ed,0);b(this,Ut,new Map);b(this,ro,new Map);this.pageIndex=e}setParent(e){if(!l(this,fs)){g(this,fs,e);return}if(l(this,fs)!==e){if(l(this,Ut).size>0)for(const t of l(this,Ut).values())t.remove(),e.append(t);g(this,fs,e)}}static get _svgFactory(){return ae(this,"_svgFactory",new Zv)}draw(e,t=!1,s=!1){const i=Dt(this,ed)._++,r=A(this,Xs,U0).call(this),a=kt._svgFactory.createElement("defs");r.append(a);const o=kt._svgFactory.createElement("path");a.append(o);const c=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",c),o.setAttribute("vector-effect","non-scaling-stroke"),t&&l(this,ro).set(i,o);const u=s?A(this,Xs,yS).call(this,a,c):null,h=kt._svgFactory.createElement("use");return r.append(h),h.setAttribute("href",`#${c}`),this.updateProperties(r,e),l(this,Ut).set(i,r),{id:i,clipPathId:`url(#${u})`}}drawOutline(e,t){const s=Dt(this,ed)._++,i=A(this,Xs,U0).call(this),r=kt._svgFactory.createElement("defs");i.append(r);const a=kt._svgFactory.createElement("path");r.append(a);const o=`path_p${this.pageIndex}_${s}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke");let c;if(t){const d=kt._svgFactory.createElement("mask");r.append(d),c=`mask_p${this.pageIndex}_${s}`,d.setAttribute("id",c),d.setAttribute("maskUnits","objectBoundingBox");const p=kt._svgFactory.createElement("rect");d.append(p),p.setAttribute("width","1"),p.setAttribute("height","1"),p.setAttribute("fill","white");const m=kt._svgFactory.createElement("use");d.append(m),m.setAttribute("href",`#${o}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}const u=kt._svgFactory.createElement("use");i.append(u),u.setAttribute("href",`#${o}`),c&&u.setAttribute("mask",`url(#${c})`);const h=u.cloneNode();return i.append(h),u.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(i,e),l(this,Ut).set(s,i),s}finalizeDraw(e,t){l(this,ro).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var c;if(!t)return;const{root:s,bbox:i,rootClass:r,path:a}=t,o=typeof e=="number"?l(this,Ut).get(e):e;if(o){if(s&&A(this,Xs,$0).call(this,o,s),i&&A(c=kt,bp,vS).call(c,o,i),r){const{classList:u}=o;for(const[h,d]of Object.entries(r))u.toggle(h,d)}if(a){const h=o.firstChild.firstChild;A(this,Xs,$0).call(this,h,a)}}}updateParent(e,t){if(t===this)return;const s=l(this,Ut).get(e);s&&(l(t,fs).append(s),l(this,Ut).delete(e),l(t,Ut).set(e,s))}remove(e){l(this,ro).delete(e),l(this,fs)!==null&&(l(this,Ut).get(e).remove(),l(this,Ut).delete(e))}destroy(){g(this,fs,null);for(const e of l(this,Ut).values())e.remove();l(this,Ut).clear(),l(this,ro).clear()}};fs=new WeakMap,ed=new WeakMap,Ut=new WeakMap,ro=new WeakMap,bp=new WeakSet,vS=function(e,[t,s,i,r]){const{style:a}=e;a.top=`${100*s}%`,a.left=`${100*t}%`,a.width=`${100*i}%`,a.height=`${100*r}%`},Xs=new WeakSet,U0=function(){const e=kt._svgFactory.create(1,1,!0);return l(this,fs).append(e),e.setAttribute("aria-hidden",!0),e},yS=function(e,t){const s=kt._svgFactory.createElement("clipPath");e.append(s);const i=`clip_${t}`;s.setAttribute("id",i),s.setAttribute("clipPathUnits","objectBoundingBox");const r=kt._svgFactory.createElement("use");return s.append(r),r.setAttribute("href",`#${t}`),r.classList.add("clip"),i},$0=function(e,t){for(const[s,i]of Object.entries(t))i===null?e.removeAttribute(s):e.setAttribute(s,i)},b(kt,bp);let H0=kt;globalThis.pdfjsTestingUtils={HighlightOutliner:b0};K.AbortException;K.AnnotationEditorLayer;K.AnnotationEditorParamsType;K.AnnotationEditorType;K.AnnotationEditorUIManager;K.AnnotationLayer;K.AnnotationMode;K.ColorPicker;K.DOMSVGFactory;K.DrawLayer;K.FeatureTest;var TN=K.GlobalWorkerOptions;K.ImageKind;K.InvalidPDFException;K.MissingPDFException;K.OPS;K.OutputScale;K.PDFDataRangeTransport;K.PDFDateString;K.PDFWorker;K.PasswordResponses;K.PermissionFlag;K.PixelsPerInch;K.RenderingCancelledException;K.TextLayer;K.TouchManager;K.UnexpectedResponseException;K.Util;K.VerbosityLevel;K.XfaLayer;K.build;K.createValidAbsoluteUrl;K.fetchData;var PN=K.getDocument;K.getFilenameFromUrl;K.getPdfFilenameFromUrl;K.getXfaPageViewport;K.isDataScheme;K.isPdfFile;K.noContextMenu;K.normalizeUnicode;K.setLayerDimensions;K.shadow;K.stopEvent;K.version;TN.workerSrc=new URL(""+new URL("pdf.worker.min-yatZIOMy.mjs",import.meta.url).href,import.meta.url).toString();async function RN(n){const e=await n.arrayBuffer(),t=await PN({data:e}).promise,s=[];for(let i=1;i<=t.numPages;i+=1){const c=(await(await t.getPage(i)).getTextContent()).items.map(u=>u.str??"").join(" ").replace(/\s+/g," ").trim();c&&s.push(c)}return s.join(`

`).trim()}const Mm={TEXT:{content:`Unacademy has some of the best educators I've come across. The way complex topics are broken down makes learning feel much less intimidating.

The app crashes way too often during live classes. For a tech-first education platform, this is honestly unacceptable.

Compared to offline coaching, Unacademy is extremely cost-effective. You get access to multiple educators at a fraction of the price.

Their customer support is painfully slow. I raised a ticket weeks ago and still haven't received a proper resolution.

The structured courses and test series helped me stay consistent with my exam prep. It feels well-designed for serious aspirants.

There's too much content and very little guidance on what to follow. Beginners can easily feel lost.

I love the flexibility Unacademy offers. Recorded lectures make it easy to study even with a full-time job.

The subscription feels overpriced considering many classes are repetitive or recycled from older batches.

The learner community and live interactions keep me motivated. Seeing others work hard pushes me to stay disciplined.

Not all educators maintain the same quality. Some classes feel rushed and poorly planned.`},CSV:{content:`Category,Comment
Educators,"Unacademy has some of the best educators I've come across."
Tech,"The app crashes way too often during live classes. Unacceptable."
Value,"Extremely cost-effective compared to offline coaching."
Support,"Customer support is painfully slow. Tickets take weeks."
Design,"Structured courses and test series help consistency."
UX,"Too much content, beginners feel lost without guidance."
Flexibility,"Recorded lectures are great for full-time workers."
Pricing,"Subscription feels overpriced due to repetitive content."
Community,"Live interactions and community keep me motivated."
Quality,"Educator quality varies; some classes feel rushed."`},PDF:{content:`[INTERNAL PDF REPORT: UNACADEMY USER SENTIMENT Q1]
Summary: High educator satisfaction (8.5/10) contrasted with low technical stability (3/10).
Student Feedback Included:
- Educators break down complex topics well.
- App crashes frequently during live sessions.
- Pricing is favorable compared to offline alternatives.
- Support resolution times are below industry standards.
- Beginners require better onboarding pathways.
- Community features are a strong retention driver.`}};function $i(n,e){for(const t of e)if(n&&n[t]!==void 0&&n[t]!==null)return n[t]}function LN(n){return n?Array.isArray(n)?n:[n]:[]}function MN(n){if(!n)return[];if(Array.isArray(n))return n.map(String).filter(Boolean);if(typeof n=="string"){const e=n.split(/\r?\n/).map(t=>t.replace(/^\s*[-*]\s*/,"").trim()).filter(Boolean);return e.length?e:[n]}return typeof n=="object"?Object.values(n).map(e=>typeof e=="string"?e:JSON.stringify(e)).filter(Boolean):[String(n)]}function Uw(n){return["rounded-2xl border border-white/10 bg-black/40 backdrop-blur-xl shadow-lg",n].join(" ")}function IN(){const[n,e]=N.useState("paste"),[t,s]=N.useState(""),[i,r]=N.useState(""),[a,o]=N.useState(null),[c,u]=N.useState(!1),[h,d]=N.useState(null),[p,m]=N.useState(null),[v,w]=N.useState(!1),E=N.useRef(null),y=N.useRef(null),x=N.useMemo(()=>t.trim().length>0&&!c,[t,c]);N.useEffect(()=>{function R(L){y.current&&!y.current.contains(L.target)&&w(!1)}if(v)return document.addEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}},[v]);function S(){const R=Mm.PDF.content;s(R),e("upload"),d(null),m(null);const L=new File([R],"unacademy_sample.pdf",{type:"application/pdf"});o(L),w(!1)}function _(){const R=Mm.CSV.content;s(R),e("upload"),d(null),m(null);const L=new File([R],"unacademy_sample.csv",{type:"text/csv"});o(L),w(!1)}function k(){const R=Mm.TEXT.content;s(R),e("paste"),o(null),d(null),m(null),w(!1)}async function T(R){d(null),m(null),o(R);try{const L=(R.name.split(".").pop()??"").toLowerCase();if(R.type==="application/pdf"||L==="pdf"){const G=await RN(R);s(G);return}const $=await R.text();s($)}catch(L){d(L!=null&&L.message?String(L.message):"Failed to read file"),s("")}}async function C(){var R,L,$,G;d(null),m(null),u(!0);try{const Q={feedback:t,decision_question:i},oe="https://gnosiss.app.n8n.cloud/webhook/revue",be="/api/revue",dt=new Promise((Ke,cn)=>{setTimeout(()=>{cn(new Error("TIMEOUT"))},6e4)});let jt;try{jt=await Promise.race([fetch(oe,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)}),dt])}catch(Ke){if((Ke==null?void 0:Ke.message)==="TIMEOUT"){d("Check back in a moment"),u(!1);return}try{jt=await Promise.race([fetch(be,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)}),dt])}catch(cn){if((cn==null?void 0:cn.message)==="TIMEOUT"){d("Check back in a moment"),u(!1);return}throw cn}}const q=await jt.json();if(!jt.ok){const Ke=typeof q=="string"?q:JSON.stringify(q);throw new Error(Ke||`Request failed (${jt.status})`)}m(q);let te=null;if(Array.isArray(q)&&q.length>0?te=(R=q[0])==null?void 0:R.sentiment_score:Array.isArray(q==null?void 0:q.data)&&q.data.length>0?te=(L=q.data[0])==null?void 0:L.sentiment_score:q!=null&&q.data&&typeof q.data=="object"&&!Array.isArray(q.data)?te=($=q.data)==null?void 0:$.sentiment_score:te=(q==null?void 0:q.sentiment_score)??((G=q==null?void 0:q.result)==null?void 0:G.sentiment_score),te!=null){let Ke;if(typeof te=="number")Ke=te<=1?Math.round(te*100):Math.round(te);else{const cn=parseFloat(String(te));Ke=cn<=1?Math.round(cn*100):Math.round(cn)}Ke=Math.max(0,Math.min(100,Ke)),localStorage.setItem("sentiment_score",JSON.stringify(Ke)),window.dispatchEvent(new Event("sentimentScoreUpdate"))}}catch(Q){(Q==null?void 0:Q.message)==="TIMEOUT"?d("Check back in a moment"):d(Q!=null&&Q.message?String(Q.message):"Request failed")}finally{u(!1)}}const P=N.useMemo(()=>p?Array.isArray(p)&&p.length>0?p[0]:Array.isArray(p==null?void 0:p.data)&&p.data.length>0?p.data[0]:p!=null&&p.data&&typeof p.data=="object"&&!Array.isArray(p.data)?p.data:p!=null&&p.result&&typeof p.result=="object"?Array.isArray(p.result)&&p.result.length>0?p.result[0]:p.result:p!=null&&p.output&&typeof p.output=="object"?Array.isArray(p.output)&&p.output.length>0?p.output[0]:p.output:typeof p=="object"&&p!==null?p:null:null,[p]),j=N.useMemo(()=>P?$i(P,["decision","final_decision","finalDecision","Final Decision","finalDecision","FINAL DECISION","recommendation","Recommended Decision","recommended_decision"])??null:null,[P]),D=N.useMemo(()=>{if(!P)return[];const R=$i(P,["persona","personas","Personas","PERSONAS","customer_personas","user_personas"]);return LN(R)},[P]),M=N.useMemo(()=>{if(!P)return[];const R=$i(P,["insights","why_this_decision","whyThisDecision","rationale","why","reasoning","explanation","WHY THIS DECISION","why_this_decision"]);return MN(R)},[P]);N.useMemo(()=>P?$i(P,["rejected_alternative","rejectedAlternative","what_not_to_do","rejected_option","alternative_rejected","REJECTED ALTERNATIVE"])??null:null,[P]);const J=N.useMemo(()=>P?$i(P,["risk_if_ignored","riskIfIgnored","risk","risks","consequences","RISK IF IGNORED","risk_if_ignored"])??null:null,[P]),ue=N.useMemo(()=>p?$i(P||p,["status","Status","STATUS","state","State"])??null:null,[p,P]),ee=N.useMemo(()=>p?$i(P||p,["message","Message","MESSAGE","msg","error_message","errorMessage"])??null:null,[p,P]),Oe=N.useMemo(()=>p?$i(P||p,["reason","Reason","REASON","error_reason","errorReason","details"])??null:null,[p,P]),O=N.useMemo(()=>{if(!ue)return!1;const R=String(ue).toLowerCase();return R==="rejected"||R==="error"||R==="failed"||R==="invalid"},[ue]);return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex flex-col gap-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-2 h-2 rounded-full bg-white"}),f.jsx("div",{className:"text-sm tracking-widest text-white font-semibold",children:"REVUE INTELLIGENCE"})]}),f.jsx("h1",{className:"text-4xl font-bold leading-tight text-white",children:"TRANSFORMING FEEDBACK INTO STRATEGY"}),f.jsx("div",{className:"text-white/70 text-lg",children:"Paste feedback or upload CSV/PDF, ask a decision question, then generate a judge-ready recommendation."})]}),f.jsxs("div",{className:Uw("p-5 md:p-6"),children:[f.jsxs("div",{className:"mb-5",children:[f.jsxs("div",{className:"relative flex items-center justify-center mb-2",children:[f.jsx("div",{className:"text-lg font-semibold text-white",children:"Input"}),f.jsxs("div",{className:"absolute right-0",ref:y,children:[f.jsxs("button",{type:"button",onClick:()=>w(!v),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-r from-white/20 via-white/15 to-white/10 backdrop-blur-xl border border-white/20 text-white text-sm font-semibold transition-all duration-300 hover:from-white/25 hover:via-white/20 hover:to-white/15 shadow-lg",children:[f.jsx("span",{children:"Demo Trial"}),f.jsx("svg",{className:`w-4 h-4 transition-transform duration-300 ${v?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),v&&f.jsxs("div",{className:"absolute right-0 mt-2 w-48 rounded-lg border border-white/20 bg-black/60 backdrop-blur-xl shadow-lg z-50 overflow-hidden",children:[f.jsx("button",{type:"button",onClick:S,className:"w-full px-4 py-3 text-left text-sm text-white/90 hover:bg-white/10 transition-colors duration-200",children:"Test Demo PDF"}),f.jsx("button",{type:"button",onClick:_,className:"w-full px-4 py-3 text-left text-sm text-white/90 hover:bg-white/10 transition-colors duration-200 border-t border-white/10",children:"Test Demo CSV"}),f.jsx("button",{type:"button",onClick:k,className:"w-full px-4 py-3 text-left text-sm text-white/90 hover:bg-white/10 transition-colors duration-200 border-t border-white/10",children:"Test Demo Text"})]})]})]}),f.jsx("div",{className:"text-sm text-white/65 text-center",children:"Choose feedback source and ask your decision question."})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"space-y-3",children:[f.jsx("div",{className:"text-sm font-medium text-white/85",children:"Feedback"}),f.jsxs("div",{className:"flex gap-3",children:[f.jsx("button",{type:"button",onClick:()=>{e("paste"),d(null),m(null)},className:"flex-1 rounded-xl px-4 py-3 text-sm font-semibold tracking-wide transition-all duration-300 overflow-hidden group border border-white/10 bg-black/40 backdrop-blur-xl text-white/80 hover:text-white shadow-lg",children:f.jsx("span",{className:"inline-block group-hover:-translate-y-1 transition-transform duration-300",children:"Paste feedback"})}),f.jsx("button",{type:"button",onClick:()=>{e("upload"),d(null),m(null)},className:"flex-1 rounded-xl px-4 py-3 text-sm font-semibold tracking-wide transition-all duration-300 overflow-hidden group border border-white/10 bg-black/40 backdrop-blur-xl text-white/80 hover:text-white shadow-lg",children:f.jsx("span",{className:"inline-block group-hover:-translate-y-1 transition-transform duration-300",children:"Upload CSV/PDF"})})]}),n==="paste"?f.jsx("textarea",{value:t,onChange:R=>{s(R.target.value),o(null),d(null),m(null)},placeholder:"Paste user feedback, reviews, interview transcripts, support tickets...",className:"h-56 w-full resize-none rounded-xl border border-white/10 bg-black/30 p-4 text-sm text-white/90 outline-none placeholder:text-white/35 focus:border-white/40 focus:ring-2 focus:ring-white/15"}):f.jsxs("div",{className:"space-y-3",children:[f.jsx("input",{ref:E,type:"file",accept:".csv,.pdf,text/csv,application/pdf",className:"hidden",onChange:R=>{var $;const L=($=R.target.files)==null?void 0:$[0];L&&T(L)}}),f.jsxs("button",{type:"button",onClick:()=>{var R;return(R=E.current)==null?void 0:R.click()},className:"w-full rounded-xl border border-white/10 bg-white/5 px-4 py-4 text-left transition hover:bg-white/8 text-white",children:[f.jsx("div",{className:"text-sm font-semibold",children:"Choose file"}),f.jsx("div",{className:"mt-1 text-xs text-white/60",children:"CSV or PDF. We'll extract text and send it as feedback."})]}),f.jsxs("div",{className:"rounded-xl border border-white/10 bg-black/30 p-4",children:[f.jsxs("div",{className:"flex items-start justify-between gap-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-sm font-medium text-white/85",children:a?a.name:"No file selected"}),f.jsx("div",{className:"mt-1 text-xs text-white/55",children:a?`${(a.size/1024).toFixed(1)} KB  ${a.type||"unknown type"}`:"Upload to populate the feedback payload."})]}),a?f.jsx("button",{type:"button",className:"rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-xs text-white/80 transition hover:bg-white/10",onClick:()=>{o(null),s(""),m(null),d(null),E.current&&(E.current.value="")},children:"Clear"}):null]}),f.jsx("div",{className:"mt-3 text-xs text-white/45",children:"Preview (first 800 chars):"}),f.jsx("div",{className:"mt-1 max-h-28 overflow-auto rounded-lg border border-white/10 bg-black/20 p-3 text-xs text-white/70",children:(t||"").slice(0,800)||""})]})]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"text-sm font-medium text-white/85",children:["Decision Question ",f.jsx("span",{className:"text-white/50 text-xs font-normal",children:"(Optional)"})]}),f.jsx("input",{value:i,onChange:R=>{r(R.target.value),d(null),m(null)},placeholder:"e.g., Should we redesign onboarding?",className:"w-full rounded-xl border border-white/10 bg-black/30 px-4 py-3 text-sm text-white/90 outline-none placeholder:text-white/35 focus:border-white/40 focus:ring-2 focus:ring-white/15"})]}),f.jsxs("div",{className:"pt-2",children:[f.jsx("button",{type:"button",disabled:!x||c,onClick:()=>void C(),className:["w-full rounded-xl px-5 py-4 text-sm font-semibold tracking-wide transition-all duration-300","border border-white/10 shadow-lg overflow-hidden flex items-center justify-center gap-2",x&&!c?"bg-gradient-to-r from-white/20 via-white/15 to-white/10 text-white group":"cursor-not-allowed bg-white/5 text-white/40"].join(" "),children:c?f.jsxs(f.Fragment,{children:[f.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),f.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),f.jsx("span",{children:"Running workflow"})]}):f.jsx("span",{className:"inline-block group-hover:-translate-y-1 transition-transform duration-300",children:"Get Decision"})}),h?f.jsx("div",{className:"mt-3 rounded-xl border border-white/30 bg-white/10 p-4 text-sm text-white/90",children:h}):null]})]})]}),p?f.jsxs("div",{className:Uw("p-5 md:p-6"),children:[f.jsx("div",{className:"flex flex-col gap-2 md:flex-row md:items-end md:justify-between",children:f.jsxs("div",{children:[f.jsx("div",{className:"text-lg font-semibold text-white",children:"Output"}),f.jsx("div",{className:"text-sm text-white/65"})]})}),O?f.jsx("div",{className:"mt-5 space-y-4",children:f.jsxs("div",{className:"rounded-2xl border border-white/30 bg-white/10 p-6",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx("svg",{className:"w-5 h-5 text-white/80",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),f.jsx("div",{className:"text-sm font-semibold tracking-widest text-white/80 uppercase",children:ue||"Status"})]}),ee&&f.jsx("div",{className:"text-base font-medium text-white mb-3 leading-relaxed",children:String(ee)}),Oe&&f.jsxs("div",{className:"text-sm text-white/70 leading-relaxed",children:[f.jsx("span",{className:"font-medium text-white/80",children:"Reason: "}),String(Oe)]})]})}):f.jsxs("div",{className:"mt-5 space-y-4",children:[f.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-6",children:[f.jsx("div",{className:"text-xs font-semibold tracking-widest text-white/60 mb-4",children:"FINAL DECISION"}),f.jsx("div",{className:"text-lg font-medium leading-relaxed text-white/90 whitespace-pre-wrap",children:j?String(j):"Processing..."})]}),f.jsxs("details",{className:"rounded-2xl border border-white/10 bg-black/25 p-6 group",children:[f.jsxs("summary",{className:"cursor-pointer flex items-center justify-between text-sm font-semibold text-white/85 hover:text-white transition-colors",children:[f.jsx("span",{children:"Why This Decision"}),f.jsx("svg",{className:"w-4 h-4 text-white/60 group-open:rotate-180 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),f.jsx("div",{className:"mt-4 pt-4 border-t border-white/10",children:M.length?f.jsx("div",{className:"space-y-3",children:M.map((R,L)=>f.jsx("div",{className:"text-sm text-white/85 leading-relaxed",children:R},L))}):f.jsx("div",{className:"text-sm text-white/60",children:"Processing..."})})]}),D.length>0&&f.jsxs("details",{className:"rounded-2xl border border-white/10 bg-black/25 p-6 group",children:[f.jsxs("summary",{className:"cursor-pointer flex items-center justify-between text-sm font-semibold text-white/85 hover:text-white transition-colors",children:[f.jsx("span",{children:"Personas"}),f.jsx("svg",{className:"w-4 h-4 text-white/60 group-open:rotate-180 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),f.jsx("div",{className:"mt-4 pt-4 border-t border-white/10",children:f.jsx("div",{className:"space-y-4",children:D.map((R,L)=>f.jsxs("div",{className:"rounded-lg border border-white/10 bg-black/20 p-4",children:[R.name&&f.jsx("div",{className:"text-sm font-semibold text-white mb-2",children:R.name}),R.goal&&f.jsxs("div",{className:"mb-2",children:[f.jsx("div",{className:"text-xs font-medium text-white/60 mb-1",children:"Goal:"}),f.jsx("div",{className:"text-sm text-white/85 leading-relaxed",children:String(R.goal)})]}),R.pain&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs font-medium text-white/60 mb-1",children:"Pain Point:"}),f.jsx("div",{className:"text-sm text-white/85 leading-relaxed",children:String(R.pain)})]}),!R.name&&!R.goal&&!R.pain&&f.jsx("div",{className:"text-sm text-white/85 leading-relaxed whitespace-pre-wrap",children:typeof R=="string"?R:JSON.stringify(R,null,2)})]},L))})})]}),f.jsxs("details",{className:"rounded-2xl border border-white/10 bg-black/25 p-6 group",children:[f.jsxs("summary",{className:"cursor-pointer flex items-center justify-between text-sm font-semibold text-white/85 hover:text-white transition-colors",children:[f.jsx("span",{children:"Risk If Ignored"}),f.jsx("svg",{className:"w-4 h-4 text-white/60 group-open:rotate-180 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),f.jsx("div",{className:"mt-4 pt-4 border-t border-white/10 text-sm text-white/85 leading-relaxed whitespace-pre-wrap",children:J?String(J):"Processing..."})]})]})]}):null]})}function jN(n){return["rounded-2xl border border-white/10 bg-black/40 backdrop-blur-xl shadow-lg",n].join(" ")}function DN(){const[n,e]=N.useState(!1),[t,s]=N.useState([{id:"1",text:"Hello! I'm your AI assistant. How can I help you today?",isUser:!1,timestamp:new Date}]),[i,r]=N.useState(""),[a,o]=N.useState(!1),[c,u]=N.useState(null),h=N.useRef(null),d=N.useRef(null),p=()=>{var w;(w=h.current)==null||w.scrollIntoView({behavior:"smooth"})};N.useEffect(()=>{var w;n&&(p(),(w=d.current)==null||w.focus())},[t,n]);async function m(w){var y,x,S,_,k,T;if(w.preventDefault(),!i.trim()||a)return;const E={id:Date.now().toString(),text:i.trim(),isUser:!0,timestamp:new Date};s(C=>[...C,E]),r(""),u(null),o(!0);try{const C={message:E.text},P="https://gnosiss.app.n8n.cloud/webhook/chatbot-webhook",j=new Promise((ee,Oe)=>{setTimeout(()=>{Oe(new Error("TIMEOUT"))},6e4)}),D=await Promise.race([fetch(P,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)}),j]),M=await D.json();if(!D.ok){const ee=typeof M=="string"?M:JSON.stringify(M);throw new Error(ee||`Request failed (${D.status})`)}let J="";typeof M=="string"?J=M:M!=null&&M.response?J=String(M.response):M!=null&&M.message?J=String(M.message):M!=null&&M.text?J=String(M.text):(y=M==null?void 0:M.data)!=null&&y.response?J=String(M.data.response):(x=M==null?void 0:M.data)!=null&&x.message?J=String(M.data.message):Array.isArray(M)&&M.length>0?J=String(((S=M[0])==null?void 0:S.response)||((_=M[0])==null?void 0:_.message)||((k=M[0])==null?void 0:k.text)||JSON.stringify(M[0])):J=JSON.stringify(M);const ue={id:(Date.now()+1).toString(),text:J,isUser:!1,timestamp:new Date};s(ee=>[...ee,ue])}catch(C){(C==null?void 0:C.message)==="TIMEOUT"?u("Request timed out. Please try again."):u(C!=null&&C.message?String(C.message):"Failed to get response");const P={id:(Date.now()+1).toString(),text:"Sorry, I encountered an error. Please try again.",isUser:!1,timestamp:new Date};s(j=>[...j,P])}finally{o(!1),(T=d.current)==null||T.focus()}}const v=()=>{e(!n)};return f.jsxs(f.Fragment,{children:[!n&&f.jsx("div",{className:"fixed bottom-20 right-6 z-[49] animate-bounce pointer-events-none",children:f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-0 bg-white/20 rounded-full blur-xl animate-ping pointer-events-none"}),f.jsxs("div",{className:"relative bg-gradient-to-r from-white/20 via-white/15 to-white/10 border border-white/20 backdrop-blur-xl rounded-2xl px-4 py-3 shadow-lg pointer-events-none",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),f.jsx("div",{className:"absolute inset-0 bg-green-400 rounded-full animate-ping opacity-75"})]}),f.jsxs("div",{className:"flex flex-col",children:[f.jsx("div",{className:"text-xs font-semibold text-white",children:"AI Assistant"}),f.jsx("div",{className:"text-xs text-white/70",children:"Ask me anything"})]})]}),f.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-full",children:f.jsx("svg",{className:"w-4 h-4 text-white/20",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{d:"M5 6l5 5 5-5H5z"})})})]})]})}),f.jsx("div",{className:"fixed bottom-6 right-6 z-[60]",children:f.jsxs("button",{onClick:v,className:"w-14 h-14 rounded-full bg-gradient-to-r from-white/20 via-white/15 to-white/10 border border-white/10 backdrop-blur-xl shadow-lg flex items-center justify-center group hover:scale-110 transition-transform duration-300 relative cursor-pointer active:scale-95","aria-label":"Open chatbot",type:"button",children:[!n&&f.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-white/30 animate-ping pointer-events-none"}),n?f.jsx("svg",{className:"w-6 h-6 text-white relative z-10 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):f.jsx("svg",{className:"w-6 h-6 text-white relative z-10 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})]})}),n&&f.jsx("div",{className:"fixed bottom-24 right-6 z-[55] w-96 h-[600px] flex flex-col",children:f.jsxs("div",{className:jN("flex flex-col h-full p-0"),children:[f.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-2 h-2 rounded-full bg-white"}),f.jsx("div",{className:"text-sm font-semibold text-white",children:"REVUE CHATBOT"})]}),f.jsx("button",{onClick:()=>e(!1),className:"text-white/60 hover:text-white transition-colors","aria-label":"Close chatbot",children:f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[t.map(w=>f.jsx("div",{className:`flex ${w.isUser?"justify-end":"justify-start"}`,children:f.jsxs("div",{className:`max-w-[80%] rounded-2xl px-4 py-3 ${w.isUser?"bg-gradient-to-r from-white/20 via-white/15 to-white/10 text-white":"bg-black/30 border border-white/10 text-white/90"}`,children:[f.jsx("div",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:w.text}),f.jsx("div",{className:`text-xs mt-2 ${w.isUser?"text-white/60":"text-white/50"}`,children:w.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},w.id)),a&&f.jsx("div",{className:"flex justify-start",children:f.jsx("div",{className:"bg-black/30 border border-white/10 rounded-2xl px-4 py-3",children:f.jsxs("div",{className:"flex items-center gap-2 text-white/70",children:[f.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),f.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),f.jsx("span",{className:"text-sm",children:"Thinking..."})]})})}),f.jsx("div",{ref:h})]}),c&&f.jsx("div",{className:"mx-4 mb-2 rounded-xl border border-white/30 bg-white/10 p-3 text-sm text-white/90",children:c}),f.jsx("div",{className:"border-t border-white/10 p-4",children:f.jsxs("form",{onSubmit:m,className:"flex gap-2",children:[f.jsx("input",{ref:d,type:"text",value:i,onChange:w=>r(w.target.value),placeholder:"Type your message...",disabled:a,className:"flex-1 rounded-xl border border-white/10 bg-black/30 px-4 py-2.5 text-sm text-white/90 outline-none placeholder:text-white/35 focus:border-white/40 focus:ring-2 focus:ring-white/15 disabled:opacity-50 disabled:cursor-not-allowed"}),f.jsx("button",{type:"submit",disabled:!i.trim()||a,className:["rounded-xl px-4 py-2.5 text-sm font-semibold tracking-wide transition-all duration-300","border border-white/10 shadow-lg overflow-hidden flex items-center justify-center",!a&&i.trim()?"bg-gradient-to-r from-white/20 via-white/15 to-white/10 text-white group":"cursor-not-allowed bg-white/5 text-white/40"].join(" "),children:f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})]})})]})}function FN(n){return["rounded-2xl border border-white/10 bg-black/40 backdrop-blur-xl shadow-lg",n].join(" ")}function ON(){const{login:n,isLoading:e,isAuthenticated:t}=Hp();if(t)return f.jsx(zp,{to:"/app",replace:!0});const[s,i]=N.useState(""),[r,a]=N.useState(""),[o,c]=N.useState(!1),[u,h]=N.useState(null),d=e||o;function p(v){const w=[];return v.length<8&&w.push("Password must be at least 8 characters long"),/[A-Z]/.test(v)||w.push("Password must contain at least one uppercase letter"),/[0-9]/.test(v)||w.push("Password must contain at least one number"),w.length>0?w.join(", "):null}async function m(v){v.preventDefault(),h(null),c(!0);try{const w=p(r);if(w){h(w),c(!1);return}await n(s)}catch(w){h(w!=null&&w.message?String(w.message):"Login failed"),c(!1)}}return f.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-24",children:f.jsxs("div",{className:"w-full max-w-md",children:[f.jsx(Ge,{to:"/",className:"flex justify-center mb-8",children:f.jsx("span",{className:"text-3xl font-bold text-white",children:"REVUE. AI"})}),f.jsxs("div",{className:FN("p-8"),children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Login"}),f.jsx("p",{className:"text-sm text-white/65",children:"Enter your credentials to access your account"})]}),f.jsxs("form",{onSubmit:m,className:"space-y-5",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-white/85 mb-2",children:"Email"}),f.jsx("input",{id:"email",type:"email",value:s,onChange:v=>i(v.target.value),required:!0,placeholder:"your@email.com",className:"w-full rounded-xl border border-white/10 bg-black/30 px-4 py-3 text-sm text-white/90 outline-none placeholder:text-white/35 focus:border-white/40 focus:ring-2 focus:ring-white/15"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-white/85 mb-2",children:"Password"}),f.jsx("input",{id:"password",type:"password",value:r,onChange:v=>a(v.target.value),required:!0,placeholder:"",className:"w-full rounded-xl border border-white/10 bg-black/30 px-4 py-3 text-sm text-white/90 outline-none placeholder:text-white/35 focus:border-white/40 focus:ring-2 focus:ring-white/15"})]}),u&&f.jsx("div",{className:"rounded-xl border border-white/30 bg-white/10 p-4 text-sm text-white/90",children:u}),f.jsx("button",{type:"submit",disabled:d,className:["w-full rounded-xl px-5 py-4 text-sm font-semibold tracking-wide transition-all duration-300","border border-white/10 shadow-lg overflow-hidden flex items-center justify-center gap-2",d?"cursor-not-allowed bg-white/5 text-white/40":"bg-gradient-to-r from-white/20 via-white/15 to-white/10 text-white group"].join(" "),children:d?f.jsxs(f.Fragment,{children:[f.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),f.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),f.jsx("span",{children:"Logging in..."})]}):f.jsx("span",{className:"inline-block group-hover:-translate-y-1 transition-transform duration-300",children:"Login"})})]}),f.jsx("div",{className:"mt-6 text-center",children:f.jsxs("p",{className:"text-sm text-white/65",children:["Don't have an account?"," ",f.jsx(Ge,{to:"/signup",className:"text-white font-semibold hover:text-white/80 transition-colors",children:"Sign up"})]})})]})]})})}function zN(n){return["rounded-2xl border border-white/10 bg-black/40 backdrop-blur-xl shadow-lg",n].join(" ")}function BN(){const{signup:n,isLoading:e,isAuthenticated:t}=Hp();if(t)return f.jsx(zp,{to:"/app",replace:!0});const[s,i]=N.useState(""),[r,a]=N.useState(""),[o,c]=N.useState(""),[u,h]=N.useState(!1),[d,p]=N.useState(null),m=e||u;function v(E){const y=[];return E.length<8&&y.push("Password must be at least 8 characters long"),/[A-Z]/.test(E)||y.push("Password must contain at least one uppercase letter"),/[0-9]/.test(E)||y.push("Password must contain at least one number"),y.length>0?y.join(", "):null}async function w(E){E.preventDefault(),p(null),h(!0);try{const y=v(r);if(y){p(y),h(!1);return}if(r!==o){p("Passwords do not match"),h(!1);return}await n(s)}catch(y){p(y!=null&&y.message?String(y.message):"Signup failed"),h(!1)}}return f.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-24",children:f.jsxs("div",{className:"w-full max-w-md",children:[f.jsx(Ge,{to:"/",className:"flex justify-center mb-8",children:f.jsx("span",{className:"text-3xl font-bold text-white",children:"REVUE. AI"})}),f.jsxs("div",{className:zN("p-8"),children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Sign Up"}),f.jsx("p",{className:"text-sm text-white/65",children:"Create your account to get started"})]}),f.jsxs("form",{onSubmit:w,className:"space-y-5",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-white/85 mb-2",children:"Email"}),f.jsx("input",{id:"email",type:"email",value:s,onChange:E=>i(E.target.value),required:!0,placeholder:"your@email.com",className:"w-full rounded-xl border border-white/10 bg-black/30 px-4 py-3 text-sm text-white/90 outline-none placeholder:text-white/35 focus:border-white/40 focus:ring-2 focus:ring-white/15"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-white/85 mb-2",children:"Password"}),f.jsx("input",{id:"password",type:"password",value:r,onChange:E=>a(E.target.value),required:!0,placeholder:"",className:"w-full rounded-xl border border-white/10 bg-black/30 px-4 py-3 text-sm text-white/90 outline-none placeholder:text-white/35 focus:border-white/40 focus:ring-2 focus:ring-white/15"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-white/85 mb-2",children:"Confirm Password"}),f.jsx("input",{id:"confirmPassword",type:"password",value:o,onChange:E=>c(E.target.value),required:!0,placeholder:"",className:"w-full rounded-xl border border-white/10 bg-black/30 px-4 py-3 text-sm text-white/90 outline-none placeholder:text-white/35 focus:border-white/40 focus:ring-2 focus:ring-white/15"})]}),d&&f.jsx("div",{className:"rounded-xl border border-white/30 bg-white/10 p-4 text-sm text-white/90",children:d}),f.jsx("button",{type:"submit",disabled:m,className:["w-full rounded-xl px-5 py-4 text-sm font-semibold tracking-wide transition-all duration-300","border border-white/10 shadow-lg overflow-hidden flex items-center justify-center gap-2",m?"cursor-not-allowed bg-white/5 text-white/40":"bg-gradient-to-r from-white/20 via-white/15 to-white/10 text-white group"].join(" "),children:m?f.jsxs(f.Fragment,{children:[f.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),f.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),f.jsx("span",{children:"Signing up..."})]}):f.jsx("span",{className:"inline-block group-hover:-translate-y-1 transition-transform duration-300",children:"Sign Up"})})]}),f.jsx("div",{className:"mt-6 text-center",children:f.jsxs("p",{className:"text-sm text-white/65",children:["Already have an account?"," ",f.jsx(Ge,{to:"/login",className:"text-white font-semibold hover:text-white/80 transition-colors",children:"Sign in"})]})})]})]})})}function HN({children:n}){const{isAuthenticated:e,isLoading:t}=Hp(),s=Qn();return t?f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-black",children:f.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-white"})}):e?f.jsx(f.Fragment,{children:n}):f.jsx(zp,{to:"/login",state:{from:s},replace:!0})}function Im({title:n,subtitle:e,description:t,icon:s}){const i=bo();return f.jsxs("div",{className:"min-h-screen bg-dark-blue relative overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`
            linear-gradient(rgba(255, 255, 255, 0.1) 1px, transparent 1px),
            linear-gradient(90deg, rgba(255, 255, 255, 0.1) 1px, transparent 1px)
          `,backgroundSize:"50px 50px"}}),f.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[f.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-purple-500/10 rounded-full blur-3xl"}),f.jsx("div",{className:"absolute bottom-0 left-0 w-[500px] h-[500px] bg-blue-500/10 rounded-full blur-3xl"})]}),f.jsxs("div",{className:"relative z-10 flex flex-col min-h-screen",children:[f.jsx(Jo,{}),f.jsx("main",{className:"flex-1 pt-32 pb-20 px-6",children:f.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[s&&f.jsx("div",{className:"flex justify-center mb-8",children:f.jsx("div",{className:"p-4 rounded-2xl bg-white/5 border border-white/10 backdrop-blur-xl",children:s})}),f.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-white mb-6 leading-tight",children:n}),f.jsx("p",{className:"text-xl text-white/80 font-medium mb-8",children:e}),f.jsx("p",{className:"text-lg text-white/60 leading-relaxed mb-12 max-w-2xl mx-auto",children:t}),f.jsx("div",{className:"flex justify-center gap-4",children:f.jsx("button",{onClick:()=>i("/app"),className:"px-8 py-4 rounded-xl bg-white text-black font-bold hover:bg-white/90 transition-colors shadow-lg shadow-white/10",children:"Try It Now"})})]})}),f.jsx(Zo,{})]})]})}function Eo({title:n,content:e,updatedAt:t}){return f.jsxs("div",{className:"min-h-screen bg-dark-blue relative overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`
            linear-gradient(rgba(255, 255, 255, 0.1) 1px, transparent 1px),
            linear-gradient(90deg, rgba(255, 255, 255, 0.1) 1px, transparent 1px)
          `,backgroundSize:"50px 50px"}}),f.jsxs("div",{className:"relative z-10 flex flex-col min-h-screen",children:[f.jsx(Jo,{}),f.jsx("main",{className:"flex-1 pt-32 pb-20 px-6",children:f.jsxs("div",{className:"max-w-3xl mx-auto",children:[f.jsxs("div",{className:"mb-12 border-b border-white/10 pb-8",children:[f.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:n}),t&&f.jsxs("p",{className:"text-white/40 text-sm",children:["Last updated: ",t]})]}),f.jsx("div",{className:"prose prose-invert prose-lg max-w-none text-white/70",children:e})]})}),f.jsx(Zo,{})]})]})}function UN(){const[n,e]=N.useState(!1);N.useEffect(()=>{if(!localStorage.getItem("cookieConsent")){const i=setTimeout(()=>e(!0),1e3);return()=>clearTimeout(i)}},[]);const t=()=>{localStorage.setItem("cookieConsent","true"),e(!1)};return n?f.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 p-4 md:p-6 animate-slide-up",children:f.jsxs("div",{className:"max-w-7xl mx-auto bg-black/80 backdrop-blur-xl border border-white/10 rounded-2xl p-6 shadow-2xl flex flex-col md:flex-row items-center justify-between gap-6",children:[f.jsxs("div",{className:"space-y-2 text-center md:text-left",children:[f.jsx("h3",{className:"text-white font-semibold text-lg",children:"We value your privacy"}),f.jsxs("p",{className:"text-white/70 text-sm max-w-2xl",children:['We use cookies to enhance your browsing experience, serve personalized content, and analyze our traffic. By clicking "Accept All", you consent to our use of cookies. Read our ',f.jsx(Ge,{to:"/legal/cookie",className:"text-white hover:underline",children:"Cookie Policy"}),"."]})]}),f.jsxs("div",{className:"flex gap-4",children:[f.jsx("button",{onClick:()=>e(!1),className:"px-6 py-2.5 rounded-xl border border-white/10 text-white/70 font-medium hover:bg-white/5 transition-colors",children:"Decline"}),f.jsx("button",{onClick:t,className:"px-6 py-2.5 rounded-xl bg-white text-black font-semibold hover:bg-white/90 transition-colors shadow-lg shadow-white/10",children:"Accept All"})]})]})}):null}function $N(){const{pathname:n}=Qn();return N.useEffect(()=>{window.scrollTo(0,0)},[n]),null}function VN(){return f.jsxs(gC,{children:[f.jsx($N,{}),f.jsxs(CC,{children:[f.jsx(DN,{}),f.jsx(UN,{}),f.jsxs(Gk,{children:[f.jsx(Ft,{path:"/",element:f.jsx(TC,{})}),f.jsx(Ft,{path:"/solution/feedback-analysis",element:f.jsx(Im,{title:"Feedback Analysis",subtitle:"Transform noise into signal.",description:"Our AI engine processes thousands of data points from CSVs, PDFs, and text to identify patterns, sentiments, and actionable insights. Stop guessing and start knowing what your users truly feel.",icon:f.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})}),f.jsx(Ft,{path:"/solution/executive-reporting",element:f.jsx(Im,{title:"Executive Reporting",subtitle:"Board-ready insights in seconds.",description:"Generate PDF reports that summarize thousands of feedback items into clear strategic directives. Perfect for sharing with leadership, stakeholders, or your product team.",icon:f.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),f.jsx(Ft,{path:"/solution/webhook-integration",element:f.jsx(Im,{title:"Webhook Integration",subtitle:"Real-time data pipelines.",description:"Connect Revue.Ai directly to your existing tools. Our secure webhook infrastructure ensures that as soon as feedback arriveswhether from a form, an app, or a support ticketit gets analyzed instantly.",icon:f.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})}),f.jsx(Ft,{path:"/company/about",element:f.jsx(Eo,{title:"About Us",content:f.jsxs("div",{className:"space-y-6",children:[f.jsx("p",{children:"Revue.Ai is built for the NxtWave X Open AI Hackathon 2026. Our mission is to bridge the gap between raw customer feedback and high-level business strategy."}),f.jsx("p",{children:"We believe that in the age of AI, no company should struggle to understand its users. By leveraging advanced LLMs and orchestration workflows, we turn the chaotic voice of the customer into a clear blueprint for growth."})]})})}),f.jsx(Ft,{path:"/company/documentation",element:f.jsx(Eo,{title:"Documentation",content:f.jsxs("div",{className:"space-y-6",children:[f.jsx("h3",{children:"Getting Started"}),f.jsx("p",{children:"Welcome to the Revue.Ai developer docs. Here you'll find everything you need to integrate our decision intelligence engine into your workflow."}),f.jsx("div",{className:"p-4 bg-white/5 border border-white/10 rounded-lg",children:f.jsx("code",{className:"text-white/80",children:"Current Version: v1.0.0 (Beta)"})}),f.jsxs("p",{children:["Refer to our ",f.jsx("a",{href:"#",className:"text-indigo-400 hover:text-indigo-300",children:"API Reference"})," for endpoint details."]})]})})}),f.jsx(Ft,{path:"/company/security",element:f.jsx(Eo,{title:"Security",updatedAt:"Jan 2026",content:f.jsxs("div",{className:"space-y-6",children:[f.jsx("p",{children:"Your data security is our top priority. We employ enterprise-grade encryption for all data in transit and at rest."}),f.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[f.jsx("li",{children:"SOC 2 Type II Compliant Infrastructure (Pending)"}),f.jsx("li",{children:"End-to-end SSL/TLS Encryption"}),f.jsx("li",{children:"Regular Penetration Testing"}),f.jsx("li",{children:"Data Isolation for Enterprise Tenants"})]})]})})}),f.jsx(Ft,{path:"/legal/privacy",element:f.jsx(Eo,{title:"Privacy Policy",updatedAt:"January 16, 2026",content:f.jsxs("div",{className:"space-y-6",children:[f.jsxs("p",{children:[f.jsx("strong",{children:"1. Information We Collect"}),f.jsx("br",{}),"We collect information you provide directly to us, such as when you create an account, subscribe to our newsletter, or request customer support."]}),f.jsxs("p",{children:[f.jsx("strong",{children:"2. How We Use Information"}),f.jsx("br",{}),"We use the information we collect to provide, maintain, and improve our services, develop new ones, and protect Revue.Ai and our users."]}),f.jsxs("p",{children:[f.jsx("strong",{children:"3. Data Retention"}),f.jsx("br",{}),"We store the information we collect for as long as it is necessary for the purpose(s) for which we originally collected it."]})]})})}),f.jsx(Ft,{path:"/legal/terms",element:f.jsx(Eo,{title:"Terms of Service",updatedAt:"January 16, 2026",content:f.jsxs("div",{className:"space-y-6",children:[f.jsxs("p",{children:[f.jsx("strong",{children:"1. Acceptance of Terms"}),f.jsx("br",{}),"By accessing or using our services, you agree to be bound by these Terms. If you do not agree to these Terms, you may not access the services."]}),f.jsxs("p",{children:[f.jsx("strong",{children:"2. Use of Services"}),f.jsx("br",{}),"You may use our services only as permitted by law, including applicable export and re-export control laws and regulations."]}),f.jsxs("p",{children:[f.jsx("strong",{children:"3. Termination"}),f.jsx("br",{}),"We may terminate or suspend access to our service immediately, without prior notice or liability, for any reason whatsoever, including without limitation if you breach the Terms."]})]})})}),f.jsx(Ft,{path:"/legal/cookie",element:f.jsx(Eo,{title:"Cookie Policy",updatedAt:"January 16, 2026",content:f.jsxs("div",{className:"space-y-6",children:[f.jsx("p",{children:'We use cookies to enhance your browsing experience, serve personalized content, and analyze our traffic. By clicking "Accept", you consent to our use of cookies.'}),f.jsx("h3",{children:"Types of Cookies We Use"}),f.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[f.jsxs("li",{children:[f.jsx("strong",{children:"Essential Cookies:"})," Necessary for the website to function (e.g., authentication)."]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Analytics Cookies:"})," Help us understand how visitors interact with the website."]})]})]})})}),f.jsx(Ft,{path:"/app",element:f.jsx(HN,{children:f.jsxs("div",{className:"min-h-screen bg-dark-blue relative overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`
                        linear-gradient(rgba(255, 255, 255, 0.1) 1px, transparent 1px),
                        linear-gradient(90deg, rgba(255, 255, 255, 0.1) 1px, transparent 1px)
                      `,backgroundSize:"50px 50px"}}),f.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[f.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-white/5 rounded-full blur-3xl"}),f.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-white/5 rounded-full blur-3xl"})]}),f.jsxs("div",{className:"relative z-10 flex flex-col min-h-screen",children:[f.jsx(Jo,{}),f.jsx("div",{className:"mx-auto w-full max-w-6xl px-4 pt-24 pb-10 flex-1",children:f.jsx(IN,{})}),f.jsx(Zo,{})]})]})})}),f.jsx(Ft,{path:"/login",element:f.jsxs("div",{className:"min-h-screen bg-dark-blue relative overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`
                      linear-gradient(rgba(255, 255, 255, 0.1) 1px, transparent 1px),
                      linear-gradient(90deg, rgba(255, 255, 255, 0.1) 1px, transparent 1px)
                    `,backgroundSize:"50px 50px"}}),f.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[f.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-white/5 rounded-full blur-3xl"}),f.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-white/5 rounded-full blur-3xl"})]}),f.jsxs("div",{className:"relative z-10",children:[f.jsx(Jo,{}),f.jsx(ON,{}),f.jsx(Zo,{})]})]})}),f.jsx(Ft,{path:"/signup",element:f.jsxs("div",{className:"min-h-screen bg-dark-blue relative overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`
                      linear-gradient(rgba(255, 255, 255, 0.1) 1px, transparent 1px),
                      linear-gradient(90deg, rgba(255, 255, 255, 0.1) 1px, transparent 1px)
                    `,backgroundSize:"50px 50px"}}),f.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[f.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-white/5 rounded-full blur-3xl"}),f.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-white/5 rounded-full blur-3xl"})]}),f.jsxs("div",{className:"relative z-10",children:[f.jsx(Jo,{}),f.jsx(BN,{}),f.jsx(Zo,{})]})]})}),f.jsx(Ft,{path:"*",element:f.jsx(zp,{to:"/",replace:!0})})]})]})]})}jm.createRoot(document.getElementById("root")).render(f.jsx(OS.StrictMode,{children:f.jsx(VN,{})}));
